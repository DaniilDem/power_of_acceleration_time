/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){
this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);
/*
Copyright (c) 2010 Heather Arthur

Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
"Software"), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

*/!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){brain=a("./lib/brain")},{"./lib/brain":2}],2:[function(a,b,c){c.NeuralNetwork=a("./neuralnetwork").NeuralNetwork,c.crossValidate=a("./cross-validate")},{"./cross-validate":3,"./neuralnetwork":5}],3:[function(a,b){function c(a,b,c,e,f){var g=new a(b),h=Date.now(),i=g.train(e,c),j=Date.now(),k=g.test(f),l=Date.now(),m=d(k).extend({trainTime:j-h,testTime:l-j,iterations:i.iterations,trainError:i.error,learningRate:g.learningRate,hidden:g.hiddenSizes,network:g.toJSON()});return m}var d=a("underscore")._;b.exports=function(a,b,e,f,g){g=g||4;var h=b.length/g;b=d(b).sortBy(function(){return Math.random()});var i={error:0,trainTime:0,testTime:0,iterations:0,trainError:0},j={truePos:0,trueNeg:0,falsePos:0,falseNeg:0,total:0},k=[],l=d.range(g).map(function(g){var l=d(b).clone(),m=l.splice(g*h,h),n=l,o=c(a,e,f,n,m);return d(i).each(function(a,b){i[b]=a+o[b]}),d(j).each(function(a,b){j[b]=a+o[b]}),k.push(o.misclasses),o});return d(i).each(function(a,b){i[b]=a/g}),j.precision=j.truePos/(j.truePos+j.falsePos),j.recall=j.truePos/(j.truePos+j.falseNeg),j.accuracy=(j.trueNeg+j.truePos)/j.total,j.testSize=h,j.trainSize=b.length-h,{avgs:i,stats:j,sets:l,misclasses:d(k).flatten()}}},{underscore:20}],4:[function(a,b){function c(a){var b=h(a).reduce(function(a,b){return h(a).extend(b)},{});return d(b)}function d(a){var b={},c=0;for(var d in a)b[d]=c++;return b}function e(a,b){var c=[];for(var d in a)c[a[d]]=b[d]||0;return c}function f(a,b){var c={};for(var d in a)c[d]=b[a[d]];return c}function g(a){for(var b={},c=0,d=a.length;d-->0;)b[a[d]]=c++;return b}var h=a("underscore");b.exports={buildLookup:c,lookupFromHash:d,toArray:e,toHash:f,lookupFromArray:g}},{underscore:20}],5:[function(a,b,c){function d(){return.4*Math.random()-.2}function e(a){for(var b=new Array(a),c=0;a>c;c++)b[c]=0;return b}function f(a){for(var b=new Array(a),c=0;a>c;c++)b[c]=d();return b}function g(a){for(var b=0,c=0;c<a.length;c++)b+=Math.pow(a[c],2);return b/a.length}function h(a){if(k.call(this,{objectMode:!0}),a=a||{},!a.neuralNetwork)throw new Error("no neural network specified");return this.neuralNetwork=a.neuralNetwork,this.dataFormatDetermined=!1,this.inputKeys=[],this.outputKeys=[],this.i=0,this.iterations=a.iterations||2e4,this.errorThresh=a.errorThresh||.005,this.log=a.log||!1,this.logPeriod=a.logPeriod||10,this.callback=a.callback,this.callbackPeriod=a.callbackPeriod||10,this.floodCallback=a.floodCallback,this.doneTrainingCallback=a.doneTrainingCallback,this.size=0,this.count=0,this.sum=0,this.on("finish",this.finishStreamIteration),this}var i=a("underscore"),j=a("./lookup"),k=a("stream").Writable,l=a("inherits"),m=function(a){a=a||{},this.learningRate=a.learningRate||.3,this.momentum=a.momentum||.1,this.hiddenSizes=a.hiddenLayers,this.binaryThresh=a.binaryThresh||.5};m.prototype={initialize:function(a){this.sizes=a,this.outputLayer=this.sizes.length-1,this.biases=[],this.weights=[],this.outputs=[],this.deltas=[],this.changes=[],this.errors=[];for(var b=0;b<=this.outputLayer;b++){var c=this.sizes[b];if(this.deltas[b]=e(c),this.errors[b]=e(c),this.outputs[b]=e(c),b>0){this.biases[b]=f(c),this.weights[b]=new Array(c),this.changes[b]=new Array(c);for(var d=0;c>d;d++){var g=this.sizes[b-1];this.weights[b][d]=f(g),this.changes[b][d]=e(g)}}}},run:function(a){this.inputLookup&&(a=j.toArray(this.inputLookup,a));var b=this.runInput(a);return this.outputLookup&&(b=j.toHash(this.outputLookup,b)),b},runInput:function(a){this.outputs[0]=a;for(var b=1;b<=this.outputLayer;b++){for(var c=0;c<this.sizes[b];c++){for(var d=this.weights[b][c],e=this.biases[b][c],f=0;f<d.length;f++)e+=d[f]*a[f];this.outputs[b][c]=1/(1+Math.exp(-e))}var g=a=this.outputs[b]}return g},train:function(a,b){a=this.formatData(a),b=b||{};var c=b.iterations||2e4,d=b.errorThresh||.005,e=b.log||!1,f=b.logPeriod||10,g=b.callback,h=b.callbackPeriod||10,j=a[0].input.length,k=a[0].output.length,l=this.hiddenSizes;l||(l=[Math.max(3,Math.floor(j/2))]);var m=i([j,l,k]).flatten();this.initialize(m);for(var n=1,o=0;c>o&&n>d;o++){for(var p=0,q=0;q<a.length;q++){var r=this.trainPattern(a[q].input,a[q].output);p+=r}n=p/a.length,e&&o%f==0&&console.log("iterations:",o,"training error:",n),g&&o%h==0&&g({error:n,iterations:o})}return{error:n,iterations:o}},trainPattern:function(a,b){this.runInput(a),this.calculateDeltas(b),this.adjustWeights();var c=g(this.errors[this.outputLayer]);return c},calculateDeltas:function(a){for(var b=this.outputLayer;b>=0;b--)for(var c=0;c<this.sizes[b];c++){var d=this.outputs[b][c],e=0;if(b==this.outputLayer)e=a[c]-d;else for(var f=this.deltas[b+1],g=0;g<f.length;g++)e+=f[g]*this.weights[b+1][g][c];this.errors[b][c]=e,this.deltas[b][c]=e*d*(1-d)}},adjustWeights:function(){for(var a=1;a<=this.outputLayer;a++)for(var b=this.outputs[a-1],c=0;c<this.sizes[a];c++){for(var d=this.deltas[a][c],e=0;e<b.length;e++){var f=this.changes[a][c][e];f=this.learningRate*d*b[e]+this.momentum*f,this.changes[a][c][e]=f,this.weights[a][c][e]+=f}this.biases[a][c]+=this.learningRate*d}},formatData:function(a){if(!i.isArray(a)){var b=[];b.push(a),a=b}var c=a[0].input;return i(c).isArray()||c instanceof Float64Array||(this.inputLookup||(this.inputLookup=j.buildLookup(i(a).pluck("input"))),a=a.map(function(a){var b=j.toArray(this.inputLookup,a.input);return i(i(a).clone()).extend({input:b})},this)),i(a[0].output).isArray()||(this.outputLookup||(this.outputLookup=j.buildLookup(i(a).pluck("output"))),a=a.map(function(a){var b=j.toArray(this.outputLookup,a.output);return i(i(a).clone()).extend({output:b})},this)),a},test:function(a){a=this.formatData(a);for(var b=1==a[0].output.length,c=0,d=0,e=0,f=0,h=[],j=0,k=0;k<a.length;k++){var l,m,n=this.runInput(a[k].input),o=a[k].output;if(b?(l=n[0]>this.binaryThresh?1:0,m=o[0]):(l=n.indexOf(i(n).max()),m=o.indexOf(i(o).max())),l!=m){var p=a[k];i(p).extend({actual:l,expected:m}),h.push(p)}b&&(0==l&&0==m?f++:1==l&&1==m?e++:0==l&&1==m?d++:1==l&&0==m&&c++);var q=n.map(function(a,b){return o[b]-a});j+=g(q)}var r=j/a.length,s={error:r,misclasses:h};return b&&i(s).extend({trueNeg:f,truePos:e,falseNeg:d,falsePos:c,total:a.length,precision:e/(e+c),recall:e/(e+d),accuracy:(f+e)/a.length}),s},toJSON:function(){for(var a=[],b=0;b<=this.outputLayer;b++){a[b]={};var c;c=0==b&&this.inputLookup?i(this.inputLookup).keys():b==this.outputLayer&&this.outputLookup?i(this.outputLookup).keys():i.range(0,this.sizes[b]);for(var d=0;d<c.length;d++){var e=c[d];if(a[b][e]={},b>0){a[b][e].bias=this.biases[b][d],a[b][e].weights={};for(var f in a[b-1]){var g=f;1==b&&this.inputLookup&&(g=this.inputLookup[f]),a[b][e].weights[f]=this.weights[b][d][g]}}}}return{layers:a,outputLookup:!!this.outputLookup,inputLookup:!!this.inputLookup}},fromJSON:function(a){var b=a.layers.length;this.outputLayer=b-1,this.sizes=new Array(b),this.weights=new Array(b),this.biases=new Array(b),this.outputs=new Array(b);for(var c=0;c<=this.outputLayer;c++){var d=a.layers[c];0!=c||d[0]&&!a.inputLookup?c!=this.outputLayer||d[0]&&!a.outputLookup||(this.outputLookup=j.lookupFromHash(d)):this.inputLookup=j.lookupFromHash(d);var e=i(d).keys();this.sizes[c]=e.length,this.weights[c]=[],this.biases[c]=[],this.outputs[c]=[];for(var f in e){var g=e[f];this.biases[c][f]=d[g].bias,this.weights[c][f]=i(d[g].weights).toArray()}}return this},toFunction:function(){var a=this.toJSON();return new Function("input","  var net = "+JSON.stringify(a)+";\n\n  for (var i = 1; i < net.layers.length; i++) {\n    var layer = net.layers[i];\n    var output = {};\n    \n    for (var id in layer) {\n      var node = layer[id];\n      var sum = node.bias;\n      \n      for (var iid in node.weights) {\n        sum += node.weights[iid] * input[iid];\n      }\n      output[id] = (1 / (1 + Math.exp(-sum)));\n    }\n    input = output;\n  }\n  return output;")},createTrainStream:function(a){return a=a||{},a.neuralNetwork=this,this.trainStream=new h(a),this.trainStream}},c.NeuralNetwork=m,l(h,k),h.prototype._write=function(a,b,c){if(!a)return this.emit("finish"),c();if(!this.dataFormatDetermined)return this.size++,this.inputKeys=i.union(this.inputKeys,i.keys(a.input)),this.outputKeys=i.union(this.outputKeys,i.keys(a.output)),this.firstDatum=this.firstDatum||a,c();this.count++;var d=this.neuralNetwork.formatData(a);this.trainDatum(d[0]),c()},h.prototype.trainDatum=function(a){var b=this.neuralNetwork.trainPattern(a.input,a.output);this.sum+=b},h.prototype.finishStreamIteration=function(){if(this.dataFormatDetermined&&this.size!==this.count&&console.log("This iteration's data length was different from the first."),!this.dataFormatDetermined){this.neuralNetwork.inputLookup=j.lookupFromArray(this.inputKeys),this.neuralNetwork.outputLookup=j.lookupFromArray(this.outputKeys);var a=this.neuralNetwork.formatData(this.firstDatum),b=a[0].input.length,c=a[0].output.length,d=this.hiddenSizes;d||(d=[Math.max(3,Math.floor(b/2))]);var e=i([b,d,c]).flatten();return this.dataFormatDetermined=!0,this.neuralNetwork.initialize(e),void("function"==typeof this.floodCallback&&this.floodCallback())}var f=this.sum/this.size;if(this.log&&this.i%this.logPeriod==0&&console.log("iterations:",this.i,"training error:",f),this.callback&&this.i%this.callbackPeriod==0&&this.callback({error:f,iterations:this.i}),this.sum=0,this.count=0,this.i++,this.i<this.iterations&&f>this.errorThresh){if("function"==typeof this.floodCallback)return this.floodCallback()}else if("function"==typeof this.doneTrainingCallback)return this.doneTrainingCallback({error:f,iterations:this.i})}},{"./lookup":4,inherits:19,stream:12,underscore:20}],6:[function(a,b,c){function d(a,b,c){if(!(this instanceof d))return new d(a,b,c);var e=typeof a;if("base64"===b&&"string"===e)for(a=C(a);a.length%4!==0;)a+="=";var f;if("number"===e)f=F(a);else if("string"===e)f=d.byteLength(a,b);else{if("object"!==e)throw new Error("First argument needs to be a number, array or string.");f=F(a.length)}var g;d._useTypedArrays?g=D(new Uint8Array(f)):(g=this,g.length=f,g._isBuffer=!0);var h;if(d._useTypedArrays&&"function"==typeof Uint8Array&&a instanceof Uint8Array)g._set(a);else if(H(a))for(h=0;f>h;h++)g[h]=d.isBuffer(a)?a.readUInt8(h):a[h];else if("string"===e)g.write(a,0,b);else if("number"===e&&!d._useTypedArrays&&!c)for(h=0;f>h;h++)g[h]=0;return g}function e(a,b,c,e){c=Number(c)||0;var f=a.length-c;e?(e=Number(e),e>f&&(e=f)):e=f;var g=b.length;S(g%2===0,"Invalid hex string"),e>g/2&&(e=g/2);for(var h=0;e>h;h++){var i=parseInt(b.substr(2*h,2),16);S(!isNaN(i),"Invalid hex string"),a[c+h]=i}return d._charsWritten=2*h,h}function f(a,b,c,e){var f=d._charsWritten=N(J(b),a,c,e);return f}function g(a,b,c,e){var f=d._charsWritten=N(K(b),a,c,e);return f}function h(a,b,c,d){return g(a,b,c,d)}function i(a,b,c,e){var f=d._charsWritten=N(M(b),a,c,e);return f}function j(a,b,c,e){var f=d._charsWritten=N(L(b),a,c,e);return f}function k(a,b,c){return T.fromByteArray(0===b&&c===a.length?a:a.slice(b,c))}function l(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=O(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+O(e)}function m(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function n(a,b,c){return m(a,b,c)}function o(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=I(a[f]);return e}function p(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function q(a,b,c,d){d||(S("boolean"==typeof c,"missing or invalid endian"),S(void 0!==b&&null!==b,"missing offset"),S(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(f=a[b],e>b+1&&(f|=a[b+1]<<8)):(f=a[b]<<8,e>b+1&&(f|=a[b+1])),f}}function r(a,b,c,d){d||(S("boolean"==typeof c,"missing or invalid endian"),S(void 0!==b&&null!==b,"missing offset"),S(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(e>b+2&&(f=a[b+2]<<16),e>b+1&&(f|=a[b+1]<<8),f|=a[b],e>b+3&&(f+=a[b+3]<<24>>>0)):(e>b+1&&(f=a[b+1]<<16),e>b+2&&(f|=a[b+2]<<8),e>b+3&&(f|=a[b+3]),f+=a[b]<<24>>>0),f}}function s(a,b,c,d){d||(S("boolean"==typeof c,"missing or invalid endian"),S(void 0!==b&&null!==b,"missing offset"),S(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=q(a,b,c,!0),g=32768&f;return g?-1*(65535-f+1):f}}function t(a,b,c,d){d||(S("boolean"==typeof c,"missing or invalid endian"),S(void 0!==b&&null!==b,"missing offset"),S(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=r(a,b,c,!0),g=2147483648&f;return g?-1*(4294967295-f+1):f}}function u(a,b,c,d){return d||(S("boolean"==typeof c,"missing or invalid endian"),S(b+3<a.length,"Trying to read beyond buffer length")),U.read(a,b,c,23,4)}function v(a,b,c,d){return d||(S("boolean"==typeof c,"missing or invalid endian"),S(b+7<a.length,"Trying to read beyond buffer length")),U.read(a,b,c,52,8)}function w(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+1<a.length,"trying to write beyond buffer length"),P(b,65535));var f=a.length;if(!(c>=f))for(var g=0,h=Math.min(f-c,2);h>g;g++)a[c+g]=(b&255<<8*(d?g:1-g))>>>8*(d?g:1-g)}function x(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+3<a.length,"trying to write beyond buffer length"),P(b,4294967295));var f=a.length;if(!(c>=f))for(var g=0,h=Math.min(f-c,4);h>g;g++)a[c+g]=b>>>8*(d?g:3-g)&255}function y(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+1<a.length,"Trying to write beyond buffer length"),Q(b,32767,-32768));var f=a.length;c>=f||(b>=0?w(a,b,c,d,e):w(a,65535+b+1,c,d,e))}function z(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+3<a.length,"Trying to write beyond buffer length"),Q(b,2147483647,-2147483648));var f=a.length;c>=f||(b>=0?x(a,b,c,d,e):x(a,4294967295+b+1,c,d,e))}function A(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+3<a.length,"Trying to write beyond buffer length"),R(b,3.4028234663852886e38,-3.4028234663852886e38));var f=a.length;c>=f||U.write(a,b,c,d,23,4)}function B(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+7<a.length,"Trying to write beyond buffer length"),R(b,1.7976931348623157e308,-1.7976931348623157e308));var f=a.length;c>=f||U.write(a,b,c,d,52,8)}function C(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function D(a){return a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=V.get,a.set=V.set,a.write=V.write,a.toString=V.toString,a.toLocaleString=V.toString,a.toJSON=V.toJSON,a.copy=V.copy,a.slice=V.slice,a.readUInt8=V.readUInt8,a.readUInt16LE=V.readUInt16LE,a.readUInt16BE=V.readUInt16BE,a.readUInt32LE=V.readUInt32LE,a.readUInt32BE=V.readUInt32BE,a.readInt8=V.readInt8,a.readInt16LE=V.readInt16LE,a.readInt16BE=V.readInt16BE,a.readInt32LE=V.readInt32LE,a.readInt32BE=V.readInt32BE,a.readFloatLE=V.readFloatLE,a.readFloatBE=V.readFloatBE,a.readDoubleLE=V.readDoubleLE,a.readDoubleBE=V.readDoubleBE,a.writeUInt8=V.writeUInt8,a.writeUInt16LE=V.writeUInt16LE,a.writeUInt16BE=V.writeUInt16BE,a.writeUInt32LE=V.writeUInt32LE,a.writeUInt32BE=V.writeUInt32BE,a.writeInt8=V.writeInt8,a.writeInt16LE=V.writeInt16LE,a.writeInt16BE=V.writeInt16BE,a.writeInt32LE=V.writeInt32LE,a.writeInt32BE=V.writeInt32BE,a.writeFloatLE=V.writeFloatLE,a.writeFloatBE=V.writeFloatBE,a.writeDoubleLE=V.writeDoubleLE,a.writeDoubleBE=V.writeDoubleBE,a.fill=V.fill,a.inspect=V.inspect,a.toArrayBuffer=V.toArrayBuffer,a}function E(a,b,c){return"number"!=typeof a?c:(a=~~a,a>=b?b:a>=0?a:(a+=b,a>=0?a:0))}function F(a){return a=~~Math.ceil(+a),0>a?0:a}function G(a){return(Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)})(a)}function H(a){return G(a)||d.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function I(a){return 16>a?"0"+a.toString(16):a.toString(16)}function J(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);if(127>=d)b.push(a.charCodeAt(c));else{var e=c;d>=55296&&57343>=d&&c++;for(var f=encodeURIComponent(a.slice(e,c+1)).substr(1).split("%"),g=0;g<f.length;g++)b.push(parseInt(f[g],16))}}return b}function K(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function L(a){for(var b,c,d,e=[],f=0;f<a.length;f++)b=a.charCodeAt(f),c=b>>8,d=b%256,e.push(d),e.push(c);return e}function M(a){return T.toByteArray(a)}function N(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function O(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}function P(a,b){S("number"==typeof a,"cannot write a non-number as a number"),S(a>=0,"specified a negative value for writing an unsigned value"),S(b>=a,"value is larger than maximum value for type"),S(Math.floor(a)===a,"value has a fractional component")}function Q(a,b,c){S("number"==typeof a,"cannot write a non-number as a number"),S(b>=a,"value larger than maximum allowed value"),S(a>=c,"value smaller than minimum allowed value"),S(Math.floor(a)===a,"value has a fractional component")}function R(a,b,c){S("number"==typeof a,"cannot write a non-number as a number"),S(b>=a,"value larger than maximum allowed value"),S(a>=c,"value smaller than minimum allowed value")}function S(a,b){if(!a)throw new Error(b||"Failed assertion")}var T=a("base64-js"),U=a("ieee754");c.Buffer=d,c.SlowBuffer=d,c.INSPECT_MAX_BYTES=50,d.poolSize=8192,d._useTypedArrays=function(){if("function"!=typeof Uint8Array||"function"!=typeof ArrayBuffer)return!1;try{var a=new Uint8Array(0);return a.foo=function(){return 42},42===a.foo()&&"function"==typeof a.subarray}catch(b){return!1}}(),d.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.isBuffer=function(a){return!(null===a||void 0===a||!a._isBuffer)},d.byteLength=function(a,b){var c;switch(a+="",b||"utf8"){case"hex":c=a.length/2;break;case"utf8":case"utf-8":c=J(a).length;break;case"ascii":case"binary":case"raw":c=a.length;break;case"base64":c=M(a).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=2*a.length;break;default:throw new Error("Unknown encoding")}return c},d.concat=function(a,b){if(S(G(a),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===a.length)return new d(0);if(1===a.length)return a[0];var c;if("number"!=typeof b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var e=new d(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(e,f),f+=g.length}return e},d.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var k=d;d=b,b=c,c=k}b=Number(b)||0;var l=this.length-b;c?(c=Number(c),c>l&&(c=l)):c=l,d=String(d||"utf8").toLowerCase();var m;switch(d){case"hex":m=e(this,a,b,c);break;case"utf8":case"utf-8":m=f(this,a,b,c);break;case"ascii":m=g(this,a,b,c);break;case"binary":m=h(this,a,b,c);break;case"base64":m=i(this,a,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=j(this,a,b,c);break;default:throw new Error("Unknown encoding")}return m},d.prototype.toString=function(a,b,c){var d=this;if(a=String(a||"utf8").toLowerCase(),b=Number(b)||0,c=void 0!==c?Number(c):c=d.length,c===b)return"";var e;switch(a){case"hex":e=o(d,b,c);break;case"utf8":case"utf-8":e=l(d,b,c);break;case"ascii":e=m(d,b,c);break;case"binary":e=n(d,b,c);break;case"base64":e=k(d,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":e=p(d,b,c);break;default:throw new Error("Unknown encoding")}return e},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.copy=function(a,b,c,d){var e=this;if(c||(c=0),d||0===d||(d=this.length),b||(b=0),d!==c&&0!==a.length&&0!==e.length){S(d>=c,"sourceEnd < sourceStart"),S(b>=0&&b<a.length,"targetStart out of bounds"),S(c>=0&&c<e.length,"sourceStart out of bounds"),S(d>=0&&d<=e.length,"sourceEnd out of bounds"),d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);for(var f=0;d-c>f;f++)a[f+b]=this[f+c]}},d.prototype.slice=function(a,b){var c=this.length;if(a=E(a,c,0),b=E(b,c,c),d._useTypedArrays)return D(this.subarray(a,b));for(var e=b-a,f=new d(e,void 0,!0),g=0;e>g;g++)f[g]=this[g+a];return f},d.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},d.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},d.prototype.readUInt8=function(a,b){return b||(S(void 0!==a&&null!==a,"missing offset"),S(a<this.length,"Trying to read beyond buffer length")),a>=this.length?void 0:this[a]},d.prototype.readUInt16LE=function(a,b){return q(this,a,!0,b)},d.prototype.readUInt16BE=function(a,b){return q(this,a,!1,b)},d.prototype.readUInt32LE=function(a,b){return r(this,a,!0,b)},d.prototype.readUInt32BE=function(a,b){return r(this,a,!1,b)},d.prototype.readInt8=function(a,b){if(b||(S(void 0!==a&&null!==a,"missing offset"),S(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length)){var c=128&this[a];return c?-1*(255-this[a]+1):this[a]}},d.prototype.readInt16LE=function(a,b){return s(this,a,!0,b)},d.prototype.readInt16BE=function(a,b){return s(this,a,!1,b)},d.prototype.readInt32LE=function(a,b){return t(this,a,!0,b)},d.prototype.readInt32BE=function(a,b){return t(this,a,!1,b)},d.prototype.readFloatLE=function(a,b){return u(this,a,!0,b)},d.prototype.readFloatBE=function(a,b){return u(this,a,!1,b)},d.prototype.readDoubleLE=function(a,b){return v(this,a,!0,b)},d.prototype.readDoubleBE=function(a,b){return v(this,a,!1,b)},d.prototype.writeUInt8=function(a,b,c){c||(S(void 0!==a&&null!==a,"missing value"),S(void 0!==b&&null!==b,"missing offset"),S(b<this.length,"trying to write beyond buffer length"),P(a,255)),b>=this.length||(this[b]=a)},d.prototype.writeUInt16LE=function(a,b,c){w(this,a,b,!0,c)},d.prototype.writeUInt16BE=function(a,b,c){w(this,a,b,!1,c)},d.prototype.writeUInt32LE=function(a,b,c){x(this,a,b,!0,c)},d.prototype.writeUInt32BE=function(a,b,c){x(this,a,b,!1,c)},d.prototype.writeInt8=function(a,b,c){c||(S(void 0!==a&&null!==a,"missing value"),S(void 0!==b&&null!==b,"missing offset"),S(b<this.length,"Trying to write beyond buffer length"),Q(a,127,-128)),b>=this.length||(a>=0?this.writeUInt8(a,b,c):this.writeUInt8(255+a+1,b,c))},d.prototype.writeInt16LE=function(a,b,c){y(this,a,b,!0,c)},d.prototype.writeInt16BE=function(a,b,c){y(this,a,b,!1,c)},d.prototype.writeInt32LE=function(a,b,c){z(this,a,b,!0,c)},d.prototype.writeInt32BE=function(a,b,c){z(this,a,b,!1,c)},d.prototype.writeFloatLE=function(a,b,c){A(this,a,b,!0,c)},d.prototype.writeFloatBE=function(a,b,c){A(this,a,b,!1,c)},d.prototype.writeDoubleLE=function(a,b,c){B(this,a,b,!0,c)},d.prototype.writeDoubleBE=function(a,b,c){B(this,a,b,!1,c)},d.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),"string"==typeof a&&(a=a.charCodeAt(0)),S("number"==typeof a&&!isNaN(a),"value is not a number"),S(c>=b,"end < start"),c!==b&&0!==this.length){S(b>=0&&b<this.length,"start out of bounds"),S(c>=0&&c<=this.length,"end out of bounds");for(var d=b;c>d;d++)this[d]=a}},d.prototype.inspect=function(){for(var a=[],b=this.length,d=0;b>d;d++)if(a[d]=I(this[d]),d===c.INSPECT_MAX_BYTES){a[d+1]="...";break}return"<Buffer "+a.join(" ")+">"},d.prototype.toArrayBuffer=function(){if("function"==typeof Uint8Array){if(d._useTypedArrays)return new d(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var V=d.prototype},{"base64-js":7,ieee754:8}],7:[function(a,b){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(){"use strict";function a(a){var b=a.charCodeAt(0);return b===g?62:b===h?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function d(b){function c(a){j[l++]=a}var d,e,g,h,i,j;if(b.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=b.length;i="="===b.charAt(k-2)?2:"="===b.charAt(k-1)?1:0,j=new f(3*b.length/4-i),g=i>0?b.length-4:b.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=a(b.charAt(d))<<18|a(b.charAt(d+1))<<12|a(b.charAt(d+2))<<6|a(b.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=a(b.charAt(d))<<2|a(b.charAt(d+1))>>4,c(255&h)):1===i&&(h=a(b.charAt(d))<<10|a(b.charAt(d+1))<<4|a(b.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return c.charAt(a)}function d(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=d(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g=("0".charCodeAt(0),"+".charCodeAt(0)),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0);b.exports.toByteArray=d,b.exports.fromByteArray=e}()},{}],8:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],9:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length))throw b=arguments[1],b instanceof Error?b:TypeError('Uncaught, unspecified "error" event.');if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],10:[function(a,b){var c=b.exports={};c.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};if(b){var c=[];return window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),c.length>0)){var d=c.shift();d()}},!0),function(a){c.push(a),window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}(),c.title="browser",c.browser=!0,c.env={},c.argv=[],c.binding=function(){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(){throw new Error("process.chdir is not supported")}},{}],11:[function(a,b){function c(a){return this instanceof c?(g.call(this,a),h.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",d)):new c(a)}function d(){if(!this.allowHalfOpen&&!this._writableState.ended){var a=this;f(function(){a.end()})}}b.exports=c;var e=a("inherits"),f=a("process/browser.js").nextTick,g=a("./readable.js"),h=a("./writable.js");e(c,g),c.prototype.write=h.prototype.write,c.prototype.end=h.prototype.end,c.prototype._write=h.prototype._write},{"./readable.js":15,"./writable.js":17,inherits:19,"process/browser.js":13}],12:[function(a,b){function c(){d.call(this)}b.exports=c;var d=a("events").EventEmitter,e=a("inherits");e(c,d),c.Readable=a("./readable.js"),c.Writable=a("./writable.js"),c.Duplex=a("./duplex.js"),c.Transform=a("./transform.js"),c.PassThrough=a("./passthrough.js"),c.Stream=c,c.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&j.pause&&j.pause()
}function e(){j.readable&&j.resume&&j.resume()}function f(){k||(k=!0,a.end())}function g(){k||(k=!0,"function"==typeof a.destroy&&a.destroy())}function h(a){if(i(),0===d.listenerCount(this,"error"))throw a}function i(){j.removeListener("data",c),a.removeListener("drain",e),j.removeListener("end",f),j.removeListener("close",g),j.removeListener("error",h),a.removeListener("error",h),j.removeListener("end",i),j.removeListener("close",i),a.removeListener("close",i)}var j=this;j.on("data",c),a.on("drain",e),a._isStdio||b&&b.end===!1||(j.on("end",f),j.on("close",g));var k=!1;return j.on("error",h),a.on("error",h),j.on("end",i),j.on("close",i),a.on("close",i),a.emit("pipe",j),a}},{"./duplex.js":11,"./passthrough.js":14,"./readable.js":15,"./transform.js":16,"./writable.js":17,events:9,inherits:19}],13:[function(a,b){b.exports=a(10)},{}],14:[function(a,b){function c(a){return this instanceof c?void d.call(this,a):new c(a)}b.exports=c;var d=a("./transform.js"),e=a("inherits");e(c,d),c.prototype._transform=function(a,b,c){c(null,a)}},{"./transform.js":16,inherits:19}],15:[function(a,b){(function(c){function d(b){b=b||{};var c=b.highWaterMark;this.highWaterMark=c||0===c?c:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!b.objectMode,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(x||(x=a("string_decoder").StringDecoder),this.decoder=new x(b.encoding),this.encoding=b.encoding)}function e(a){return this instanceof e?(this._readableState=new d(a,this),this.readable=!0,void z.call(this)):new e(a)}function f(a,b,c,d,e){var f=j(b,c);if(f)a.emit("error",f);else if(null===c||void 0===c)b.reading=!1,b.ended||k(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var h=new Error("stream.push() after EOF");a.emit("error",h)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else!b.decoder||e||d||(c=b.decoder.write(c)),b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):(b.reading=!1,b.buffer.push(c)),b.needReadable&&l(a),n(a,b);else e||(b.reading=!1);return g(b)}function g(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function h(a){if(a>=D)a=D;else{a--;for(var b=1;32>b;b<<=1)a|=a>>b;a++}return a}function i(a,b){return 0===b.length&&b.ended?0:b.objectMode?0===a?0:1:isNaN(a)||null===a?b.flowing&&b.buffer.length?b.buffer[0].length:b.length:0>=a?0:(a>b.highWaterMark&&(b.highWaterMark=h(a)),a>b.length?b.ended?b.length:(b.needReadable=!0,0):a)}function j(a,b){var c=null;return A.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||c||(c=new TypeError("Invalid non-string/buffer chunk")),c}function k(a,b){if(b.decoder&&!b.ended){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,b.length>0?l(a):u(a)}function l(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(b.emittedReadable=!0,b.sync?B(function(){m(a)}):m(a))}function m(a){a.emit("readable")}function n(a,b){b.readingMore||(b.readingMore=!0,B(function(){o(a,b)}))}function o(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function p(a){return function(){var b=a._readableState;b.awaitDrain--,0===b.awaitDrain&&q(a)}}function q(a){function b(a){var b=a.write(c);!1===b&&d.awaitDrain++}var c,d=a._readableState;for(d.awaitDrain=0;d.pipesCount&&null!==(c=a.read());)if(1===d.pipesCount?b(d.pipes,0,null):v(d.pipes,b),a.emit("data",c),d.awaitDrain>0)return;return 0===d.pipesCount?(d.flowing=!1,void(y.listenerCount(a,"data")>0&&s(a))):void(d.ranOut=!0)}function r(){this._readableState.ranOut&&(this._readableState.ranOut=!1,q(this))}function s(a,b){var c=a._readableState;if(c.flowing)throw new Error("Cannot switch to old mode now.");var d=b||!1,e=!1;a.readable=!0,a.pipe=z.prototype.pipe,a.on=a.addListener=z.prototype.on,a.on("readable",function(){e=!0;for(var b;!d&&null!==(b=a.read());)a.emit("data",b);null===b&&(e=!1,a._readableState.needReadable=!0)}),a.pause=function(){d=!0,this.emit("pause")},a.resume=function(){d=!1,e?B(function(){a.emit("readable")}):this.read(0),this.emit("resume")},a.emit("readable")}function t(a,b){var c,d=b.buffer,e=b.length,f=!!b.decoder,g=!!b.objectMode;if(0===d.length)return null;if(0===e)c=null;else if(g)c=d.shift();else if(!a||a>=e)c=f?d.join(""):A.concat(d,e),d.length=0;else if(a<d[0].length){var h=d[0];c=h.slice(0,a),d[0]=h.slice(a)}else if(a===d[0].length)c=d.shift();else{c=f?"":new A(a);for(var i=0,j=0,k=d.length;k>j&&a>i;j++){var h=d[0],l=Math.min(a-i,h.length);f?c+=h.slice(0,l):h.copy(c,i,0,l),l<h.length?d[0]=h.slice(l):d.shift(),i+=l}}return c}function u(a){var b=a._readableState;if(b.length>0)throw new Error("endReadable called on non-empty stream");!b.endEmitted&&b.calledRead&&(b.ended=!0,B(function(){b.endEmitted||0!==b.length||(b.endEmitted=!0,a.readable=!1,a.emit("end"))}))}function v(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)}function w(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}b.exports=e,e.ReadableState=d;var x,y=a("events").EventEmitter,z=a("./index.js"),A=a("buffer").Buffer,B=a("process/browser.js").nextTick,C=a("inherits");C(e,z),e.prototype.push=function(a,b){var c=this._readableState;return"string"!=typeof a||c.objectMode||(b=b||c.defaultEncoding,b!==c.encoding&&(a=new A(a,b),b="")),f(this,c,a,b,!1)},e.prototype.unshift=function(a){var b=this._readableState;return f(this,b,a,"",!0)},e.prototype.setEncoding=function(b){x||(x=a("string_decoder").StringDecoder),this._readableState.decoder=new x(b),this._readableState.encoding=b};var D=8388608;e.prototype.read=function(a){var b=this._readableState;b.calledRead=!0;var c=a;if(("number"!=typeof a||a>0)&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return l(this),null;if(a=i(a,b),0===a&&b.ended)return 0===b.length&&u(this),null;var d=b.needReadable;b.length-a<=b.highWaterMark&&(d=!0),(b.ended||b.reading)&&(d=!1),d&&(b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1),d&&!b.reading&&(a=i(c,b));var e;return e=a>0?t(a,b):null,null===e&&(b.needReadable=!0,a=0),b.length-=a,0!==b.length||b.ended||(b.needReadable=!0),b.ended&&!b.endEmitted&&0===b.length&&u(this),e},e.prototype._read=function(){this.emit("error",new Error("not implemented"))},e.prototype.pipe=function(a,b){function d(a){a===k&&f()}function e(){a.end()}function f(){a.removeListener("close",h),a.removeListener("finish",i),a.removeListener("drain",o),a.removeListener("error",g),a.removeListener("unpipe",d),k.removeListener("end",e),k.removeListener("end",f),(!a._writableState||a._writableState.needDrain)&&o()}function g(b){j(),0===s&&0===y.listenerCount(a,"error")&&a.emit("error",b)}function h(){a.removeListener("finish",i),j()}function i(){a.removeListener("close",h),j()}function j(){k.unpipe(a)}var k=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=a;break;case 1:l.pipes=[l.pipes,a];break;default:l.pipes.push(a)}l.pipesCount+=1;var m=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,n=m?e:f;l.endEmitted?B(n):k.once("end",n),a.on("unpipe",d);var o=p(k);a.on("drain",o);var s=y.listenerCount(a,"error");return a.once("error",g),a.once("close",h),a.once("finish",i),a.emit("pipe",k),l.flowing||(this.on("readable",r),l.flowing=!0,B(function(){q(k)})),a},e.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,this.removeListener("readable",r),b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,this.removeListener("readable",r),b.flowing=!1;for(var e=0;d>e;e++)c[e].emit("unpipe",this);return this}var e=w(b.pipes,a);return-1===e?this:(b.pipes.splice(e,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},e.prototype.on=function(a,b){var c=z.prototype.on.call(this,a,b);if("data"!==a||this._readableState.flowing||s(this),"readable"===a&&this.readable){var d=this._readableState;d.readableListening||(d.readableListening=!0,d.emittedReadable=!1,d.needReadable=!0,d.reading?d.length&&l(this,d):this.read(0))}return c},e.prototype.addListener=e.prototype.on,e.prototype.resume=function(){s(this),this.read(0),this.emit("resume")},e.prototype.pause=function(){s(this,!0),this.emit("pause")},e.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(b.decoder&&(e=b.decoder.write(e)),e&&(b.objectMode||e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)"function"==typeof a[e]&&"undefined"==typeof this[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return v(f,function(b){a.on(b,function(a){return d.emit.apply(d,b,a)})}),d._read=function(){c&&(c=!1,a.resume())},d},e._fromList=t}).call(this,a("/Users/harth/repos/brain/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./index.js":12,"/Users/harth/repos/brain/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":10,buffer:6,events:9,inherits:19,"process/browser.js":13,string_decoder:18}],16:[function(a,b){function c(a,b){this.afterTransform=function(a,c){return d(b,a,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function d(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e&&e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function e(a){if(!(this instanceof e))return new e(a);g.call(this,a);var b=(this._transformState=new c(a,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(a){f(b,a)}):f(b)})}function f(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=(a._readableState,a._transformState);if(c.length)throw new Error("calling transform done when ws.length != 0");if(d.transforming)throw new Error("calling transform done when still transforming");return a.push(null)}b.exports=e;var g=a("./duplex.js"),h=a("inherits");h(e,g),e.prototype.push=function(a,b){return this._transformState.needTransform=!1,g.prototype.push.call(this,a,b)},e.prototype._transform=function(){throw new Error("not implemented")},e.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},e.prototype._read=function(){var a=this._transformState;a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0}},{"./duplex.js":11,inherits:19}],17:[function(a,b){function c(a,b,c){this.chunk=a,this.encoding=b,this.callback=c}function d(a,b){a=a||{};var c=a.highWaterMark;this.highWaterMark=c||0===c?c:16384,this.objectMode=!!a.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var d=a.decodeStrings===!1;this.decodeStrings=!d,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){m(b,a)},this.writecb=null,this.writelen=0,this.buffer=[]}function e(a){return this instanceof e||this instanceof w.Duplex?(this._writableState=new d(a,this),this.writable=!0,void w.call(this)):new e(a)}function f(a,b,c){var d=new Error("write after end");a.emit("error",d),x(function(){c(d)})}function g(a,b,c,d){var e=!0;if(!y.isBuffer(c)&&"string"!=typeof c&&null!==c&&void 0!==c&&!b.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");a.emit("error",f),x(function(){d(f)}),e=!1}return e}function h(a,b,c){return a.objectMode||a.decodeStrings===!1||"string"!=typeof b||(b=new y(b,c)),b}function i(a,b,d,e,f){d=h(b,d,e);var g=b.objectMode?1:d.length;b.length+=g;var i=b.length<b.highWaterMark;return b.needDrain=!i,b.writing?b.buffer.push(new c(d,e,f)):j(a,b,g,d,e,f),i}function j(a,b,c,d,e,f){b.writelen=c,b.writecb=f,b.writing=!0,b.sync=!0,a._write(d,e,b.onwrite),b.sync=!1}function k(a,b,c,d,e){c?x(function(){e(d)}):e(d),a.emit("error",d)}function l(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function m(a,b){var c=a._writableState,d=c.sync,e=c.writecb;if(l(c),b)k(a,c,d,b,e);else{var f=q(a,c);f||c.bufferProcessing||!c.buffer.length||p(a,c),d?x(function(){n(a,c,f,e)}):n(a,c,f,e)}}function n(a,b,c,d){c||o(a,b),d(),c&&r(a,b)}function o(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function p(a,b){b.bufferProcessing=!0;for(var c=0;c<b.buffer.length;c++){var d=b.buffer[c],e=d.chunk,f=d.encoding,g=d.callback,h=b.objectMode?1:e.length;if(j(a,b,h,e,f,g),b.writing){c++;break}}b.bufferProcessing=!1,c<b.buffer.length?b.buffer=b.buffer.slice(c):b.buffer.length=0}function q(a,b){return b.ending&&0===b.length&&!b.finished&&!b.writing}function r(a,b){var c=q(a,b);return c&&(b.finished=!0,a.emit("finish")),c}function s(a,b,c){b.ending=!0,r(a,b),c&&(b.finished?x(c):a.once("finish",c)),b.ended=!0}b.exports=e,e.WritableState=d;var t="undefined"!=typeof Uint8Array?function(a){return a instanceof Uint8Array}:function(a){return a&&a.constructor&&"Uint8Array"===a.constructor.name},u="undefined"!=typeof ArrayBuffer?function(a){return a instanceof ArrayBuffer}:function(a){return a&&a.constructor&&"ArrayBuffer"===a.constructor.name},v=a("inherits"),w=a("./index.js"),x=a("process/browser.js").nextTick,y=a("buffer").Buffer;v(e,w),e.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},e.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return"function"==typeof b&&(c=b,b=null),!y.isBuffer(a)&&t(a)&&(a=new y(a)),u(a)&&"undefined"!=typeof Uint8Array&&(a=new y(new Uint8Array(a))),y.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),"function"!=typeof c&&(c=function(){}),d.ended?f(this,d,c):g(this,d,a,c)&&(e=i(this,d,a,b,c)),e},e.prototype._write=function(a,b,c){c(new Error("not implemented"))},e.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),"undefined"!=typeof a&&null!==a&&this.write(a,b),d.ending||d.finished||s(this,d,c)}},{"./index.js":12,buffer:6,inherits:19,"process/browser.js":13}],18:[function(a,b,c){function d(a){if(a&&!h.isEncoding(a))throw new Error("Unknown encoding: "+a)}function e(a){return a.toString(this.encoding)}function f(a){var b=this.charReceived=a.length%2;return this.charLength=b?2:0,b}function g(a){var b=this.charReceived=a.length%3;return this.charLength=b?3:0,b}var h=a("buffer").Buffer,i=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),d(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=f;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=g;break;default:return void(this.write=e)}this.charBuffer=new h(6),this.charReceived=0,this.charLength=0};i.prototype.write=function(a){for(var b="",c=0;this.charLength;){var d=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,c,d),this.charReceived+=d-c,c=d,this.charReceived<this.charLength)return"";b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var e=b.charCodeAt(b.length-1);if(!(e>=55296&&56319>=e)){if(this.charReceived=this.charLength=0,d==a.length)return b;a=a.slice(d,a.length);break}this.charLength+=this.surrogateSize,b=""}var f=this.detectIncompleteChar(a),g=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-f,g),this.charReceived=f,g-=f),b+=a.toString(this.encoding,0,g);var g=b.length-1,e=b.charCodeAt(g);if(e>=55296&&56319>=e){var h=this.surrogateSize;return this.charLength+=h,this.charReceived+=h,this.charBuffer.copy(this.charBuffer,h,0,h),this.charBuffer.write(b.charAt(b.length-1),this.encoding),b.substring(0,g)}return b},i.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(2>=b&&c>>4==14){this.charLength=3;break}if(3>=b&&c>>3==30){this.charLength=4;break}}return b},i.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:6}],19:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],20:[function(a,b,c){(function(){var a=this,d=a._,e={},f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=f.concat,l=g.toString,m=g.hasOwnProperty,n=f.forEach,o=f.map,p=f.reduce,q=f.reduceRight,r=f.filter,s=f.every,t=f.some,u=f.indexOf,v=f.lastIndexOf,w=Array.isArray,x=Object.keys,y=h.bind,z=function(a){return a instanceof z?a:this instanceof z?void(this._wrapped=a):new z(a)};"undefined"!=typeof c?("undefined"!=typeof b&&b.exports&&(c=b.exports=z),c._=z):a._=z,z.VERSION="1.6.0";var A=z.each=z.forEach=function(a,b,c){if(null==a)return a;if(n&&a.forEach===n)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;f>d;d++)if(b.call(c,a[d],d,a)===e)return}else for(var g=z.keys(a),d=0,f=g.length;f>d;d++)if(b.call(c,a[g[d]],g[d],a)===e)return;return a};z.map=z.collect=function(a,b,c){var d=[];return null==a?d:o&&a.map===o?a.map(b,c):(A(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var B="Reduce of empty array with no initial value";z.reduce=z.foldl=z.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),p&&a.reduce===p)return d&&(b=z.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(A(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(B);return c},z.reduceRight=z.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),q&&a.reduceRight===q)return d&&(b=z.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=z.keys(a);f=g.length}if(A(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(B);return c},z.find=z.detect=function(a,b,c){var d;return C(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},z.filter=z.select=function(a,b,c){var d=[];return null==a?d:r&&a.filter===r?a.filter(b,c):(A(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},z.reject=function(a,b,c){return z.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},z.every=z.all=function(a,b,c){b||(b=z.identity);var d=!0;return null==a?d:s&&a.every===s?a.every(b,c):(A(a,function(a,f,g){return(d=d&&b.call(c,a,f,g))?void 0:e}),!!d)};var C=z.some=z.any=function(a,b,c){b||(b=z.identity);var d=!1;return null==a?d:t&&a.some===t?a.some(b,c):(A(a,function(a,f,g){return d||(d=b.call(c,a,f,g))?e:void 0}),!!d)};z.contains=z.include=function(a,b){return null==a?!1:u&&a.indexOf===u?-1!=a.indexOf(b):C(a,function(a){return a===b})},z.invoke=function(a,b){var c=j.call(arguments,2),d=z.isFunction(b);return z.map(a,function(a){return(d?b:a[b]).apply(a,c)})},z.pluck=function(a,b){return z.map(a,z.property(b))},z.where=function(a,b){return z.filter(a,z.matches(b))},z.findWhere=function(a,b){return z.find(a,z.matches(b))},z.max=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);var d=-1/0,e=-1/0;return A(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;h>e&&(d=a,e=h)}),d},z.min=function(a,b,c){if(!b&&z.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);var d=1/0,e=1/0;return A(a,function(a,f,g){var h=b?b.call(c,a,f,g):a;e>h&&(d=a,e=h)}),d},z.shuffle=function(a){var b,c=0,d=[];return A(a,function(a){b=z.random(c++),d[c-1]=d[b],d[b]=a}),d},z.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=z.values(a)),a[z.random(a.length-1)]):z.shuffle(a).slice(0,Math.max(0,b))};var D=function(a){return null==a?z.identity:z.isFunction(a)?a:z.property(a)};z.sortBy=function(a,b,c){return b=D(b),z.pluck(z.map(a,function(a,d,e){return{value:a,index:d,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var E=function(a){return function(b,c,d){var e={};return c=D(c),A(b,function(f,g){var h=c.call(d,f,g,b);a(e,h,f)}),e}};z.groupBy=E(function(a,b,c){z.has(a,b)?a[b].push(c):a[b]=[c]}),z.indexBy=E(function(a,b,c){a[b]=c}),z.countBy=E(function(a,b){z.has(a,b)?a[b]++:a[b]=1}),z.sortedIndex=function(a,b,c,d){c=D(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},z.toArray=function(a){return a?z.isArray(a)?j.call(a):a.length===+a.length?z.map(a,z.identity):z.values(a):[]},z.size=function(a){return null==a?0:a.length===+a.length?a.length:z.keys(a).length},z.first=z.head=z.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:j.call(a,0,b)},z.initial=function(a,b,c){return j.call(a,0,a.length-(null==b||c?1:b))},z.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:j.call(a,Math.max(a.length-b,0))},z.rest=z.tail=z.drop=function(a,b,c){return j.call(a,null==b||c?1:b)},z.compact=function(a){return z.filter(a,z.identity)};var F=function(a,b,c){return b&&z.every(a,z.isArray)?k.apply(c,a):(A(a,function(a){z.isArray(a)||z.isArguments(a)?b?i.apply(c,a):F(a,b,c):c.push(a)}),c)};z.flatten=function(a,b){return F(a,b,[])},z.without=function(a){return z.difference(a,j.call(arguments,1))},z.partition=function(a,b){var c=[],d=[];return A(a,function(a){(b(a)?c:d).push(a)}),[c,d]},z.uniq=z.unique=function(a,b,c,d){z.isFunction(b)&&(d=c,c=b,b=!1);var e=c?z.map(a,c,d):a,f=[],g=[];return A(e,function(c,d){(b?d&&g[g.length-1]===c:z.contains(g,c))||(g.push(c),f.push(a[d]))}),f},z.union=function(){return z.uniq(z.flatten(arguments,!0))},z.intersection=function(a){var b=j.call(arguments,1);return z.filter(z.uniq(a),function(a){return z.every(b,function(b){return z.contains(b,a)})})},z.difference=function(a){var b=k.apply(f,j.call(arguments,1));return z.filter(a,function(a){return!z.contains(b,a)})},z.zip=function(){for(var a=z.max(z.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=z.pluck(arguments,""+c);return b},z.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},z.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=z.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(u&&a.indexOf===u)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},z.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(v&&a.lastIndexOf===v)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},z.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var G=function(){};z.bind=function(a,b){var c,d;if(y&&a.bind===y)return y.apply(a,j.call(arguments,1));if(!z.isFunction(a))throw new TypeError;return c=j.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(j.call(arguments)));G.prototype=a.prototype;var e=new G;G.prototype=null;var f=a.apply(e,c.concat(j.call(arguments)));return Object(f)===f?f:e}},z.partial=function(a){var b=j.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===z&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},z.bindAll=function(a){var b=j.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return A(b,function(b){a[b]=z.bind(a[b],a)}),a},z.memoize=function(a,b){var c={};return b||(b=z.identity),function(){var d=b.apply(this,arguments);return z.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},z.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},z.defer=function(a){return z.delay.apply(z,[a,1].concat(j.call(arguments,1)))},z.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:z.now(),g=null,f=a.apply(d,e),d=e=null};return function(){var j=z.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),d=e=null):g||c.trailing===!1||(g=setTimeout(i,k)),f}},z.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=z.now()-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),f=e=null))};return function(){f=this,e=arguments,g=z.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},z.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},z.wrap=function(a,b){return z.partial(b,a)},z.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},z.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},z.keys=function(a){if(!z.isObject(a))return[];if(x)return x(a);var b=[];for(var c in a)z.has(a,c)&&b.push(c);return b},z.values=function(a){for(var b=z.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},z.pairs=function(a){for(var b=z.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},z.invert=function(a){for(var b={},c=z.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},z.functions=z.methods=function(a){var b=[];for(var c in a)z.isFunction(a[c])&&b.push(c);return b.sort()},z.extend=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},z.pick=function(a){var b={},c=k.apply(f,j.call(arguments,1));return A(c,function(c){c in a&&(b[c]=a[c])}),b},z.omit=function(a){var b={},c=k.apply(f,j.call(arguments,1));for(var d in a)z.contains(c,d)||(b[d]=a[d]);return b},z.defaults=function(a){return A(j.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},z.clone=function(a){return z.isObject(a)?z.isArray(a)?a.slice():z.extend({},a):a},z.tap=function(a,b){return b(a),a};var H=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof z&&(a=a._wrapped),b instanceof z&&(b=b._wrapped);var e=l.call(a);if(e!=l.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(z.isFunction(g)&&g instanceof g&&z.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,j=!0;if("[object Array]"==e){if(i=a.length,j=i==b.length)for(;i--&&(j=H(a[i],b[i],c,d)););}else{for(var k in a)if(z.has(a,k)&&(i++,!(j=z.has(b,k)&&H(a[k],b[k],c,d))))break;if(j){for(k in b)if(z.has(b,k)&&!i--)break;j=!i}}return c.pop(),d.pop(),j};z.isEqual=function(a,b){return H(a,b,[],[])},z.isEmpty=function(a){if(null==a)return!0;if(z.isArray(a)||z.isString(a))return 0===a.length;for(var b in a)if(z.has(a,b))return!1;return!0},z.isElement=function(a){return!(!a||1!==a.nodeType)},z.isArray=w||function(a){return"[object Array]"==l.call(a)},z.isObject=function(a){return a===Object(a)},A(["Arguments","Function","String","Number","Date","RegExp"],function(a){z["is"+a]=function(b){return l.call(b)=="[object "+a+"]"}}),z.isArguments(arguments)||(z.isArguments=function(a){return!(!a||!z.has(a,"callee"))}),"function"!=typeof/./&&(z.isFunction=function(a){return"function"==typeof a}),z.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},z.isNaN=function(a){return z.isNumber(a)&&a!=+a},z.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==l.call(a)},z.isNull=function(a){return null===a},z.isUndefined=function(a){return void 0===a},z.has=function(a,b){return m.call(a,b)},z.noConflict=function(){return a._=d,this},z.identity=function(a){return a},z.constant=function(a){return function(){return a}},z.property=function(a){return function(b){return b[a]}},z.matches=function(a){return function(b){if(b===a)return!0;for(var c in a)if(a[c]!==b[c])return!1;return!0}},z.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},z.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},z.now=Date.now||function(){return(new Date).getTime()};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=z.invert(I.escape);var J={escape:new RegExp("["+z.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+z.keys(I.unescape).join("|")+")","g")};z.each(["escape","unescape"],function(a){z[a]=function(b){return null==b?"":(""+b).replace(J[a],function(b){return I[a][b]})}}),z.result=function(a,b){if(null==a)return void 0;var c=a[b];return z.isFunction(c)?c.call(a):c},z.mixin=function(a){A(z.functions(a),function(b){var c=z[b]=a[b];z.prototype[b]=function(){var a=[this._wrapped];return i.apply(a,arguments),O.call(this,c.apply(z,a))}})};var K=0;z.uniqueId=function(a){var b=++K+"";return a?a+b:b},z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;z.template=function(a,b,c){var d;c=z.defaults({},c,z.templateSettings);var e=new RegExp([(c.escape||L).source,(c.interpolate||L).source,(c.evaluate||L).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(N,function(a){return"\\"+M[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,z);var i=function(a){return d.call(this,a,z)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},z.chain=function(a){return z(a).chain()};var O=function(a){return this._chain?z(a).chain():a};z.mixin(z),A(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];z.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],O.call(this,c)}}),A(["concat","join","slice"],function(a){var b=f[a];z.prototype[a]=function(){return O.call(this,b.apply(this._wrapped,arguments))}}),z.extend(z.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return z})}).call(this)},{}]},{},[1]);
'use strict';


$(document).ready(function ()
{

    var promise = new Promise((resolve, reject) =>
    {

        $.getJSON("./nerual_network/network.json", function (json)
        {
            resolve(json);
        });


    });

    promise
        .then(
            response =>
            {
                console.log(response);
                return response;
            }
        )
        .then(
            response =>
            {
                return runNetwork(response);
            }
        )
        .then(
            resultNetwork =>
            {
                console.log(resultNetwork);
                return resultNetwork;
            }
        )


});
/**
 * Created by Daniil on 10.10.2016.
 */
function runNetwork(network)
{
    var maxValueObj = network.maxValueObj;
    var net = new brain.NeuralNetwork().fromJSON(network);
    net.fromJSON(network);


    return getResultNetwork({time:7}, maxValueObj, net);

}

function getResultNetwork(input, maxValueObj, net)
{
    //BEGIN normalize input
    for (var key in input) {
        input[key] /= maxValueObj[key];
    }
    //END normalize input
    var resultNetwork = net.run(input);
    //BEGIN normalize output
    for (key in resultNetwork) {
        resultNetwork[key] *= maxValueObj[key];
    }
    //END normalize output
    return resultNetwork;

}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb3RzdHJhcC5taW4uanMiLCJicmFpbi0wLjYuMy5taW4uanMiLCJtYWluLmpzIiwiTmV0d29ya0NvbnZJTy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJidWlsZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxyXG4gKiBCb290c3RyYXAgdjMuMy43IChodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbSlcclxuICogQ29weXJpZ2h0IDIwMTEtMjAxNiBUd2l0dGVyLCBJbmMuXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxyXG4gKi9cclxuaWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGpRdWVyeSl0aHJvdyBuZXcgRXJyb3IoXCJCb290c3RyYXAncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGpRdWVyeVwiKTsrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGI9YS5mbi5qcXVlcnkuc3BsaXQoXCIgXCIpWzBdLnNwbGl0KFwiLlwiKTtpZihiWzBdPDImJmJbMV08OXx8MT09YlswXSYmOT09YlsxXSYmYlsyXTwxfHxiWzBdPjMpdGhyb3cgbmV3IEVycm9yKFwiQm9vdHN0cmFwJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnkgdmVyc2lvbiAxLjkuMSBvciBoaWdoZXIsIGJ1dCBsb3dlciB0aGFuIHZlcnNpb24gNFwiKX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJib290c3RyYXBcIiksYj17V2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdFRyYW5zaXRpb25FbmRcIixNb3pUcmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwiLE9UcmFuc2l0aW9uOlwib1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmRcIix0cmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwifTtmb3IodmFyIGMgaW4gYilpZih2b2lkIDAhPT1hLnN0eWxlW2NdKXJldHVybntlbmQ6YltjXX07cmV0dXJuITF9YS5mbi5lbXVsYXRlVHJhbnNpdGlvbkVuZD1mdW5jdGlvbihiKXt2YXIgYz0hMSxkPXRoaXM7YSh0aGlzKS5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixmdW5jdGlvbigpe2M9ITB9KTt2YXIgZT1mdW5jdGlvbigpe2N8fGEoZCkudHJpZ2dlcihhLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpfTtyZXR1cm4gc2V0VGltZW91dChlLGIpLHRoaXN9LGEoZnVuY3Rpb24oKXthLnN1cHBvcnQudHJhbnNpdGlvbj1iKCksYS5zdXBwb3J0LnRyYW5zaXRpb24mJihhLmV2ZW50LnNwZWNpYWwuYnNUcmFuc2l0aW9uRW5kPXtiaW5kVHlwZTphLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsZGVsZWdhdGVUeXBlOmEuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCxoYW5kbGU6ZnVuY3Rpb24oYil7aWYoYShiLnRhcmdldCkuaXModGhpcykpcmV0dXJuIGIuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZT1jLmRhdGEoXCJicy5hbGVydFwiKTtlfHxjLmRhdGEoXCJicy5hbGVydFwiLGU9bmV3IGQodGhpcykpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZlW2JdLmNhbGwoYyl9KX12YXIgYz0nW2RhdGEtZGlzbWlzcz1cImFsZXJ0XCJdJyxkPWZ1bmN0aW9uKGIpe2EoYikub24oXCJjbGlja1wiLGMsdGhpcy5jbG9zZSl9O2QuVkVSU0lPTj1cIjMuMy43XCIsZC5UUkFOU0lUSU9OX0RVUkFUSU9OPTE1MCxkLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihiKXtmdW5jdGlvbiBjKCl7Zy5kZXRhY2goKS50cmlnZ2VyKFwiY2xvc2VkLmJzLmFsZXJ0XCIpLnJlbW92ZSgpfXZhciBlPWEodGhpcyksZj1lLmF0dHIoXCJkYXRhLXRhcmdldFwiKTtmfHwoZj1lLmF0dHIoXCJocmVmXCIpLGY9ZiYmZi5yZXBsYWNlKC8uKig/PSNbXlxcc10qJCkvLFwiXCIpKTt2YXIgZz1hKFwiI1wiPT09Zj9bXTpmKTtiJiZiLnByZXZlbnREZWZhdWx0KCksZy5sZW5ndGh8fChnPWUuY2xvc2VzdChcIi5hbGVydFwiKSksZy50cmlnZ2VyKGI9YS5FdmVudChcImNsb3NlLmJzLmFsZXJ0XCIpKSxiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwoZy5yZW1vdmVDbGFzcyhcImluXCIpLGEuc3VwcG9ydC50cmFuc2l0aW9uJiZnLmhhc0NsYXNzKFwiZmFkZVwiKT9nLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGMpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGQuVFJBTlNJVElPTl9EVVJBVElPTik6YygpKX07dmFyIGU9YS5mbi5hbGVydDthLmZuLmFsZXJ0PWIsYS5mbi5hbGVydC5Db25zdHJ1Y3Rvcj1kLGEuZm4uYWxlcnQubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmFsZXJ0PWUsdGhpc30sYShkb2N1bWVudCkub24oXCJjbGljay5icy5hbGVydC5kYXRhLWFwaVwiLGMsZC5wcm90b3R5cGUuY2xvc2UpfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMuYnV0dG9uXCIpLGY9XCJvYmplY3RcIj09dHlwZW9mIGImJmI7ZXx8ZC5kYXRhKFwiYnMuYnV0dG9uXCIsZT1uZXcgYyh0aGlzLGYpKSxcInRvZ2dsZVwiPT1iP2UudG9nZ2xlKCk6YiYmZS5zZXRTdGF0ZShiKX0pfXZhciBjPWZ1bmN0aW9uKGIsZCl7dGhpcy4kZWxlbWVudD1hKGIpLHRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSxjLkRFRkFVTFRTLGQpLHRoaXMuaXNMb2FkaW5nPSExfTtjLlZFUlNJT049XCIzLjMuN1wiLGMuREVGQVVMVFM9e2xvYWRpbmdUZXh0OlwibG9hZGluZy4uLlwifSxjLnByb3RvdHlwZS5zZXRTdGF0ZT1mdW5jdGlvbihiKXt2YXIgYz1cImRpc2FibGVkXCIsZD10aGlzLiRlbGVtZW50LGU9ZC5pcyhcImlucHV0XCIpP1widmFsXCI6XCJodG1sXCIsZj1kLmRhdGEoKTtiKz1cIlRleHRcIixudWxsPT1mLnJlc2V0VGV4dCYmZC5kYXRhKFwicmVzZXRUZXh0XCIsZFtlXSgpKSxzZXRUaW1lb3V0KGEucHJveHkoZnVuY3Rpb24oKXtkW2VdKG51bGw9PWZbYl0/dGhpcy5vcHRpb25zW2JdOmZbYl0pLFwibG9hZGluZ1RleHRcIj09Yj8odGhpcy5pc0xvYWRpbmc9ITAsZC5hZGRDbGFzcyhjKS5hdHRyKGMsYykucHJvcChjLCEwKSk6dGhpcy5pc0xvYWRpbmcmJih0aGlzLmlzTG9hZGluZz0hMSxkLnJlbW92ZUNsYXNzKGMpLnJlbW92ZUF0dHIoYykucHJvcChjLCExKSl9LHRoaXMpLDApfSxjLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oKXt2YXIgYT0hMCxiPXRoaXMuJGVsZW1lbnQuY2xvc2VzdCgnW2RhdGEtdG9nZ2xlPVwiYnV0dG9uc1wiXScpO2lmKGIubGVuZ3RoKXt2YXIgYz10aGlzLiRlbGVtZW50LmZpbmQoXCJpbnB1dFwiKTtcInJhZGlvXCI9PWMucHJvcChcInR5cGVcIik/KGMucHJvcChcImNoZWNrZWRcIikmJihhPSExKSxiLmZpbmQoXCIuYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoXCJhY3RpdmVcIikpOlwiY2hlY2tib3hcIj09Yy5wcm9wKFwidHlwZVwiKSYmKGMucHJvcChcImNoZWNrZWRcIikhPT10aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiYWN0aXZlXCIpJiYoYT0hMSksdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKSksYy5wcm9wKFwiY2hlY2tlZFwiLHRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJhY3RpdmVcIikpLGEmJmMudHJpZ2dlcihcImNoYW5nZVwiKX1lbHNlIHRoaXMuJGVsZW1lbnQuYXR0cihcImFyaWEtcHJlc3NlZFwiLCF0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiYWN0aXZlXCIpKSx0aGlzLiRlbGVtZW50LnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpfTt2YXIgZD1hLmZuLmJ1dHRvbjthLmZuLmJ1dHRvbj1iLGEuZm4uYnV0dG9uLkNvbnN0cnVjdG9yPWMsYS5mbi5idXR0b24ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmJ1dHRvbj1kLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuYnV0dG9uLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZV49XCJidXR0b25cIl0nLGZ1bmN0aW9uKGMpe3ZhciBkPWEoYy50YXJnZXQpLmNsb3Nlc3QoXCIuYnRuXCIpO2IuY2FsbChkLFwidG9nZ2xlXCIpLGEoYy50YXJnZXQpLmlzKCdpbnB1dFt0eXBlPVwicmFkaW9cIl0sIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXScpfHwoYy5wcmV2ZW50RGVmYXVsdCgpLGQuaXMoXCJpbnB1dCxidXR0b25cIik/ZC50cmlnZ2VyKFwiZm9jdXNcIik6ZC5maW5kKFwiaW5wdXQ6dmlzaWJsZSxidXR0b246dmlzaWJsZVwiKS5maXJzdCgpLnRyaWdnZXIoXCJmb2N1c1wiKSl9KS5vbihcImZvY3VzLmJzLmJ1dHRvbi5kYXRhLWFwaSBibHVyLmJzLmJ1dHRvbi5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGVePVwiYnV0dG9uXCJdJyxmdW5jdGlvbihiKXthKGIudGFyZ2V0KS5jbG9zZXN0KFwiLmJ0blwiKS50b2dnbGVDbGFzcyhcImZvY3VzXCIsL15mb2N1cyhpbik/JC8udGVzdChiLnR5cGUpKX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMuY2Fyb3VzZWxcIiksZj1hLmV4dGVuZCh7fSxjLkRFRkFVTFRTLGQuZGF0YSgpLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKSxnPVwic3RyaW5nXCI9PXR5cGVvZiBiP2I6Zi5zbGlkZTtlfHxkLmRhdGEoXCJicy5jYXJvdXNlbFwiLGU9bmV3IGModGhpcyxmKSksXCJudW1iZXJcIj09dHlwZW9mIGI/ZS50byhiKTpnP2VbZ10oKTpmLmludGVydmFsJiZlLnBhdXNlKCkuY3ljbGUoKX0pfXZhciBjPWZ1bmN0aW9uKGIsYyl7dGhpcy4kZWxlbWVudD1hKGIpLHRoaXMuJGluZGljYXRvcnM9dGhpcy4kZWxlbWVudC5maW5kKFwiLmNhcm91c2VsLWluZGljYXRvcnNcIiksdGhpcy5vcHRpb25zPWMsdGhpcy5wYXVzZWQ9bnVsbCx0aGlzLnNsaWRpbmc9bnVsbCx0aGlzLmludGVydmFsPW51bGwsdGhpcy4kYWN0aXZlPW51bGwsdGhpcy4kaXRlbXM9bnVsbCx0aGlzLm9wdGlvbnMua2V5Ym9hcmQmJnRoaXMuJGVsZW1lbnQub24oXCJrZXlkb3duLmJzLmNhcm91c2VsXCIsYS5wcm94eSh0aGlzLmtleWRvd24sdGhpcykpLFwiaG92ZXJcIj09dGhpcy5vcHRpb25zLnBhdXNlJiYhKFwib250b3VjaHN0YXJ0XCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpJiZ0aGlzLiRlbGVtZW50Lm9uKFwibW91c2VlbnRlci5icy5jYXJvdXNlbFwiLGEucHJveHkodGhpcy5wYXVzZSx0aGlzKSkub24oXCJtb3VzZWxlYXZlLmJzLmNhcm91c2VsXCIsYS5wcm94eSh0aGlzLmN5Y2xlLHRoaXMpKX07Yy5WRVJTSU9OPVwiMy4zLjdcIixjLlRSQU5TSVRJT05fRFVSQVRJT049NjAwLGMuREVGQVVMVFM9e2ludGVydmFsOjVlMyxwYXVzZTpcImhvdmVyXCIsd3JhcDohMCxrZXlib2FyZDohMH0sYy5wcm90b3R5cGUua2V5ZG93bj1mdW5jdGlvbihhKXtpZighL2lucHV0fHRleHRhcmVhL2kudGVzdChhLnRhcmdldC50YWdOYW1lKSl7c3dpdGNoKGEud2hpY2gpe2Nhc2UgMzc6dGhpcy5wcmV2KCk7YnJlYWs7Y2FzZSAzOTp0aGlzLm5leHQoKTticmVhaztkZWZhdWx0OnJldHVybn1hLnByZXZlbnREZWZhdWx0KCl9fSxjLnByb3RvdHlwZS5jeWNsZT1mdW5jdGlvbihiKXtyZXR1cm4gYnx8KHRoaXMucGF1c2VkPSExKSx0aGlzLmludGVydmFsJiZjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpLHRoaXMub3B0aW9ucy5pbnRlcnZhbCYmIXRoaXMucGF1c2VkJiYodGhpcy5pbnRlcnZhbD1zZXRJbnRlcnZhbChhLnByb3h5KHRoaXMubmV4dCx0aGlzKSx0aGlzLm9wdGlvbnMuaW50ZXJ2YWwpKSx0aGlzfSxjLnByb3RvdHlwZS5nZXRJdGVtSW5kZXg9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuJGl0ZW1zPWEucGFyZW50KCkuY2hpbGRyZW4oXCIuaXRlbVwiKSx0aGlzLiRpdGVtcy5pbmRleChhfHx0aGlzLiRhY3RpdmUpfSxjLnByb3RvdHlwZS5nZXRJdGVtRm9yRGlyZWN0aW9uPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRJdGVtSW5kZXgoYiksZD1cInByZXZcIj09YSYmMD09PWN8fFwibmV4dFwiPT1hJiZjPT10aGlzLiRpdGVtcy5sZW5ndGgtMTtpZihkJiYhdGhpcy5vcHRpb25zLndyYXApcmV0dXJuIGI7dmFyIGU9XCJwcmV2XCI9PWE/LTE6MSxmPShjK2UpJXRoaXMuJGl0ZW1zLmxlbmd0aDtyZXR1cm4gdGhpcy4kaXRlbXMuZXEoZil9LGMucHJvdG90eXBlLnRvPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz10aGlzLmdldEl0ZW1JbmRleCh0aGlzLiRhY3RpdmU9dGhpcy4kZWxlbWVudC5maW5kKFwiLml0ZW0uYWN0aXZlXCIpKTtpZighKGE+dGhpcy4kaXRlbXMubGVuZ3RoLTF8fGE8MCkpcmV0dXJuIHRoaXMuc2xpZGluZz90aGlzLiRlbGVtZW50Lm9uZShcInNsaWQuYnMuY2Fyb3VzZWxcIixmdW5jdGlvbigpe2IudG8oYSl9KTpjPT1hP3RoaXMucGF1c2UoKS5jeWNsZSgpOnRoaXMuc2xpZGUoYT5jP1wibmV4dFwiOlwicHJldlwiLHRoaXMuJGl0ZW1zLmVxKGEpKX0sYy5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oYil7cmV0dXJuIGJ8fCh0aGlzLnBhdXNlZD0hMCksdGhpcy4kZWxlbWVudC5maW5kKFwiLm5leHQsIC5wcmV2XCIpLmxlbmd0aCYmYS5zdXBwb3J0LnRyYW5zaXRpb24mJih0aGlzLiRlbGVtZW50LnRyaWdnZXIoYS5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKSx0aGlzLmN5Y2xlKCEwKSksdGhpcy5pbnRlcnZhbD1jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpLHRoaXN9LGMucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZighdGhpcy5zbGlkaW5nKXJldHVybiB0aGlzLnNsaWRlKFwibmV4dFwiKX0sYy5wcm90b3R5cGUucHJldj1mdW5jdGlvbigpe2lmKCF0aGlzLnNsaWRpbmcpcmV0dXJuIHRoaXMuc2xpZGUoXCJwcmV2XCIpfSxjLnByb3RvdHlwZS5zbGlkZT1mdW5jdGlvbihiLGQpe3ZhciBlPXRoaXMuJGVsZW1lbnQuZmluZChcIi5pdGVtLmFjdGl2ZVwiKSxmPWR8fHRoaXMuZ2V0SXRlbUZvckRpcmVjdGlvbihiLGUpLGc9dGhpcy5pbnRlcnZhbCxoPVwibmV4dFwiPT1iP1wibGVmdFwiOlwicmlnaHRcIixpPXRoaXM7aWYoZi5oYXNDbGFzcyhcImFjdGl2ZVwiKSlyZXR1cm4gdGhpcy5zbGlkaW5nPSExO3ZhciBqPWZbMF0saz1hLkV2ZW50KFwic2xpZGUuYnMuY2Fyb3VzZWxcIix7cmVsYXRlZFRhcmdldDpqLGRpcmVjdGlvbjpofSk7aWYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGspLCFrLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtpZih0aGlzLnNsaWRpbmc9ITAsZyYmdGhpcy5wYXVzZSgpLHRoaXMuJGluZGljYXRvcnMubGVuZ3RoKXt0aGlzLiRpbmRpY2F0b3JzLmZpbmQoXCIuYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO3ZhciBsPWEodGhpcy4kaW5kaWNhdG9ycy5jaGlsZHJlbigpW3RoaXMuZ2V0SXRlbUluZGV4KGYpXSk7bCYmbC5hZGRDbGFzcyhcImFjdGl2ZVwiKX12YXIgbT1hLkV2ZW50KFwic2xpZC5icy5jYXJvdXNlbFwiLHtyZWxhdGVkVGFyZ2V0OmosZGlyZWN0aW9uOmh9KTtyZXR1cm4gYS5zdXBwb3J0LnRyYW5zaXRpb24mJnRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJzbGlkZVwiKT8oZi5hZGRDbGFzcyhiKSxmWzBdLm9mZnNldFdpZHRoLGUuYWRkQ2xhc3MoaCksZi5hZGRDbGFzcyhoKSxlLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGZ1bmN0aW9uKCl7Zi5yZW1vdmVDbGFzcyhbYixoXS5qb2luKFwiIFwiKSkuYWRkQ2xhc3MoXCJhY3RpdmVcIiksZS5yZW1vdmVDbGFzcyhbXCJhY3RpdmVcIixoXS5qb2luKFwiIFwiKSksaS5zbGlkaW5nPSExLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLiRlbGVtZW50LnRyaWdnZXIobSl9LDApfSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5UUkFOU0lUSU9OX0RVUkFUSU9OKSk6KGUucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksZi5hZGRDbGFzcyhcImFjdGl2ZVwiKSx0aGlzLnNsaWRpbmc9ITEsdGhpcy4kZWxlbWVudC50cmlnZ2VyKG0pKSxnJiZ0aGlzLmN5Y2xlKCksdGhpc319O3ZhciBkPWEuZm4uY2Fyb3VzZWw7YS5mbi5jYXJvdXNlbD1iLGEuZm4uY2Fyb3VzZWwuQ29uc3RydWN0b3I9YyxhLmZuLmNhcm91c2VsLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5jYXJvdXNlbD1kLHRoaXN9O3ZhciBlPWZ1bmN0aW9uKGMpe3ZhciBkLGU9YSh0aGlzKSxmPWEoZS5hdHRyKFwiZGF0YS10YXJnZXRcIil8fChkPWUuYXR0cihcImhyZWZcIikpJiZkLnJlcGxhY2UoLy4qKD89I1teXFxzXSskKS8sXCJcIikpO2lmKGYuaGFzQ2xhc3MoXCJjYXJvdXNlbFwiKSl7dmFyIGc9YS5leHRlbmQoe30sZi5kYXRhKCksZS5kYXRhKCkpLGg9ZS5hdHRyKFwiZGF0YS1zbGlkZS10b1wiKTtoJiYoZy5pbnRlcnZhbD0hMSksYi5jYWxsKGYsZyksaCYmZi5kYXRhKFwiYnMuY2Fyb3VzZWxcIikudG8oaCksYy5wcmV2ZW50RGVmYXVsdCgpfX07YShkb2N1bWVudCkub24oXCJjbGljay5icy5jYXJvdXNlbC5kYXRhLWFwaVwiLFwiW2RhdGEtc2xpZGVdXCIsZSkub24oXCJjbGljay5icy5jYXJvdXNlbC5kYXRhLWFwaVwiLFwiW2RhdGEtc2xpZGUtdG9dXCIsZSksYSh3aW5kb3cpLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7YSgnW2RhdGEtcmlkZT1cImNhcm91c2VsXCJdJykuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyk7Yi5jYWxsKGMsYy5kYXRhKCkpfSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXt2YXIgYyxkPWIuYXR0cihcImRhdGEtdGFyZ2V0XCIpfHwoYz1iLmF0dHIoXCJocmVmXCIpKSYmYy5yZXBsYWNlKC8uKig/PSNbXlxcc10rJCkvLFwiXCIpO3JldHVybiBhKGQpfWZ1bmN0aW9uIGMoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZT1jLmRhdGEoXCJicy5jb2xsYXBzZVwiKSxmPWEuZXh0ZW5kKHt9LGQuREVGQVVMVFMsYy5kYXRhKCksXCJvYmplY3RcIj09dHlwZW9mIGImJmIpOyFlJiZmLnRvZ2dsZSYmL3Nob3d8aGlkZS8udGVzdChiKSYmKGYudG9nZ2xlPSExKSxlfHxjLmRhdGEoXCJicy5jb2xsYXBzZVwiLGU9bmV3IGQodGhpcyxmKSksXCJzdHJpbmdcIj09dHlwZW9mIGImJmVbYl0oKX0pfXZhciBkPWZ1bmN0aW9uKGIsYyl7dGhpcy4kZWxlbWVudD1hKGIpLHRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSxkLkRFRkFVTFRTLGMpLHRoaXMuJHRyaWdnZXI9YSgnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl1baHJlZj1cIiMnK2IuaWQrJ1wiXSxbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXRhcmdldD1cIiMnK2IuaWQrJ1wiXScpLHRoaXMudHJhbnNpdGlvbmluZz1udWxsLHRoaXMub3B0aW9ucy5wYXJlbnQ/dGhpcy4kcGFyZW50PXRoaXMuZ2V0UGFyZW50KCk6dGhpcy5hZGRBcmlhQW5kQ29sbGFwc2VkQ2xhc3ModGhpcy4kZWxlbWVudCx0aGlzLiR0cmlnZ2VyKSx0aGlzLm9wdGlvbnMudG9nZ2xlJiZ0aGlzLnRvZ2dsZSgpfTtkLlZFUlNJT049XCIzLjMuN1wiLGQuVFJBTlNJVElPTl9EVVJBVElPTj0zNTAsZC5ERUZBVUxUUz17dG9nZ2xlOiEwfSxkLnByb3RvdHlwZS5kaW1lbnNpb249ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwid2lkdGhcIik7cmV0dXJuIGE/XCJ3aWR0aFwiOlwiaGVpZ2h0XCJ9LGQucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXtpZighdGhpcy50cmFuc2l0aW9uaW5nJiYhdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImluXCIpKXt2YXIgYixlPXRoaXMuJHBhcmVudCYmdGhpcy4kcGFyZW50LmNoaWxkcmVuKFwiLnBhbmVsXCIpLmNoaWxkcmVuKFwiLmluLCAuY29sbGFwc2luZ1wiKTtpZighKGUmJmUubGVuZ3RoJiYoYj1lLmRhdGEoXCJicy5jb2xsYXBzZVwiKSxiJiZiLnRyYW5zaXRpb25pbmcpKSl7dmFyIGY9YS5FdmVudChcInNob3cuYnMuY29sbGFwc2VcIik7aWYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGYpLCFmLmlzRGVmYXVsdFByZXZlbnRlZCgpKXtlJiZlLmxlbmd0aCYmKGMuY2FsbChlLFwiaGlkZVwiKSxifHxlLmRhdGEoXCJicy5jb2xsYXBzZVwiLG51bGwpKTt2YXIgZz10aGlzLmRpbWVuc2lvbigpO3RoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZVwiKS5hZGRDbGFzcyhcImNvbGxhcHNpbmdcIilbZ10oMCkuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMCksdGhpcy4kdHJpZ2dlci5yZW1vdmVDbGFzcyhcImNvbGxhcHNlZFwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKSx0aGlzLnRyYW5zaXRpb25pbmc9MTt2YXIgaD1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzaW5nXCIpLmFkZENsYXNzKFwiY29sbGFwc2UgaW5cIilbZ10oXCJcIiksdGhpcy50cmFuc2l0aW9uaW5nPTAsdGhpcy4kZWxlbWVudC50cmlnZ2VyKFwic2hvd24uYnMuY29sbGFwc2VcIil9O2lmKCFhLnN1cHBvcnQudHJhbnNpdGlvbilyZXR1cm4gaC5jYWxsKHRoaXMpO3ZhciBpPWEuY2FtZWxDYXNlKFtcInNjcm9sbFwiLGddLmpvaW4oXCItXCIpKTt0aGlzLiRlbGVtZW50Lm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGEucHJveHkoaCx0aGlzKSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoZC5UUkFOU0lUSU9OX0RVUkFUSU9OKVtnXSh0aGlzLiRlbGVtZW50WzBdW2ldKX19fX0sZC5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbigpe2lmKCF0aGlzLnRyYW5zaXRpb25pbmcmJnRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJpblwiKSl7dmFyIGI9YS5FdmVudChcImhpZGUuYnMuY29sbGFwc2VcIik7aWYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGIpLCFiLmlzRGVmYXVsdFByZXZlbnRlZCgpKXt2YXIgYz10aGlzLmRpbWVuc2lvbigpO3RoaXMuJGVsZW1lbnRbY10odGhpcy4kZWxlbWVudFtjXSgpKVswXS5vZmZzZXRIZWlnaHQsdGhpcy4kZWxlbWVudC5hZGRDbGFzcyhcImNvbGxhcHNpbmdcIikucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZSBpblwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKSx0aGlzLiR0cmlnZ2VyLmFkZENsYXNzKFwiY29sbGFwc2VkXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLHRoaXMudHJhbnNpdGlvbmluZz0xO3ZhciBlPWZ1bmN0aW9uKCl7dGhpcy50cmFuc2l0aW9uaW5nPTAsdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcImNvbGxhcHNpbmdcIikuYWRkQ2xhc3MoXCJjb2xsYXBzZVwiKS50cmlnZ2VyKFwiaGlkZGVuLmJzLmNvbGxhcHNlXCIpfTtyZXR1cm4gYS5zdXBwb3J0LnRyYW5zaXRpb24/dm9pZCB0aGlzLiRlbGVtZW50W2NdKDApLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGEucHJveHkoZSx0aGlzKSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoZC5UUkFOU0lUSU9OX0RVUkFUSU9OKTplLmNhbGwodGhpcyl9fX0sZC5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKCl7dGhpc1t0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiaW5cIik/XCJoaWRlXCI6XCJzaG93XCJdKCl9LGQucHJvdG90eXBlLmdldFBhcmVudD1mdW5jdGlvbigpe3JldHVybiBhKHRoaXMub3B0aW9ucy5wYXJlbnQpLmZpbmQoJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdW2RhdGEtcGFyZW50PVwiJyt0aGlzLm9wdGlvbnMucGFyZW50KydcIl0nKS5lYWNoKGEucHJveHkoZnVuY3Rpb24oYyxkKXt2YXIgZT1hKGQpO3RoaXMuYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKGIoZSksZSl9LHRoaXMpKS5lbmQoKX0sZC5wcm90b3R5cGUuYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5oYXNDbGFzcyhcImluXCIpO2EuYXR0cihcImFyaWEtZXhwYW5kZWRcIixjKSxiLnRvZ2dsZUNsYXNzKFwiY29sbGFwc2VkXCIsIWMpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsYyl9O3ZhciBlPWEuZm4uY29sbGFwc2U7YS5mbi5jb2xsYXBzZT1jLGEuZm4uY29sbGFwc2UuQ29uc3RydWN0b3I9ZCxhLmZuLmNvbGxhcHNlLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5jb2xsYXBzZT1lLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuY29sbGFwc2UuZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl0nLGZ1bmN0aW9uKGQpe3ZhciBlPWEodGhpcyk7ZS5hdHRyKFwiZGF0YS10YXJnZXRcIil8fGQucHJldmVudERlZmF1bHQoKTt2YXIgZj1iKGUpLGc9Zi5kYXRhKFwiYnMuY29sbGFwc2VcIiksaD1nP1widG9nZ2xlXCI6ZS5kYXRhKCk7Yy5jYWxsKGYsaCl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXt2YXIgYz1iLmF0dHIoXCJkYXRhLXRhcmdldFwiKTtjfHwoYz1iLmF0dHIoXCJocmVmXCIpLGM9YyYmLyNbQS1aYS16XS8udGVzdChjKSYmYy5yZXBsYWNlKC8uKig/PSNbXlxcc10qJCkvLFwiXCIpKTt2YXIgZD1jJiZhKGMpO3JldHVybiBkJiZkLmxlbmd0aD9kOmIucGFyZW50KCl9ZnVuY3Rpb24gYyhjKXtjJiYzPT09Yy53aGljaHx8KGEoZSkucmVtb3ZlKCksYShmKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWIoZCksZj17cmVsYXRlZFRhcmdldDp0aGlzfTtlLmhhc0NsYXNzKFwib3BlblwiKSYmKGMmJlwiY2xpY2tcIj09Yy50eXBlJiYvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGMudGFyZ2V0LnRhZ05hbWUpJiZhLmNvbnRhaW5zKGVbMF0sYy50YXJnZXQpfHwoZS50cmlnZ2VyKGM9YS5FdmVudChcImhpZGUuYnMuZHJvcGRvd25cIixmKSksYy5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KGQuYXR0cihcImFyaWEtZXhwYW5kZWRcIixcImZhbHNlXCIpLGUucmVtb3ZlQ2xhc3MoXCJvcGVuXCIpLnRyaWdnZXIoYS5FdmVudChcImhpZGRlbi5icy5kcm9wZG93blwiLGYpKSkpKX0pKX1mdW5jdGlvbiBkKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGQ9Yy5kYXRhKFwiYnMuZHJvcGRvd25cIik7ZHx8Yy5kYXRhKFwiYnMuZHJvcGRvd25cIixkPW5ldyBnKHRoaXMpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZFtiXS5jYWxsKGMpfSl9dmFyIGU9XCIuZHJvcGRvd24tYmFja2Ryb3BcIixmPSdbZGF0YS10b2dnbGU9XCJkcm9wZG93blwiXScsZz1mdW5jdGlvbihiKXthKGIpLm9uKFwiY2xpY2suYnMuZHJvcGRvd25cIix0aGlzLnRvZ2dsZSl9O2cuVkVSU0lPTj1cIjMuMy43XCIsZy5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGQpe3ZhciBlPWEodGhpcyk7aWYoIWUuaXMoXCIuZGlzYWJsZWQsIDpkaXNhYmxlZFwiKSl7dmFyIGY9YihlKSxnPWYuaGFzQ2xhc3MoXCJvcGVuXCIpO2lmKGMoKSwhZyl7XCJvbnRvdWNoc3RhcnRcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmIWYuY2xvc2VzdChcIi5uYXZiYXItbmF2XCIpLmxlbmd0aCYmYShkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKS5hZGRDbGFzcyhcImRyb3Bkb3duLWJhY2tkcm9wXCIpLmluc2VydEFmdGVyKGEodGhpcykpLm9uKFwiY2xpY2tcIixjKTt2YXIgaD17cmVsYXRlZFRhcmdldDp0aGlzfTtpZihmLnRyaWdnZXIoZD1hLkV2ZW50KFwic2hvdy5icy5kcm9wZG93blwiLGgpKSxkLmlzRGVmYXVsdFByZXZlbnRlZCgpKXJldHVybjtlLnRyaWdnZXIoXCJmb2N1c1wiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLFwidHJ1ZVwiKSxmLnRvZ2dsZUNsYXNzKFwib3BlblwiKS50cmlnZ2VyKGEuRXZlbnQoXCJzaG93bi5icy5kcm9wZG93blwiLGgpKX1yZXR1cm4hMX19LGcucHJvdG90eXBlLmtleWRvd249ZnVuY3Rpb24oYyl7aWYoLygzOHw0MHwyN3wzMikvLnRlc3QoYy53aGljaCkmJiEvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGMudGFyZ2V0LnRhZ05hbWUpKXt2YXIgZD1hKHRoaXMpO2lmKGMucHJldmVudERlZmF1bHQoKSxjLnN0b3BQcm9wYWdhdGlvbigpLCFkLmlzKFwiLmRpc2FibGVkLCA6ZGlzYWJsZWRcIikpe3ZhciBlPWIoZCksZz1lLmhhc0NsYXNzKFwib3BlblwiKTtpZighZyYmMjchPWMud2hpY2h8fGcmJjI3PT1jLndoaWNoKXJldHVybiAyNz09Yy53aGljaCYmZS5maW5kKGYpLnRyaWdnZXIoXCJmb2N1c1wiKSxkLnRyaWdnZXIoXCJjbGlja1wiKTt2YXIgaD1cIiBsaTpub3QoLmRpc2FibGVkKTp2aXNpYmxlIGFcIixpPWUuZmluZChcIi5kcm9wZG93bi1tZW51XCIraCk7aWYoaS5sZW5ndGgpe3ZhciBqPWkuaW5kZXgoYy50YXJnZXQpOzM4PT1jLndoaWNoJiZqPjAmJmotLSw0MD09Yy53aGljaCYmajxpLmxlbmd0aC0xJiZqKyssfmp8fChqPTApLGkuZXEoaikudHJpZ2dlcihcImZvY3VzXCIpfX19fTt2YXIgaD1hLmZuLmRyb3Bkb3duO2EuZm4uZHJvcGRvd249ZCxhLmZuLmRyb3Bkb3duLkNvbnN0cnVjdG9yPWcsYS5mbi5kcm9wZG93bi5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uZHJvcGRvd249aCx0aGlzfSxhKGRvY3VtZW50KS5vbihcImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsYykub24oXCJjbGljay5icy5kcm9wZG93bi5kYXRhLWFwaVwiLFwiLmRyb3Bkb3duIGZvcm1cIixmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpfSkub24oXCJjbGljay5icy5kcm9wZG93bi5kYXRhLWFwaVwiLGYsZy5wcm90b3R5cGUudG9nZ2xlKS5vbihcImtleWRvd24uYnMuZHJvcGRvd24uZGF0YS1hcGlcIixmLGcucHJvdG90eXBlLmtleWRvd24pLm9uKFwia2V5ZG93bi5icy5kcm9wZG93bi5kYXRhLWFwaVwiLFwiLmRyb3Bkb3duLW1lbnVcIixnLnByb3RvdHlwZS5rZXlkb3duKX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiLGQpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZT1hKHRoaXMpLGY9ZS5kYXRhKFwiYnMubW9kYWxcIiksZz1hLmV4dGVuZCh7fSxjLkRFRkFVTFRTLGUuZGF0YSgpLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKTtmfHxlLmRhdGEoXCJicy5tb2RhbFwiLGY9bmV3IGModGhpcyxnKSksXCJzdHJpbmdcIj09dHlwZW9mIGI/ZltiXShkKTpnLnNob3cmJmYuc2hvdyhkKX0pfXZhciBjPWZ1bmN0aW9uKGIsYyl7dGhpcy5vcHRpb25zPWMsdGhpcy4kYm9keT1hKGRvY3VtZW50LmJvZHkpLHRoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLiRkaWFsb2c9dGhpcy4kZWxlbWVudC5maW5kKFwiLm1vZGFsLWRpYWxvZ1wiKSx0aGlzLiRiYWNrZHJvcD1udWxsLHRoaXMuaXNTaG93bj1udWxsLHRoaXMub3JpZ2luYWxCb2R5UGFkPW51bGwsdGhpcy5zY3JvbGxiYXJXaWR0aD0wLHRoaXMuaWdub3JlQmFja2Ryb3BDbGljaz0hMSx0aGlzLm9wdGlvbnMucmVtb3RlJiZ0aGlzLiRlbGVtZW50LmZpbmQoXCIubW9kYWwtY29udGVudFwiKS5sb2FkKHRoaXMub3B0aW9ucy5yZW1vdGUsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQudHJpZ2dlcihcImxvYWRlZC5icy5tb2RhbFwiKX0sdGhpcykpfTtjLlZFUlNJT049XCIzLjMuN1wiLGMuVFJBTlNJVElPTl9EVVJBVElPTj0zMDAsYy5CQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OPTE1MCxjLkRFRkFVTFRTPXtiYWNrZHJvcDohMCxrZXlib2FyZDohMCxzaG93OiEwfSxjLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXNTaG93bj90aGlzLmhpZGUoKTp0aGlzLnNob3coYSl9LGMucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcyxlPWEuRXZlbnQoXCJzaG93LmJzLm1vZGFsXCIse3JlbGF0ZWRUYXJnZXQ6Yn0pO3RoaXMuJGVsZW1lbnQudHJpZ2dlcihlKSx0aGlzLmlzU2hvd258fGUuaXNEZWZhdWx0UHJldmVudGVkKCl8fCh0aGlzLmlzU2hvd249ITAsdGhpcy5jaGVja1Njcm9sbGJhcigpLHRoaXMuc2V0U2Nyb2xsYmFyKCksdGhpcy4kYm9keS5hZGRDbGFzcyhcIm1vZGFsLW9wZW5cIiksdGhpcy5lc2NhcGUoKSx0aGlzLnJlc2l6ZSgpLHRoaXMuJGVsZW1lbnQub24oXCJjbGljay5kaXNtaXNzLmJzLm1vZGFsXCIsJ1tkYXRhLWRpc21pc3M9XCJtb2RhbFwiXScsYS5wcm94eSh0aGlzLmhpZGUsdGhpcykpLHRoaXMuJGRpYWxvZy5vbihcIm1vdXNlZG93bi5kaXNtaXNzLmJzLm1vZGFsXCIsZnVuY3Rpb24oKXtkLiRlbGVtZW50Lm9uZShcIm1vdXNldXAuZGlzbWlzcy5icy5tb2RhbFwiLGZ1bmN0aW9uKGIpe2EoYi50YXJnZXQpLmlzKGQuJGVsZW1lbnQpJiYoZC5pZ25vcmVCYWNrZHJvcENsaWNrPSEwKX0pfSksdGhpcy5iYWNrZHJvcChmdW5jdGlvbigpe3ZhciBlPWEuc3VwcG9ydC50cmFuc2l0aW9uJiZkLiRlbGVtZW50Lmhhc0NsYXNzKFwiZmFkZVwiKTtkLiRlbGVtZW50LnBhcmVudCgpLmxlbmd0aHx8ZC4kZWxlbWVudC5hcHBlbmRUbyhkLiRib2R5KSxkLiRlbGVtZW50LnNob3coKS5zY3JvbGxUb3AoMCksZC5hZGp1c3REaWFsb2coKSxlJiZkLiRlbGVtZW50WzBdLm9mZnNldFdpZHRoLGQuJGVsZW1lbnQuYWRkQ2xhc3MoXCJpblwiKSxkLmVuZm9yY2VGb2N1cygpO3ZhciBmPWEuRXZlbnQoXCJzaG93bi5icy5tb2RhbFwiLHtyZWxhdGVkVGFyZ2V0OmJ9KTtlP2QuJGRpYWxvZy5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixmdW5jdGlvbigpe2QuJGVsZW1lbnQudHJpZ2dlcihcImZvY3VzXCIpLnRyaWdnZXIoZil9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLlRSQU5TSVRJT05fRFVSQVRJT04pOmQuJGVsZW1lbnQudHJpZ2dlcihcImZvY3VzXCIpLnRyaWdnZXIoZil9KSl9LGMucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oYil7YiYmYi5wcmV2ZW50RGVmYXVsdCgpLGI9YS5FdmVudChcImhpZGUuYnMubW9kYWxcIiksdGhpcy4kZWxlbWVudC50cmlnZ2VyKGIpLHRoaXMuaXNTaG93biYmIWIuaXNEZWZhdWx0UHJldmVudGVkKCkmJih0aGlzLmlzU2hvd249ITEsdGhpcy5lc2NhcGUoKSx0aGlzLnJlc2l6ZSgpLGEoZG9jdW1lbnQpLm9mZihcImZvY3VzaW4uYnMubW9kYWxcIiksdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcImluXCIpLm9mZihcImNsaWNrLmRpc21pc3MuYnMubW9kYWxcIikub2ZmKFwibW91c2V1cC5kaXNtaXNzLmJzLm1vZGFsXCIpLHRoaXMuJGRpYWxvZy5vZmYoXCJtb3VzZWRvd24uZGlzbWlzcy5icy5tb2RhbFwiKSxhLnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImZhZGVcIik/dGhpcy4kZWxlbWVudC5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixhLnByb3h5KHRoaXMuaGlkZU1vZGFsLHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLlRSQU5TSVRJT05fRFVSQVRJT04pOnRoaXMuaGlkZU1vZGFsKCkpfSxjLnByb3RvdHlwZS5lbmZvcmNlRm9jdXM9ZnVuY3Rpb24oKXthKGRvY3VtZW50KS5vZmYoXCJmb2N1c2luLmJzLm1vZGFsXCIpLm9uKFwiZm9jdXNpbi5icy5tb2RhbFwiLGEucHJveHkoZnVuY3Rpb24oYSl7ZG9jdW1lbnQ9PT1hLnRhcmdldHx8dGhpcy4kZWxlbWVudFswXT09PWEudGFyZ2V0fHx0aGlzLiRlbGVtZW50LmhhcyhhLnRhcmdldCkubGVuZ3RofHx0aGlzLiRlbGVtZW50LnRyaWdnZXIoXCJmb2N1c1wiKX0sdGhpcykpfSxjLnByb3RvdHlwZS5lc2NhcGU9ZnVuY3Rpb24oKXt0aGlzLmlzU2hvd24mJnRoaXMub3B0aW9ucy5rZXlib2FyZD90aGlzLiRlbGVtZW50Lm9uKFwia2V5ZG93bi5kaXNtaXNzLmJzLm1vZGFsXCIsYS5wcm94eShmdW5jdGlvbihhKXsyNz09YS53aGljaCYmdGhpcy5oaWRlKCl9LHRoaXMpKTp0aGlzLmlzU2hvd258fHRoaXMuJGVsZW1lbnQub2ZmKFwia2V5ZG93bi5kaXNtaXNzLmJzLm1vZGFsXCIpfSxjLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oKXt0aGlzLmlzU2hvd24/YSh3aW5kb3cpLm9uKFwicmVzaXplLmJzLm1vZGFsXCIsYS5wcm94eSh0aGlzLmhhbmRsZVVwZGF0ZSx0aGlzKSk6YSh3aW5kb3cpLm9mZihcInJlc2l6ZS5icy5tb2RhbFwiKX0sYy5wcm90b3R5cGUuaGlkZU1vZGFsPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLiRlbGVtZW50LmhpZGUoKSx0aGlzLmJhY2tkcm9wKGZ1bmN0aW9uKCl7YS4kYm9keS5yZW1vdmVDbGFzcyhcIm1vZGFsLW9wZW5cIiksYS5yZXNldEFkanVzdG1lbnRzKCksYS5yZXNldFNjcm9sbGJhcigpLGEuJGVsZW1lbnQudHJpZ2dlcihcImhpZGRlbi5icy5tb2RhbFwiKX0pfSxjLnByb3RvdHlwZS5yZW1vdmVCYWNrZHJvcD1mdW5jdGlvbigpe3RoaXMuJGJhY2tkcm9wJiZ0aGlzLiRiYWNrZHJvcC5yZW1vdmUoKSx0aGlzLiRiYWNrZHJvcD1udWxsfSxjLnByb3RvdHlwZS5iYWNrZHJvcD1mdW5jdGlvbihiKXt2YXIgZD10aGlzLGU9dGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImZhZGVcIik/XCJmYWRlXCI6XCJcIjtpZih0aGlzLmlzU2hvd24mJnRoaXMub3B0aW9ucy5iYWNrZHJvcCl7dmFyIGY9YS5zdXBwb3J0LnRyYW5zaXRpb24mJmU7aWYodGhpcy4kYmFja2Ryb3A9YShkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKS5hZGRDbGFzcyhcIm1vZGFsLWJhY2tkcm9wIFwiK2UpLmFwcGVuZFRvKHRoaXMuJGJvZHkpLHRoaXMuJGVsZW1lbnQub24oXCJjbGljay5kaXNtaXNzLmJzLm1vZGFsXCIsYS5wcm94eShmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pZ25vcmVCYWNrZHJvcENsaWNrP3ZvaWQodGhpcy5pZ25vcmVCYWNrZHJvcENsaWNrPSExKTp2b2lkKGEudGFyZ2V0PT09YS5jdXJyZW50VGFyZ2V0JiYoXCJzdGF0aWNcIj09dGhpcy5vcHRpb25zLmJhY2tkcm9wP3RoaXMuJGVsZW1lbnRbMF0uZm9jdXMoKTp0aGlzLmhpZGUoKSkpfSx0aGlzKSksZiYmdGhpcy4kYmFja2Ryb3BbMF0ub2Zmc2V0V2lkdGgsdGhpcy4kYmFja2Ryb3AuYWRkQ2xhc3MoXCJpblwiKSwhYilyZXR1cm47Zj90aGlzLiRiYWNrZHJvcC5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixiKS5lbXVsYXRlVHJhbnNpdGlvbkVuZChjLkJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04pOmIoKX1lbHNlIGlmKCF0aGlzLmlzU2hvd24mJnRoaXMuJGJhY2tkcm9wKXt0aGlzLiRiYWNrZHJvcC5yZW1vdmVDbGFzcyhcImluXCIpO3ZhciBnPWZ1bmN0aW9uKCl7ZC5yZW1vdmVCYWNrZHJvcCgpLGImJmIoKX07YS5zdXBwb3J0LnRyYW5zaXRpb24mJnRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJmYWRlXCIpP3RoaXMuJGJhY2tkcm9wLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGcpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTik6ZygpfWVsc2UgYiYmYigpfSxjLnByb3RvdHlwZS5oYW5kbGVVcGRhdGU9ZnVuY3Rpb24oKXt0aGlzLmFkanVzdERpYWxvZygpfSxjLnByb3RvdHlwZS5hZGp1c3REaWFsb2c9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50WzBdLnNjcm9sbEhlaWdodD5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0O3RoaXMuJGVsZW1lbnQuY3NzKHtwYWRkaW5nTGVmdDohdGhpcy5ib2R5SXNPdmVyZmxvd2luZyYmYT90aGlzLnNjcm9sbGJhcldpZHRoOlwiXCIscGFkZGluZ1JpZ2h0OnRoaXMuYm9keUlzT3ZlcmZsb3dpbmcmJiFhP3RoaXMuc2Nyb2xsYmFyV2lkdGg6XCJcIn0pfSxjLnByb3RvdHlwZS5yZXNldEFkanVzdG1lbnRzPWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5jc3Moe3BhZGRpbmdMZWZ0OlwiXCIscGFkZGluZ1JpZ2h0OlwiXCJ9KX0sYy5wcm90b3R5cGUuY2hlY2tTY3JvbGxiYXI9ZnVuY3Rpb24oKXt2YXIgYT13aW5kb3cuaW5uZXJXaWR0aDtpZighYSl7dmFyIGI9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2E9Yi5yaWdodC1NYXRoLmFicyhiLmxlZnQpfXRoaXMuYm9keUlzT3ZlcmZsb3dpbmc9ZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDxhLHRoaXMuc2Nyb2xsYmFyV2lkdGg9dGhpcy5tZWFzdXJlU2Nyb2xsYmFyKCl9LGMucHJvdG90eXBlLnNldFNjcm9sbGJhcj1mdW5jdGlvbigpe3ZhciBhPXBhcnNlSW50KHRoaXMuJGJvZHkuY3NzKFwicGFkZGluZy1yaWdodFwiKXx8MCwxMCk7dGhpcy5vcmlnaW5hbEJvZHlQYWQ9ZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHR8fFwiXCIsdGhpcy5ib2R5SXNPdmVyZmxvd2luZyYmdGhpcy4kYm9keS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIsYSt0aGlzLnNjcm9sbGJhcldpZHRoKX0sYy5wcm90b3R5cGUucmVzZXRTY3JvbGxiYXI9ZnVuY3Rpb24oKXt0aGlzLiRib2R5LmNzcyhcInBhZGRpbmctcmlnaHRcIix0aGlzLm9yaWdpbmFsQm9keVBhZCl9LGMucHJvdG90eXBlLm1lYXN1cmVTY3JvbGxiYXI9ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2EuY2xhc3NOYW1lPVwibW9kYWwtc2Nyb2xsYmFyLW1lYXN1cmVcIix0aGlzLiRib2R5LmFwcGVuZChhKTt2YXIgYj1hLm9mZnNldFdpZHRoLWEuY2xpZW50V2lkdGg7cmV0dXJuIHRoaXMuJGJvZHlbMF0ucmVtb3ZlQ2hpbGQoYSksYn07dmFyIGQ9YS5mbi5tb2RhbDthLmZuLm1vZGFsPWIsYS5mbi5tb2RhbC5Db25zdHJ1Y3Rvcj1jLGEuZm4ubW9kYWwubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLm1vZGFsPWQsdGhpc30sYShkb2N1bWVudCkub24oXCJjbGljay5icy5tb2RhbC5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGU9XCJtb2RhbFwiXScsZnVuY3Rpb24oYyl7dmFyIGQ9YSh0aGlzKSxlPWQuYXR0cihcImhyZWZcIiksZj1hKGQuYXR0cihcImRhdGEtdGFyZ2V0XCIpfHxlJiZlLnJlcGxhY2UoLy4qKD89I1teXFxzXSskKS8sXCJcIikpLGc9Zi5kYXRhKFwiYnMubW9kYWxcIik/XCJ0b2dnbGVcIjphLmV4dGVuZCh7cmVtb3RlOiEvIy8udGVzdChlKSYmZX0sZi5kYXRhKCksZC5kYXRhKCkpO2QuaXMoXCJhXCIpJiZjLnByZXZlbnREZWZhdWx0KCksZi5vbmUoXCJzaG93LmJzLm1vZGFsXCIsZnVuY3Rpb24oYSl7YS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8Zi5vbmUoXCJoaWRkZW4uYnMubW9kYWxcIixmdW5jdGlvbigpe2QuaXMoXCI6dmlzaWJsZVwiKSYmZC50cmlnZ2VyKFwiZm9jdXNcIil9KX0pLGIuY2FsbChmLGcsdGhpcyl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLnRvb2x0aXBcIiksZj1cIm9iamVjdFwiPT10eXBlb2YgYiYmYjshZSYmL2Rlc3Ryb3l8aGlkZS8udGVzdChiKXx8KGV8fGQuZGF0YShcImJzLnRvb2x0aXBcIixlPW5ldyBjKHRoaXMsZikpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZlW2JdKCkpfSl9dmFyIGM9ZnVuY3Rpb24oYSxiKXt0aGlzLnR5cGU9bnVsbCx0aGlzLm9wdGlvbnM9bnVsbCx0aGlzLmVuYWJsZWQ9bnVsbCx0aGlzLnRpbWVvdXQ9bnVsbCx0aGlzLmhvdmVyU3RhdGU9bnVsbCx0aGlzLiRlbGVtZW50PW51bGwsdGhpcy5pblN0YXRlPW51bGwsdGhpcy5pbml0KFwidG9vbHRpcFwiLGEsYil9O2MuVkVSU0lPTj1cIjMuMy43XCIsYy5UUkFOU0lUSU9OX0RVUkFUSU9OPTE1MCxjLkRFRkFVTFRTPXthbmltYXRpb246ITAscGxhY2VtZW50OlwidG9wXCIsc2VsZWN0b3I6ITEsdGVtcGxhdGU6JzxkaXYgY2xhc3M9XCJ0b29sdGlwXCIgcm9sZT1cInRvb2x0aXBcIj48ZGl2IGNsYXNzPVwidG9vbHRpcC1hcnJvd1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCI+PC9kaXY+PC9kaXY+Jyx0cmlnZ2VyOlwiaG92ZXIgZm9jdXNcIix0aXRsZTpcIlwiLGRlbGF5OjAsaHRtbDohMSxjb250YWluZXI6ITEsdmlld3BvcnQ6e3NlbGVjdG9yOlwiYm9keVwiLHBhZGRpbmc6MH19LGMucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oYixjLGQpe2lmKHRoaXMuZW5hYmxlZD0hMCx0aGlzLnR5cGU9Yix0aGlzLiRlbGVtZW50PWEoYyksdGhpcy5vcHRpb25zPXRoaXMuZ2V0T3B0aW9ucyhkKSx0aGlzLiR2aWV3cG9ydD10aGlzLm9wdGlvbnMudmlld3BvcnQmJmEoYS5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy52aWV3cG9ydCk/dGhpcy5vcHRpb25zLnZpZXdwb3J0LmNhbGwodGhpcyx0aGlzLiRlbGVtZW50KTp0aGlzLm9wdGlvbnMudmlld3BvcnQuc2VsZWN0b3J8fHRoaXMub3B0aW9ucy52aWV3cG9ydCksdGhpcy5pblN0YXRlPXtjbGljazohMSxob3ZlcjohMSxmb2N1czohMX0sdGhpcy4kZWxlbWVudFswXWluc3RhbmNlb2YgZG9jdW1lbnQuY29uc3RydWN0b3ImJiF0aGlzLm9wdGlvbnMuc2VsZWN0b3IpdGhyb3cgbmV3IEVycm9yKFwiYHNlbGVjdG9yYCBvcHRpb24gbXVzdCBiZSBzcGVjaWZpZWQgd2hlbiBpbml0aWFsaXppbmcgXCIrdGhpcy50eXBlK1wiIG9uIHRoZSB3aW5kb3cuZG9jdW1lbnQgb2JqZWN0IVwiKTtmb3IodmFyIGU9dGhpcy5vcHRpb25zLnRyaWdnZXIuc3BsaXQoXCIgXCIpLGY9ZS5sZW5ndGg7Zi0tOyl7dmFyIGc9ZVtmXTtpZihcImNsaWNrXCI9PWcpdGhpcy4kZWxlbWVudC5vbihcImNsaWNrLlwiK3RoaXMudHlwZSx0aGlzLm9wdGlvbnMuc2VsZWN0b3IsYS5wcm94eSh0aGlzLnRvZ2dsZSx0aGlzKSk7ZWxzZSBpZihcIm1hbnVhbFwiIT1nKXt2YXIgaD1cImhvdmVyXCI9PWc/XCJtb3VzZWVudGVyXCI6XCJmb2N1c2luXCIsaT1cImhvdmVyXCI9PWc/XCJtb3VzZWxlYXZlXCI6XCJmb2N1c291dFwiO3RoaXMuJGVsZW1lbnQub24oaCtcIi5cIit0aGlzLnR5cGUsdGhpcy5vcHRpb25zLnNlbGVjdG9yLGEucHJveHkodGhpcy5lbnRlcix0aGlzKSksdGhpcy4kZWxlbWVudC5vbihpK1wiLlwiK3RoaXMudHlwZSx0aGlzLm9wdGlvbnMuc2VsZWN0b3IsYS5wcm94eSh0aGlzLmxlYXZlLHRoaXMpKX19dGhpcy5vcHRpb25zLnNlbGVjdG9yP3RoaXMuX29wdGlvbnM9YS5leHRlbmQoe30sdGhpcy5vcHRpb25zLHt0cmlnZ2VyOlwibWFudWFsXCIsc2VsZWN0b3I6XCJcIn0pOnRoaXMuZml4VGl0bGUoKX0sYy5wcm90b3R5cGUuZ2V0RGVmYXVsdHM9ZnVuY3Rpb24oKXtyZXR1cm4gYy5ERUZBVUxUU30sYy5wcm90b3R5cGUuZ2V0T3B0aW9ucz1mdW5jdGlvbihiKXtyZXR1cm4gYj1hLmV4dGVuZCh7fSx0aGlzLmdldERlZmF1bHRzKCksdGhpcy4kZWxlbWVudC5kYXRhKCksYiksYi5kZWxheSYmXCJudW1iZXJcIj09dHlwZW9mIGIuZGVsYXkmJihiLmRlbGF5PXtzaG93OmIuZGVsYXksaGlkZTpiLmRlbGF5fSksYn0sYy5wcm90b3R5cGUuZ2V0RGVsZWdhdGVPcHRpb25zPWZ1bmN0aW9uKCl7dmFyIGI9e30sYz10aGlzLmdldERlZmF1bHRzKCk7cmV0dXJuIHRoaXMuX29wdGlvbnMmJmEuZWFjaCh0aGlzLl9vcHRpb25zLGZ1bmN0aW9uKGEsZCl7Y1thXSE9ZCYmKGJbYV09ZCl9KSxifSxjLnByb3RvdHlwZS5lbnRlcj1mdW5jdGlvbihiKXt2YXIgYz1iIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3Rvcj9iOmEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlKTtyZXR1cm4gY3x8KGM9bmV3IHRoaXMuY29uc3RydWN0b3IoYi5jdXJyZW50VGFyZ2V0LHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpLGEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlLGMpKSxiIGluc3RhbmNlb2YgYS5FdmVudCYmKGMuaW5TdGF0ZVtcImZvY3VzaW5cIj09Yi50eXBlP1wiZm9jdXNcIjpcImhvdmVyXCJdPSEwKSxjLnRpcCgpLmhhc0NsYXNzKFwiaW5cIil8fFwiaW5cIj09Yy5ob3ZlclN0YXRlP3ZvaWQoYy5ob3ZlclN0YXRlPVwiaW5cIik6KGNsZWFyVGltZW91dChjLnRpbWVvdXQpLGMuaG92ZXJTdGF0ZT1cImluXCIsYy5vcHRpb25zLmRlbGF5JiZjLm9wdGlvbnMuZGVsYXkuc2hvdz92b2lkKGMudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XCJpblwiPT1jLmhvdmVyU3RhdGUmJmMuc2hvdygpfSxjLm9wdGlvbnMuZGVsYXkuc2hvdykpOmMuc2hvdygpKX0sYy5wcm90b3R5cGUuaXNJblN0YXRlVHJ1ZT1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiB0aGlzLmluU3RhdGUpaWYodGhpcy5pblN0YXRlW2FdKXJldHVybiEwO3JldHVybiExfSxjLnByb3RvdHlwZS5sZWF2ZT1mdW5jdGlvbihiKXt2YXIgYz1iIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3Rvcj9iOmEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlKTtpZihjfHwoYz1uZXcgdGhpcy5jb25zdHJ1Y3RvcihiLmN1cnJlbnRUYXJnZXQsdGhpcy5nZXREZWxlZ2F0ZU9wdGlvbnMoKSksYShiLmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJicy5cIit0aGlzLnR5cGUsYykpLGIgaW5zdGFuY2VvZiBhLkV2ZW50JiYoYy5pblN0YXRlW1wiZm9jdXNvdXRcIj09Yi50eXBlP1wiZm9jdXNcIjpcImhvdmVyXCJdPSExKSwhYy5pc0luU3RhdGVUcnVlKCkpcmV0dXJuIGNsZWFyVGltZW91dChjLnRpbWVvdXQpLGMuaG92ZXJTdGF0ZT1cIm91dFwiLGMub3B0aW9ucy5kZWxheSYmYy5vcHRpb25zLmRlbGF5LmhpZGU/dm9pZChjLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe1wib3V0XCI9PWMuaG92ZXJTdGF0ZSYmYy5oaWRlKCl9LGMub3B0aW9ucy5kZWxheS5oaWRlKSk6Yy5oaWRlKCl9LGMucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXt2YXIgYj1hLkV2ZW50KFwic2hvdy5icy5cIit0aGlzLnR5cGUpO2lmKHRoaXMuaGFzQ29udGVudCgpJiZ0aGlzLmVuYWJsZWQpe3RoaXMuJGVsZW1lbnQudHJpZ2dlcihiKTt2YXIgZD1hLmNvbnRhaW5zKHRoaXMuJGVsZW1lbnRbMF0ub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsdGhpcy4kZWxlbWVudFswXSk7aWYoYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8IWQpcmV0dXJuO3ZhciBlPXRoaXMsZj10aGlzLnRpcCgpLGc9dGhpcy5nZXRVSUQodGhpcy50eXBlKTt0aGlzLnNldENvbnRlbnQoKSxmLmF0dHIoXCJpZFwiLGcpLHRoaXMuJGVsZW1lbnQuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIixnKSx0aGlzLm9wdGlvbnMuYW5pbWF0aW9uJiZmLmFkZENsYXNzKFwiZmFkZVwiKTt2YXIgaD1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMucGxhY2VtZW50P3RoaXMub3B0aW9ucy5wbGFjZW1lbnQuY2FsbCh0aGlzLGZbMF0sdGhpcy4kZWxlbWVudFswXSk6dGhpcy5vcHRpb25zLnBsYWNlbWVudCxpPS9cXHM/YXV0bz9cXHM/L2ksaj1pLnRlc3QoaCk7aiYmKGg9aC5yZXBsYWNlKGksXCJcIil8fFwidG9wXCIpLGYuZGV0YWNoKCkuY3NzKHt0b3A6MCxsZWZ0OjAsZGlzcGxheTpcImJsb2NrXCJ9KS5hZGRDbGFzcyhoKS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlLHRoaXMpLHRoaXMub3B0aW9ucy5jb250YWluZXI/Zi5hcHBlbmRUbyh0aGlzLm9wdGlvbnMuY29udGFpbmVyKTpmLmluc2VydEFmdGVyKHRoaXMuJGVsZW1lbnQpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihcImluc2VydGVkLmJzLlwiK3RoaXMudHlwZSk7dmFyIGs9dGhpcy5nZXRQb3NpdGlvbigpLGw9ZlswXS5vZmZzZXRXaWR0aCxtPWZbMF0ub2Zmc2V0SGVpZ2h0O2lmKGope3ZhciBuPWgsbz10aGlzLmdldFBvc2l0aW9uKHRoaXMuJHZpZXdwb3J0KTtoPVwiYm90dG9tXCI9PWgmJmsuYm90dG9tK20+by5ib3R0b20/XCJ0b3BcIjpcInRvcFwiPT1oJiZrLnRvcC1tPG8udG9wP1wiYm90dG9tXCI6XCJyaWdodFwiPT1oJiZrLnJpZ2h0K2w+by53aWR0aD9cImxlZnRcIjpcImxlZnRcIj09aCYmay5sZWZ0LWw8by5sZWZ0P1wicmlnaHRcIjpoLGYucmVtb3ZlQ2xhc3MobikuYWRkQ2xhc3MoaCl9dmFyIHA9dGhpcy5nZXRDYWxjdWxhdGVkT2Zmc2V0KGgsayxsLG0pO3RoaXMuYXBwbHlQbGFjZW1lbnQocCxoKTt2YXIgcT1mdW5jdGlvbigpe3ZhciBhPWUuaG92ZXJTdGF0ZTtlLiRlbGVtZW50LnRyaWdnZXIoXCJzaG93bi5icy5cIitlLnR5cGUpLGUuaG92ZXJTdGF0ZT1udWxsLFwib3V0XCI9PWEmJmUubGVhdmUoZSl9O2Euc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiR0aXAuaGFzQ2xhc3MoXCJmYWRlXCIpP2Yub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIscSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoYy5UUkFOU0lUSU9OX0RVUkFUSU9OKTpxKCl9fSxjLnByb3RvdHlwZS5hcHBseVBsYWNlbWVudD1mdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMudGlwKCksZT1kWzBdLm9mZnNldFdpZHRoLGY9ZFswXS5vZmZzZXRIZWlnaHQsZz1wYXJzZUludChkLmNzcyhcIm1hcmdpbi10b3BcIiksMTApLGg9cGFyc2VJbnQoZC5jc3MoXCJtYXJnaW4tbGVmdFwiKSwxMCk7aXNOYU4oZykmJihnPTApLGlzTmFOKGgpJiYoaD0wKSxiLnRvcCs9ZyxiLmxlZnQrPWgsYS5vZmZzZXQuc2V0T2Zmc2V0KGRbMF0sYS5leHRlbmQoe3VzaW5nOmZ1bmN0aW9uKGEpe2QuY3NzKHt0b3A6TWF0aC5yb3VuZChhLnRvcCksbGVmdDpNYXRoLnJvdW5kKGEubGVmdCl9KX19LGIpLDApLGQuYWRkQ2xhc3MoXCJpblwiKTt2YXIgaT1kWzBdLm9mZnNldFdpZHRoLGo9ZFswXS5vZmZzZXRIZWlnaHQ7XCJ0b3BcIj09YyYmaiE9ZiYmKGIudG9wPWIudG9wK2Ytaik7dmFyIGs9dGhpcy5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGEoYyxiLGksaik7ay5sZWZ0P2IubGVmdCs9ay5sZWZ0OmIudG9wKz1rLnRvcDt2YXIgbD0vdG9wfGJvdHRvbS8udGVzdChjKSxtPWw/MiprLmxlZnQtZStpOjIqay50b3AtZitqLG49bD9cIm9mZnNldFdpZHRoXCI6XCJvZmZzZXRIZWlnaHRcIjtkLm9mZnNldChiKSx0aGlzLnJlcGxhY2VBcnJvdyhtLGRbMF1bbl0sbCl9LGMucHJvdG90eXBlLnJlcGxhY2VBcnJvdz1mdW5jdGlvbihhLGIsYyl7dGhpcy5hcnJvdygpLmNzcyhjP1wibGVmdFwiOlwidG9wXCIsNTAqKDEtYS9iKStcIiVcIikuY3NzKGM/XCJ0b3BcIjpcImxlZnRcIixcIlwiKX0sYy5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciBhPXRoaXMudGlwKCksYj10aGlzLmdldFRpdGxlKCk7YS5maW5kKFwiLnRvb2x0aXAtaW5uZXJcIilbdGhpcy5vcHRpb25zLmh0bWw/XCJodG1sXCI6XCJ0ZXh0XCJdKGIpLGEucmVtb3ZlQ2xhc3MoXCJmYWRlIGluIHRvcCBib3R0b20gbGVmdCByaWdodFwiKX0sYy5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbihiKXtmdW5jdGlvbiBkKCl7XCJpblwiIT1lLmhvdmVyU3RhdGUmJmYuZGV0YWNoKCksZS4kZWxlbWVudCYmZS4kZWxlbWVudC5yZW1vdmVBdHRyKFwiYXJpYS1kZXNjcmliZWRieVwiKS50cmlnZ2VyKFwiaGlkZGVuLmJzLlwiK2UudHlwZSksYiYmYigpfXZhciBlPXRoaXMsZj1hKHRoaXMuJHRpcCksZz1hLkV2ZW50KFwiaGlkZS5icy5cIit0aGlzLnR5cGUpO2lmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihnKSwhZy5pc0RlZmF1bHRQcmV2ZW50ZWQoKSlyZXR1cm4gZi5yZW1vdmVDbGFzcyhcImluXCIpLGEuc3VwcG9ydC50cmFuc2l0aW9uJiZmLmhhc0NsYXNzKFwiZmFkZVwiKT9mLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGQpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuVFJBTlNJVElPTl9EVVJBVElPTik6ZCgpLHRoaXMuaG92ZXJTdGF0ZT1udWxsLHRoaXN9LGMucHJvdG90eXBlLmZpeFRpdGxlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudDsoYS5hdHRyKFwidGl0bGVcIil8fFwic3RyaW5nXCIhPXR5cGVvZiBhLmF0dHIoXCJkYXRhLW9yaWdpbmFsLXRpdGxlXCIpKSYmYS5hdHRyKFwiZGF0YS1vcmlnaW5hbC10aXRsZVwiLGEuYXR0cihcInRpdGxlXCIpfHxcIlwiKS5hdHRyKFwidGl0bGVcIixcIlwiKX0sYy5wcm90b3R5cGUuaGFzQ29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFRpdGxlKCl9LGMucHJvdG90eXBlLmdldFBvc2l0aW9uPWZ1bmN0aW9uKGIpe2I9Ynx8dGhpcy4kZWxlbWVudDt2YXIgYz1iWzBdLGQ9XCJCT0RZXCI9PWMudGFnTmFtZSxlPWMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7bnVsbD09ZS53aWR0aCYmKGU9YS5leHRlbmQoe30sZSx7d2lkdGg6ZS5yaWdodC1lLmxlZnQsaGVpZ2h0OmUuYm90dG9tLWUudG9wfSkpO3ZhciBmPXdpbmRvdy5TVkdFbGVtZW50JiZjIGluc3RhbmNlb2Ygd2luZG93LlNWR0VsZW1lbnQsZz1kP3t0b3A6MCxsZWZ0OjB9OmY/bnVsbDpiLm9mZnNldCgpLGg9e3Njcm9sbDpkP2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOmIuc2Nyb2xsVG9wKCl9LGk9ZD97d2lkdGg6YSh3aW5kb3cpLndpZHRoKCksaGVpZ2h0OmEod2luZG93KS5oZWlnaHQoKX06bnVsbDtyZXR1cm4gYS5leHRlbmQoe30sZSxoLGksZyl9LGMucHJvdG90eXBlLmdldENhbGN1bGF0ZWRPZmZzZXQ9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuXCJib3R0b21cIj09YT97dG9wOmIudG9wK2IuaGVpZ2h0LGxlZnQ6Yi5sZWZ0K2Iud2lkdGgvMi1jLzJ9OlwidG9wXCI9PWE/e3RvcDpiLnRvcC1kLGxlZnQ6Yi5sZWZ0K2Iud2lkdGgvMi1jLzJ9OlwibGVmdFwiPT1hP3t0b3A6Yi50b3ArYi5oZWlnaHQvMi1kLzIsbGVmdDpiLmxlZnQtY306e3RvcDpiLnRvcCtiLmhlaWdodC8yLWQvMixsZWZ0OmIubGVmdCtiLndpZHRofX0sYy5wcm90b3R5cGUuZ2V0Vmlld3BvcnRBZGp1c3RlZERlbHRhPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXt0b3A6MCxsZWZ0OjB9O2lmKCF0aGlzLiR2aWV3cG9ydClyZXR1cm4gZTt2YXIgZj10aGlzLm9wdGlvbnMudmlld3BvcnQmJnRoaXMub3B0aW9ucy52aWV3cG9ydC5wYWRkaW5nfHwwLGc9dGhpcy5nZXRQb3NpdGlvbih0aGlzLiR2aWV3cG9ydCk7aWYoL3JpZ2h0fGxlZnQvLnRlc3QoYSkpe3ZhciBoPWIudG9wLWYtZy5zY3JvbGwsaT1iLnRvcCtmLWcuc2Nyb2xsK2Q7aDxnLnRvcD9lLnRvcD1nLnRvcC1oOmk+Zy50b3ArZy5oZWlnaHQmJihlLnRvcD1nLnRvcCtnLmhlaWdodC1pKX1lbHNle3ZhciBqPWIubGVmdC1mLGs9Yi5sZWZ0K2YrYztqPGcubGVmdD9lLmxlZnQ9Zy5sZWZ0LWo6az5nLnJpZ2h0JiYoZS5sZWZ0PWcubGVmdCtnLndpZHRoLWspfXJldHVybiBlfSxjLnByb3RvdHlwZS5nZXRUaXRsZT1mdW5jdGlvbigpe3ZhciBhLGI9dGhpcy4kZWxlbWVudCxjPXRoaXMub3B0aW9ucztyZXR1cm4gYT1iLmF0dHIoXCJkYXRhLW9yaWdpbmFsLXRpdGxlXCIpfHwoXCJmdW5jdGlvblwiPT10eXBlb2YgYy50aXRsZT9jLnRpdGxlLmNhbGwoYlswXSk6Yy50aXRsZSl9LGMucHJvdG90eXBlLmdldFVJRD1mdW5jdGlvbihhKXtkbyBhKz1+figxZTYqTWF0aC5yYW5kb20oKSk7d2hpbGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSkpO3JldHVybiBhfSxjLnByb3RvdHlwZS50aXA9ZnVuY3Rpb24oKXtpZighdGhpcy4kdGlwJiYodGhpcy4kdGlwPWEodGhpcy5vcHRpb25zLnRlbXBsYXRlKSwxIT10aGlzLiR0aXAubGVuZ3RoKSl0aHJvdyBuZXcgRXJyb3IodGhpcy50eXBlK1wiIGB0ZW1wbGF0ZWAgb3B0aW9uIG11c3QgY29uc2lzdCBvZiBleGFjdGx5IDEgdG9wLWxldmVsIGVsZW1lbnQhXCIpO3JldHVybiB0aGlzLiR0aXB9LGMucHJvdG90eXBlLmFycm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFycm93PXRoaXMuJGFycm93fHx0aGlzLnRpcCgpLmZpbmQoXCIudG9vbHRpcC1hcnJvd1wiKX0sYy5wcm90b3R5cGUuZW5hYmxlPWZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSEwfSxjLnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSExfSxjLnByb3RvdHlwZS50b2dnbGVFbmFibGVkPWZ1bmN0aW9uKCl7dGhpcy5lbmFibGVkPSF0aGlzLmVuYWJsZWR9LGMucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihiKXt2YXIgYz10aGlzO2ImJihjPWEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlKSxjfHwoYz1uZXcgdGhpcy5jb25zdHJ1Y3RvcihiLmN1cnJlbnRUYXJnZXQsdGhpcy5nZXREZWxlZ2F0ZU9wdGlvbnMoKSksYShiLmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJicy5cIit0aGlzLnR5cGUsYykpKSxiPyhjLmluU3RhdGUuY2xpY2s9IWMuaW5TdGF0ZS5jbGljayxjLmlzSW5TdGF0ZVRydWUoKT9jLmVudGVyKGMpOmMubGVhdmUoYykpOmMudGlwKCkuaGFzQ2xhc3MoXCJpblwiKT9jLmxlYXZlKGMpOmMuZW50ZXIoYyl9LGMucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2NsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpLHRoaXMuaGlkZShmdW5jdGlvbigpe2EuJGVsZW1lbnQub2ZmKFwiLlwiK2EudHlwZSkucmVtb3ZlRGF0YShcImJzLlwiK2EudHlwZSksYS4kdGlwJiZhLiR0aXAuZGV0YWNoKCksYS4kdGlwPW51bGwsYS4kYXJyb3c9bnVsbCxhLiR2aWV3cG9ydD1udWxsLGEuJGVsZW1lbnQ9bnVsbH0pfTt2YXIgZD1hLmZuLnRvb2x0aXA7YS5mbi50b29sdGlwPWIsYS5mbi50b29sdGlwLkNvbnN0cnVjdG9yPWMsYS5mbi50b29sdGlwLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi50b29sdGlwPWQsdGhpc319KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy5wb3BvdmVyXCIpLGY9XCJvYmplY3RcIj09dHlwZW9mIGImJmI7IWUmJi9kZXN0cm95fGhpZGUvLnRlc3QoYil8fChlfHxkLmRhdGEoXCJicy5wb3BvdmVyXCIsZT1uZXcgYyh0aGlzLGYpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZVtiXSgpKX0pfXZhciBjPWZ1bmN0aW9uKGEsYil7dGhpcy5pbml0KFwicG9wb3ZlclwiLGEsYil9O2lmKCFhLmZuLnRvb2x0aXApdGhyb3cgbmV3IEVycm9yKFwiUG9wb3ZlciByZXF1aXJlcyB0b29sdGlwLmpzXCIpO2MuVkVSU0lPTj1cIjMuMy43XCIsYy5ERUZBVUxUUz1hLmV4dGVuZCh7fSxhLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuREVGQVVMVFMse3BsYWNlbWVudDpcInJpZ2h0XCIsdHJpZ2dlcjpcImNsaWNrXCIsY29udGVudDpcIlwiLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwicG9wb3ZlclwiIHJvbGU9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+PGgzIGNsYXNzPVwicG9wb3Zlci10aXRsZVwiPjwvaDM+PGRpdiBjbGFzcz1cInBvcG92ZXItY29udGVudFwiPjwvZGl2PjwvZGl2Pid9KSxjLnByb3RvdHlwZT1hLmV4dGVuZCh7fSxhLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IucHJvdG90eXBlKSxjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jLGMucHJvdG90eXBlLmdldERlZmF1bHRzPWZ1bmN0aW9uKCl7cmV0dXJuIGMuREVGQVVMVFN9LGMucHJvdG90eXBlLnNldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRpcCgpLGI9dGhpcy5nZXRUaXRsZSgpLGM9dGhpcy5nZXRDb250ZW50KCk7YS5maW5kKFwiLnBvcG92ZXItdGl0bGVcIilbdGhpcy5vcHRpb25zLmh0bWw/XCJodG1sXCI6XCJ0ZXh0XCJdKGIpLGEuZmluZChcIi5wb3BvdmVyLWNvbnRlbnRcIikuY2hpbGRyZW4oKS5kZXRhY2goKS5lbmQoKVt0aGlzLm9wdGlvbnMuaHRtbD9cInN0cmluZ1wiPT10eXBlb2YgYz9cImh0bWxcIjpcImFwcGVuZFwiOlwidGV4dFwiXShjKSxhLnJlbW92ZUNsYXNzKFwiZmFkZSB0b3AgYm90dG9tIGxlZnQgcmlnaHQgaW5cIiksYS5maW5kKFwiLnBvcG92ZXItdGl0bGVcIikuaHRtbCgpfHxhLmZpbmQoXCIucG9wb3Zlci10aXRsZVwiKS5oaWRlKCl9LGMucHJvdG90eXBlLmhhc0NvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRUaXRsZSgpfHx0aGlzLmdldENvbnRlbnQoKX0sYy5wcm90b3R5cGUuZ2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuJGVsZW1lbnQsYj10aGlzLm9wdGlvbnM7cmV0dXJuIGEuYXR0cihcImRhdGEtY29udGVudFwiKXx8KFwiZnVuY3Rpb25cIj09dHlwZW9mIGIuY29udGVudD9iLmNvbnRlbnQuY2FsbChhWzBdKTpiLmNvbnRlbnQpfSxjLnByb3RvdHlwZS5hcnJvdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRhcnJvdz10aGlzLiRhcnJvd3x8dGhpcy50aXAoKS5maW5kKFwiLmFycm93XCIpfTt2YXIgZD1hLmZuLnBvcG92ZXI7YS5mbi5wb3BvdmVyPWIsYS5mbi5wb3BvdmVyLkNvbnN0cnVjdG9yPWMsYS5mbi5wb3BvdmVyLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5wb3BvdmVyPWQsdGhpc319KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYyxkKXt0aGlzLiRib2R5PWEoZG9jdW1lbnQuYm9keSksdGhpcy4kc2Nyb2xsRWxlbWVudD1hKGEoYykuaXMoZG9jdW1lbnQuYm9keSk/d2luZG93OmMpLHRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSxiLkRFRkFVTFRTLGQpLHRoaXMuc2VsZWN0b3I9KHRoaXMub3B0aW9ucy50YXJnZXR8fFwiXCIpK1wiIC5uYXYgbGkgPiBhXCIsdGhpcy5vZmZzZXRzPVtdLHRoaXMudGFyZ2V0cz1bXSx0aGlzLmFjdGl2ZVRhcmdldD1udWxsLHRoaXMuc2Nyb2xsSGVpZ2h0PTAsdGhpcy4kc2Nyb2xsRWxlbWVudC5vbihcInNjcm9sbC5icy5zY3JvbGxzcHlcIixhLnByb3h5KHRoaXMucHJvY2Vzcyx0aGlzKSksdGhpcy5yZWZyZXNoKCksdGhpcy5wcm9jZXNzKCl9ZnVuY3Rpb24gYyhjKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLnNjcm9sbHNweVwiKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBjJiZjO2V8fGQuZGF0YShcImJzLnNjcm9sbHNweVwiLGU9bmV3IGIodGhpcyxmKSksXCJzdHJpbmdcIj09dHlwZW9mIGMmJmVbY10oKX0pfWIuVkVSU0lPTj1cIjMuMy43XCIsYi5ERUZBVUxUUz17b2Zmc2V0OjEwfSxiLnByb3RvdHlwZS5nZXRTY3JvbGxIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2Nyb2xsRWxlbWVudFswXS5zY3JvbGxIZWlnaHR8fE1hdGgubWF4KHRoaXMuJGJvZHlbMF0uc2Nyb2xsSGVpZ2h0LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpfSxiLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxjPVwib2Zmc2V0XCIsZD0wO3RoaXMub2Zmc2V0cz1bXSx0aGlzLnRhcmdldHM9W10sdGhpcy5zY3JvbGxIZWlnaHQ9dGhpcy5nZXRTY3JvbGxIZWlnaHQoKSxhLmlzV2luZG93KHRoaXMuJHNjcm9sbEVsZW1lbnRbMF0pfHwoYz1cInBvc2l0aW9uXCIsZD10aGlzLiRzY3JvbGxFbGVtZW50LnNjcm9sbFRvcCgpKSx0aGlzLiRib2R5LmZpbmQodGhpcy5zZWxlY3RvcikubWFwKGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKSxlPWIuZGF0YShcInRhcmdldFwiKXx8Yi5hdHRyKFwiaHJlZlwiKSxmPS9eIy4vLnRlc3QoZSkmJmEoZSk7cmV0dXJuIGYmJmYubGVuZ3RoJiZmLmlzKFwiOnZpc2libGVcIikmJltbZltjXSgpLnRvcCtkLGVdXXx8bnVsbH0pLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYVswXS1iWzBdfSkuZWFjaChmdW5jdGlvbigpe2Iub2Zmc2V0cy5wdXNoKHRoaXNbMF0pLGIudGFyZ2V0cy5wdXNoKHRoaXNbMV0pfSl9LGIucHJvdG90eXBlLnByb2Nlc3M9ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMuJHNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wKCkrdGhpcy5vcHRpb25zLm9mZnNldCxjPXRoaXMuZ2V0U2Nyb2xsSGVpZ2h0KCksZD10aGlzLm9wdGlvbnMub2Zmc2V0K2MtdGhpcy4kc2Nyb2xsRWxlbWVudC5oZWlnaHQoKSxlPXRoaXMub2Zmc2V0cyxmPXRoaXMudGFyZ2V0cyxnPXRoaXMuYWN0aXZlVGFyZ2V0O2lmKHRoaXMuc2Nyb2xsSGVpZ2h0IT1jJiZ0aGlzLnJlZnJlc2goKSxiPj1kKXJldHVybiBnIT0oYT1mW2YubGVuZ3RoLTFdKSYmdGhpcy5hY3RpdmF0ZShhKTtpZihnJiZiPGVbMF0pcmV0dXJuIHRoaXMuYWN0aXZlVGFyZ2V0PW51bGwsdGhpcy5jbGVhcigpO2ZvcihhPWUubGVuZ3RoO2EtLTspZyE9ZlthXSYmYj49ZVthXSYmKHZvaWQgMD09PWVbYSsxXXx8YjxlW2ErMV0pJiZ0aGlzLmFjdGl2YXRlKGZbYV0pfSxiLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihiKXtcclxudGhpcy5hY3RpdmVUYXJnZXQ9Yix0aGlzLmNsZWFyKCk7dmFyIGM9dGhpcy5zZWxlY3RvcisnW2RhdGEtdGFyZ2V0PVwiJytiKydcIl0sJyt0aGlzLnNlbGVjdG9yKydbaHJlZj1cIicrYisnXCJdJyxkPWEoYykucGFyZW50cyhcImxpXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO2QucGFyZW50KFwiLmRyb3Bkb3duLW1lbnVcIikubGVuZ3RoJiYoZD1kLmNsb3Nlc3QoXCJsaS5kcm9wZG93blwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKSksZC50cmlnZ2VyKFwiYWN0aXZhdGUuYnMuc2Nyb2xsc3B5XCIpfSxiLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe2EodGhpcy5zZWxlY3RvcikucGFyZW50c1VudGlsKHRoaXMub3B0aW9ucy50YXJnZXQsXCIuYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpfTt2YXIgZD1hLmZuLnNjcm9sbHNweTthLmZuLnNjcm9sbHNweT1jLGEuZm4uc2Nyb2xsc3B5LkNvbnN0cnVjdG9yPWIsYS5mbi5zY3JvbGxzcHkubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLnNjcm9sbHNweT1kLHRoaXN9LGEod2luZG93KS5vbihcImxvYWQuYnMuc2Nyb2xsc3B5LmRhdGEtYXBpXCIsZnVuY3Rpb24oKXthKCdbZGF0YS1zcHk9XCJzY3JvbGxcIl0nKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKTtjLmNhbGwoYixiLmRhdGEoKSl9KX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMudGFiXCIpO2V8fGQuZGF0YShcImJzLnRhYlwiLGU9bmV3IGModGhpcykpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZlW2JdKCl9KX12YXIgYz1mdW5jdGlvbihiKXt0aGlzLmVsZW1lbnQ9YShiKX07Yy5WRVJTSU9OPVwiMy4zLjdcIixjLlRSQU5TSVRJT05fRFVSQVRJT049MTUwLGMucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmVsZW1lbnQsYz1iLmNsb3Nlc3QoXCJ1bDpub3QoLmRyb3Bkb3duLW1lbnUpXCIpLGQ9Yi5kYXRhKFwidGFyZ2V0XCIpO2lmKGR8fChkPWIuYXR0cihcImhyZWZcIiksZD1kJiZkLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sXCJcIikpLCFiLnBhcmVudChcImxpXCIpLmhhc0NsYXNzKFwiYWN0aXZlXCIpKXt2YXIgZT1jLmZpbmQoXCIuYWN0aXZlOmxhc3QgYVwiKSxmPWEuRXZlbnQoXCJoaWRlLmJzLnRhYlwiLHtyZWxhdGVkVGFyZ2V0OmJbMF19KSxnPWEuRXZlbnQoXCJzaG93LmJzLnRhYlwiLHtyZWxhdGVkVGFyZ2V0OmVbMF19KTtpZihlLnRyaWdnZXIoZiksYi50cmlnZ2VyKGcpLCFnLmlzRGVmYXVsdFByZXZlbnRlZCgpJiYhZi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dmFyIGg9YShkKTt0aGlzLmFjdGl2YXRlKGIuY2xvc2VzdChcImxpXCIpLGMpLHRoaXMuYWN0aXZhdGUoaCxoLnBhcmVudCgpLGZ1bmN0aW9uKCl7ZS50cmlnZ2VyKHt0eXBlOlwiaGlkZGVuLmJzLnRhYlwiLHJlbGF0ZWRUYXJnZXQ6YlswXX0pLGIudHJpZ2dlcih7dHlwZTpcInNob3duLmJzLnRhYlwiLHJlbGF0ZWRUYXJnZXQ6ZVswXX0pfSl9fX0sYy5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oYixkLGUpe2Z1bmN0aW9uIGYoKXtnLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLmZpbmQoXCI+IC5kcm9wZG93bi1tZW51ID4gLmFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKS5lbmQoKS5maW5kKCdbZGF0YS10b2dnbGU9XCJ0YWJcIl0nKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKSxiLmFkZENsYXNzKFwiYWN0aXZlXCIpLmZpbmQoJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXScpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApLGg/KGJbMF0ub2Zmc2V0V2lkdGgsYi5hZGRDbGFzcyhcImluXCIpKTpiLnJlbW92ZUNsYXNzKFwiZmFkZVwiKSxiLnBhcmVudChcIi5kcm9wZG93bi1tZW51XCIpLmxlbmd0aCYmYi5jbG9zZXN0KFwibGkuZHJvcGRvd25cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIikuZW5kKCkuZmluZCgnW2RhdGEtdG9nZ2xlPVwidGFiXCJdJykuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMCksZSYmZSgpfXZhciBnPWQuZmluZChcIj4gLmFjdGl2ZVwiKSxoPWUmJmEuc3VwcG9ydC50cmFuc2l0aW9uJiYoZy5sZW5ndGgmJmcuaGFzQ2xhc3MoXCJmYWRlXCIpfHwhIWQuZmluZChcIj4gLmZhZGVcIikubGVuZ3RoKTtnLmxlbmd0aCYmaD9nLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGYpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKGMuVFJBTlNJVElPTl9EVVJBVElPTik6ZigpLGcucmVtb3ZlQ2xhc3MoXCJpblwiKX07dmFyIGQ9YS5mbi50YWI7YS5mbi50YWI9YixhLmZuLnRhYi5Db25zdHJ1Y3Rvcj1jLGEuZm4udGFiLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi50YWI9ZCx0aGlzfTt2YXIgZT1mdW5jdGlvbihjKXtjLnByZXZlbnREZWZhdWx0KCksYi5jYWxsKGEodGhpcyksXCJzaG93XCIpfTthKGRvY3VtZW50KS5vbihcImNsaWNrLmJzLnRhYi5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGU9XCJ0YWJcIl0nLGUpLm9uKFwiY2xpY2suYnMudGFiLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZT1cInBpbGxcIl0nLGUpfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMuYWZmaXhcIiksZj1cIm9iamVjdFwiPT10eXBlb2YgYiYmYjtlfHxkLmRhdGEoXCJicy5hZmZpeFwiLGU9bmV3IGModGhpcyxmKSksXCJzdHJpbmdcIj09dHlwZW9mIGImJmVbYl0oKX0pfXZhciBjPWZ1bmN0aW9uKGIsZCl7dGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGMuREVGQVVMVFMsZCksdGhpcy4kdGFyZ2V0PWEodGhpcy5vcHRpb25zLnRhcmdldCkub24oXCJzY3JvbGwuYnMuYWZmaXguZGF0YS1hcGlcIixhLnByb3h5KHRoaXMuY2hlY2tQb3NpdGlvbix0aGlzKSkub24oXCJjbGljay5icy5hZmZpeC5kYXRhLWFwaVwiLGEucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcCx0aGlzKSksdGhpcy4kZWxlbWVudD1hKGIpLHRoaXMuYWZmaXhlZD1udWxsLHRoaXMudW5waW49bnVsbCx0aGlzLnBpbm5lZE9mZnNldD1udWxsLHRoaXMuY2hlY2tQb3NpdGlvbigpfTtjLlZFUlNJT049XCIzLjMuN1wiLGMuUkVTRVQ9XCJhZmZpeCBhZmZpeC10b3AgYWZmaXgtYm90dG9tXCIsYy5ERUZBVUxUUz17b2Zmc2V0OjAsdGFyZ2V0OndpbmRvd30sYy5wcm90b3R5cGUuZ2V0U3RhdGU9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpLGY9dGhpcy4kZWxlbWVudC5vZmZzZXQoKSxnPXRoaXMuJHRhcmdldC5oZWlnaHQoKTtpZihudWxsIT1jJiZcInRvcFwiPT10aGlzLmFmZml4ZWQpcmV0dXJuIGU8YyYmXCJ0b3BcIjtpZihcImJvdHRvbVwiPT10aGlzLmFmZml4ZWQpcmV0dXJuIG51bGwhPWM/IShlK3RoaXMudW5waW48PWYudG9wKSYmXCJib3R0b21cIjohKGUrZzw9YS1kKSYmXCJib3R0b21cIjt2YXIgaD1udWxsPT10aGlzLmFmZml4ZWQsaT1oP2U6Zi50b3Asaj1oP2c6YjtyZXR1cm4gbnVsbCE9YyYmZTw9Yz9cInRvcFwiOm51bGwhPWQmJmkraj49YS1kJiZcImJvdHRvbVwifSxjLnByb3RvdHlwZS5nZXRQaW5uZWRPZmZzZXQ9ZnVuY3Rpb24oKXtpZih0aGlzLnBpbm5lZE9mZnNldClyZXR1cm4gdGhpcy5waW5uZWRPZmZzZXQ7dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhjLlJFU0VUKS5hZGRDbGFzcyhcImFmZml4XCIpO3ZhciBhPXRoaXMuJHRhcmdldC5zY3JvbGxUb3AoKSxiPXRoaXMuJGVsZW1lbnQub2Zmc2V0KCk7cmV0dXJuIHRoaXMucGlubmVkT2Zmc2V0PWIudG9wLWF9LGMucHJvdG90eXBlLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wPWZ1bmN0aW9uKCl7c2V0VGltZW91dChhLnByb3h5KHRoaXMuY2hlY2tQb3NpdGlvbix0aGlzKSwxKX0sYy5wcm90b3R5cGUuY2hlY2tQb3NpdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMuJGVsZW1lbnQuaXMoXCI6dmlzaWJsZVwiKSl7dmFyIGI9dGhpcy4kZWxlbWVudC5oZWlnaHQoKSxkPXRoaXMub3B0aW9ucy5vZmZzZXQsZT1kLnRvcCxmPWQuYm90dG9tLGc9TWF0aC5tYXgoYShkb2N1bWVudCkuaGVpZ2h0KCksYShkb2N1bWVudC5ib2R5KS5oZWlnaHQoKSk7XCJvYmplY3RcIiE9dHlwZW9mIGQmJihmPWU9ZCksXCJmdW5jdGlvblwiPT10eXBlb2YgZSYmKGU9ZC50b3AodGhpcy4kZWxlbWVudCkpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGYmJihmPWQuYm90dG9tKHRoaXMuJGVsZW1lbnQpKTt2YXIgaD10aGlzLmdldFN0YXRlKGcsYixlLGYpO2lmKHRoaXMuYWZmaXhlZCE9aCl7bnVsbCE9dGhpcy51bnBpbiYmdGhpcy4kZWxlbWVudC5jc3MoXCJ0b3BcIixcIlwiKTt2YXIgaT1cImFmZml4XCIrKGg/XCItXCIraDpcIlwiKSxqPWEuRXZlbnQoaStcIi5icy5hZmZpeFwiKTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoaiksai5pc0RlZmF1bHRQcmV2ZW50ZWQoKSlyZXR1cm47dGhpcy5hZmZpeGVkPWgsdGhpcy51bnBpbj1cImJvdHRvbVwiPT1oP3RoaXMuZ2V0UGlubmVkT2Zmc2V0KCk6bnVsbCx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKGMuUkVTRVQpLmFkZENsYXNzKGkpLnRyaWdnZXIoaS5yZXBsYWNlKFwiYWZmaXhcIixcImFmZml4ZWRcIikrXCIuYnMuYWZmaXhcIil9XCJib3R0b21cIj09aCYmdGhpcy4kZWxlbWVudC5vZmZzZXQoe3RvcDpnLWItZn0pfX07dmFyIGQ9YS5mbi5hZmZpeDthLmZuLmFmZml4PWIsYS5mbi5hZmZpeC5Db25zdHJ1Y3Rvcj1jLGEuZm4uYWZmaXgubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmFmZml4PWQsdGhpc30sYSh3aW5kb3cpLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7YSgnW2RhdGEtc3B5PVwiYWZmaXhcIl0nKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxkPWMuZGF0YSgpO2Qub2Zmc2V0PWQub2Zmc2V0fHx7fSxudWxsIT1kLm9mZnNldEJvdHRvbSYmKGQub2Zmc2V0LmJvdHRvbT1kLm9mZnNldEJvdHRvbSksbnVsbCE9ZC5vZmZzZXRUb3AmJihkLm9mZnNldC50b3A9ZC5vZmZzZXRUb3ApLGIuY2FsbChjLGQpfSl9KX0oalF1ZXJ5KTsiLCIvKlxuQ29weXJpZ2h0IChjKSAyMDEwIEhlYXRoZXIgQXJ0aHVyXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZ1xuYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG5cIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbndpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbmRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0b1xucGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvXG50aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlXG5pbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCxcbkVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkRcbk5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkVcbkxJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT05cbk9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTlxuV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbiovIWZ1bmN0aW9uIGEoYixjLGQpe2Z1bmN0aW9uIGUoZyxoKXtpZighY1tnXSl7aWYoIWJbZ10pe3ZhciBpPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWgmJmkpcmV0dXJuIGkoZywhMCk7aWYoZilyZXR1cm4gZihnLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2crXCInXCIpfXZhciBqPWNbZ109e2V4cG9ydHM6e319O2JbZ11bMF0uY2FsbChqLmV4cG9ydHMsZnVuY3Rpb24oYSl7dmFyIGM9YltnXVsxXVthXTtyZXR1cm4gZShjP2M6YSl9LGosai5leHBvcnRzLGEsYixjLGQpfXJldHVybiBjW2ddLmV4cG9ydHN9Zm9yKHZhciBmPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsZz0wO2c8ZC5sZW5ndGg7ZysrKWUoZFtnXSk7cmV0dXJuIGV9KHsxOltmdW5jdGlvbihhKXticmFpbj1hKFwiLi9saWIvYnJhaW5cIil9LHtcIi4vbGliL2JyYWluXCI6Mn1dLDI6W2Z1bmN0aW9uKGEsYixjKXtjLk5ldXJhbE5ldHdvcms9YShcIi4vbmV1cmFsbmV0d29ya1wiKS5OZXVyYWxOZXR3b3JrLGMuY3Jvc3NWYWxpZGF0ZT1hKFwiLi9jcm9zcy12YWxpZGF0ZVwiKX0se1wiLi9jcm9zcy12YWxpZGF0ZVwiOjMsXCIuL25ldXJhbG5ldHdvcmtcIjo1fV0sMzpbZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYixjLGUsZil7dmFyIGc9bmV3IGEoYiksaD1EYXRlLm5vdygpLGk9Zy50cmFpbihlLGMpLGo9RGF0ZS5ub3coKSxrPWcudGVzdChmKSxsPURhdGUubm93KCksbT1kKGspLmV4dGVuZCh7dHJhaW5UaW1lOmotaCx0ZXN0VGltZTpsLWosaXRlcmF0aW9uczppLml0ZXJhdGlvbnMsdHJhaW5FcnJvcjppLmVycm9yLGxlYXJuaW5nUmF0ZTpnLmxlYXJuaW5nUmF0ZSxoaWRkZW46Zy5oaWRkZW5TaXplcyxuZXR3b3JrOmcudG9KU09OKCl9KTtyZXR1cm4gbX12YXIgZD1hKFwidW5kZXJzY29yZVwiKS5fO2IuZXhwb3J0cz1mdW5jdGlvbihhLGIsZSxmLGcpe2c9Z3x8NDt2YXIgaD1iLmxlbmd0aC9nO2I9ZChiKS5zb3J0QnkoZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5yYW5kb20oKX0pO3ZhciBpPXtlcnJvcjowLHRyYWluVGltZTowLHRlc3RUaW1lOjAsaXRlcmF0aW9uczowLHRyYWluRXJyb3I6MH0saj17dHJ1ZVBvczowLHRydWVOZWc6MCxmYWxzZVBvczowLGZhbHNlTmVnOjAsdG90YWw6MH0saz1bXSxsPWQucmFuZ2UoZykubWFwKGZ1bmN0aW9uKGcpe3ZhciBsPWQoYikuY2xvbmUoKSxtPWwuc3BsaWNlKGcqaCxoKSxuPWwsbz1jKGEsZSxmLG4sbSk7cmV0dXJuIGQoaSkuZWFjaChmdW5jdGlvbihhLGIpe2lbYl09YStvW2JdfSksZChqKS5lYWNoKGZ1bmN0aW9uKGEsYil7altiXT1hK29bYl19KSxrLnB1c2goby5taXNjbGFzc2VzKSxvfSk7cmV0dXJuIGQoaSkuZWFjaChmdW5jdGlvbihhLGIpe2lbYl09YS9nfSksai5wcmVjaXNpb249ai50cnVlUG9zLyhqLnRydWVQb3Mrai5mYWxzZVBvcyksai5yZWNhbGw9ai50cnVlUG9zLyhqLnRydWVQb3Mrai5mYWxzZU5lZyksai5hY2N1cmFjeT0oai50cnVlTmVnK2oudHJ1ZVBvcykvai50b3RhbCxqLnRlc3RTaXplPWgsai50cmFpblNpemU9Yi5sZW5ndGgtaCx7YXZnczppLHN0YXRzOmosc2V0czpsLG1pc2NsYXNzZXM6ZChrKS5mbGF0dGVuKCl9fX0se3VuZGVyc2NvcmU6MjB9XSw0OltmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7dmFyIGI9aChhKS5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gaChhKS5leHRlbmQoYil9LHt9KTtyZXR1cm4gZChiKX1mdW5jdGlvbiBkKGEpe3ZhciBiPXt9LGM9MDtmb3IodmFyIGQgaW4gYSliW2RdPWMrKztyZXR1cm4gYn1mdW5jdGlvbiBlKGEsYil7dmFyIGM9W107Zm9yKHZhciBkIGluIGEpY1thW2RdXT1iW2RdfHwwO3JldHVybiBjfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz17fTtmb3IodmFyIGQgaW4gYSljW2RdPWJbYVtkXV07cmV0dXJuIGN9ZnVuY3Rpb24gZyhhKXtmb3IodmFyIGI9e30sYz0wLGQ9YS5sZW5ndGg7ZC0tPjA7KWJbYVtkXV09YysrO3JldHVybiBifXZhciBoPWEoXCJ1bmRlcnNjb3JlXCIpO2IuZXhwb3J0cz17YnVpbGRMb29rdXA6Yyxsb29rdXBGcm9tSGFzaDpkLHRvQXJyYXk6ZSx0b0hhc2g6Zixsb29rdXBGcm9tQXJyYXk6Z319LHt1bmRlcnNjb3JlOjIwfV0sNTpbZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoKXtyZXR1cm4uNCpNYXRoLnJhbmRvbSgpLS4yfWZ1bmN0aW9uIGUoYSl7Zm9yKHZhciBiPW5ldyBBcnJheShhKSxjPTA7YT5jO2MrKyliW2NdPTA7cmV0dXJuIGJ9ZnVuY3Rpb24gZihhKXtmb3IodmFyIGI9bmV3IEFycmF5KGEpLGM9MDthPmM7YysrKWJbY109ZCgpO3JldHVybiBifWZ1bmN0aW9uIGcoYSl7Zm9yKHZhciBiPTAsYz0wO2M8YS5sZW5ndGg7YysrKWIrPU1hdGgucG93KGFbY10sMik7cmV0dXJuIGIvYS5sZW5ndGh9ZnVuY3Rpb24gaChhKXtpZihrLmNhbGwodGhpcyx7b2JqZWN0TW9kZTohMH0pLGE9YXx8e30sIWEubmV1cmFsTmV0d29yayl0aHJvdyBuZXcgRXJyb3IoXCJubyBuZXVyYWwgbmV0d29yayBzcGVjaWZpZWRcIik7cmV0dXJuIHRoaXMubmV1cmFsTmV0d29yaz1hLm5ldXJhbE5ldHdvcmssdGhpcy5kYXRhRm9ybWF0RGV0ZXJtaW5lZD0hMSx0aGlzLmlucHV0S2V5cz1bXSx0aGlzLm91dHB1dEtleXM9W10sdGhpcy5pPTAsdGhpcy5pdGVyYXRpb25zPWEuaXRlcmF0aW9uc3x8MmU0LHRoaXMuZXJyb3JUaHJlc2g9YS5lcnJvclRocmVzaHx8LjAwNSx0aGlzLmxvZz1hLmxvZ3x8ITEsdGhpcy5sb2dQZXJpb2Q9YS5sb2dQZXJpb2R8fDEwLHRoaXMuY2FsbGJhY2s9YS5jYWxsYmFjayx0aGlzLmNhbGxiYWNrUGVyaW9kPWEuY2FsbGJhY2tQZXJpb2R8fDEwLHRoaXMuZmxvb2RDYWxsYmFjaz1hLmZsb29kQ2FsbGJhY2ssdGhpcy5kb25lVHJhaW5pbmdDYWxsYmFjaz1hLmRvbmVUcmFpbmluZ0NhbGxiYWNrLHRoaXMuc2l6ZT0wLHRoaXMuY291bnQ9MCx0aGlzLnN1bT0wLHRoaXMub24oXCJmaW5pc2hcIix0aGlzLmZpbmlzaFN0cmVhbUl0ZXJhdGlvbiksdGhpc312YXIgaT1hKFwidW5kZXJzY29yZVwiKSxqPWEoXCIuL2xvb2t1cFwiKSxrPWEoXCJzdHJlYW1cIikuV3JpdGFibGUsbD1hKFwiaW5oZXJpdHNcIiksbT1mdW5jdGlvbihhKXthPWF8fHt9LHRoaXMubGVhcm5pbmdSYXRlPWEubGVhcm5pbmdSYXRlfHwuMyx0aGlzLm1vbWVudHVtPWEubW9tZW50dW18fC4xLHRoaXMuaGlkZGVuU2l6ZXM9YS5oaWRkZW5MYXllcnMsdGhpcy5iaW5hcnlUaHJlc2g9YS5iaW5hcnlUaHJlc2h8fC41fTttLnByb3RvdHlwZT17aW5pdGlhbGl6ZTpmdW5jdGlvbihhKXt0aGlzLnNpemVzPWEsdGhpcy5vdXRwdXRMYXllcj10aGlzLnNpemVzLmxlbmd0aC0xLHRoaXMuYmlhc2VzPVtdLHRoaXMud2VpZ2h0cz1bXSx0aGlzLm91dHB1dHM9W10sdGhpcy5kZWx0YXM9W10sdGhpcy5jaGFuZ2VzPVtdLHRoaXMuZXJyb3JzPVtdO2Zvcih2YXIgYj0wO2I8PXRoaXMub3V0cHV0TGF5ZXI7YisrKXt2YXIgYz10aGlzLnNpemVzW2JdO2lmKHRoaXMuZGVsdGFzW2JdPWUoYyksdGhpcy5lcnJvcnNbYl09ZShjKSx0aGlzLm91dHB1dHNbYl09ZShjKSxiPjApe3RoaXMuYmlhc2VzW2JdPWYoYyksdGhpcy53ZWlnaHRzW2JdPW5ldyBBcnJheShjKSx0aGlzLmNoYW5nZXNbYl09bmV3IEFycmF5KGMpO2Zvcih2YXIgZD0wO2M+ZDtkKyspe3ZhciBnPXRoaXMuc2l6ZXNbYi0xXTt0aGlzLndlaWdodHNbYl1bZF09ZihnKSx0aGlzLmNoYW5nZXNbYl1bZF09ZShnKX19fX0scnVuOmZ1bmN0aW9uKGEpe3RoaXMuaW5wdXRMb29rdXAmJihhPWoudG9BcnJheSh0aGlzLmlucHV0TG9va3VwLGEpKTt2YXIgYj10aGlzLnJ1bklucHV0KGEpO3JldHVybiB0aGlzLm91dHB1dExvb2t1cCYmKGI9ai50b0hhc2godGhpcy5vdXRwdXRMb29rdXAsYikpLGJ9LHJ1bklucHV0OmZ1bmN0aW9uKGEpe3RoaXMub3V0cHV0c1swXT1hO2Zvcih2YXIgYj0xO2I8PXRoaXMub3V0cHV0TGF5ZXI7YisrKXtmb3IodmFyIGM9MDtjPHRoaXMuc2l6ZXNbYl07YysrKXtmb3IodmFyIGQ9dGhpcy53ZWlnaHRzW2JdW2NdLGU9dGhpcy5iaWFzZXNbYl1bY10sZj0wO2Y8ZC5sZW5ndGg7ZisrKWUrPWRbZl0qYVtmXTt0aGlzLm91dHB1dHNbYl1bY109MS8oMStNYXRoLmV4cCgtZSkpfXZhciBnPWE9dGhpcy5vdXRwdXRzW2JdfXJldHVybiBnfSx0cmFpbjpmdW5jdGlvbihhLGIpe2E9dGhpcy5mb3JtYXREYXRhKGEpLGI9Ynx8e307dmFyIGM9Yi5pdGVyYXRpb25zfHwyZTQsZD1iLmVycm9yVGhyZXNofHwuMDA1LGU9Yi5sb2d8fCExLGY9Yi5sb2dQZXJpb2R8fDEwLGc9Yi5jYWxsYmFjayxoPWIuY2FsbGJhY2tQZXJpb2R8fDEwLGo9YVswXS5pbnB1dC5sZW5ndGgsaz1hWzBdLm91dHB1dC5sZW5ndGgsbD10aGlzLmhpZGRlblNpemVzO2x8fChsPVtNYXRoLm1heCgzLE1hdGguZmxvb3Ioai8yKSldKTt2YXIgbT1pKFtqLGwsa10pLmZsYXR0ZW4oKTt0aGlzLmluaXRpYWxpemUobSk7Zm9yKHZhciBuPTEsbz0wO2M+byYmbj5kO28rKyl7Zm9yKHZhciBwPTAscT0wO3E8YS5sZW5ndGg7cSsrKXt2YXIgcj10aGlzLnRyYWluUGF0dGVybihhW3FdLmlucHV0LGFbcV0ub3V0cHV0KTtwKz1yfW49cC9hLmxlbmd0aCxlJiZvJWY9PTAmJmNvbnNvbGUubG9nKFwiaXRlcmF0aW9uczpcIixvLFwidHJhaW5pbmcgZXJyb3I6XCIsbiksZyYmbyVoPT0wJiZnKHtlcnJvcjpuLGl0ZXJhdGlvbnM6b30pfXJldHVybntlcnJvcjpuLGl0ZXJhdGlvbnM6b319LHRyYWluUGF0dGVybjpmdW5jdGlvbihhLGIpe3RoaXMucnVuSW5wdXQoYSksdGhpcy5jYWxjdWxhdGVEZWx0YXMoYiksdGhpcy5hZGp1c3RXZWlnaHRzKCk7dmFyIGM9Zyh0aGlzLmVycm9yc1t0aGlzLm91dHB1dExheWVyXSk7cmV0dXJuIGN9LGNhbGN1bGF0ZURlbHRhczpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5vdXRwdXRMYXllcjtiPj0wO2ItLSlmb3IodmFyIGM9MDtjPHRoaXMuc2l6ZXNbYl07YysrKXt2YXIgZD10aGlzLm91dHB1dHNbYl1bY10sZT0wO2lmKGI9PXRoaXMub3V0cHV0TGF5ZXIpZT1hW2NdLWQ7ZWxzZSBmb3IodmFyIGY9dGhpcy5kZWx0YXNbYisxXSxnPTA7ZzxmLmxlbmd0aDtnKyspZSs9ZltnXSp0aGlzLndlaWdodHNbYisxXVtnXVtjXTt0aGlzLmVycm9yc1tiXVtjXT1lLHRoaXMuZGVsdGFzW2JdW2NdPWUqZCooMS1kKX19LGFkanVzdFdlaWdodHM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9MTthPD10aGlzLm91dHB1dExheWVyO2ErKylmb3IodmFyIGI9dGhpcy5vdXRwdXRzW2EtMV0sYz0wO2M8dGhpcy5zaXplc1thXTtjKyspe2Zvcih2YXIgZD10aGlzLmRlbHRhc1thXVtjXSxlPTA7ZTxiLmxlbmd0aDtlKyspe3ZhciBmPXRoaXMuY2hhbmdlc1thXVtjXVtlXTtmPXRoaXMubGVhcm5pbmdSYXRlKmQqYltlXSt0aGlzLm1vbWVudHVtKmYsdGhpcy5jaGFuZ2VzW2FdW2NdW2VdPWYsdGhpcy53ZWlnaHRzW2FdW2NdW2VdKz1mfXRoaXMuYmlhc2VzW2FdW2NdKz10aGlzLmxlYXJuaW5nUmF0ZSpkfX0sZm9ybWF0RGF0YTpmdW5jdGlvbihhKXtpZighaS5pc0FycmF5KGEpKXt2YXIgYj1bXTtiLnB1c2goYSksYT1ifXZhciBjPWFbMF0uaW5wdXQ7cmV0dXJuIGkoYykuaXNBcnJheSgpfHxjIGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5fHwodGhpcy5pbnB1dExvb2t1cHx8KHRoaXMuaW5wdXRMb29rdXA9ai5idWlsZExvb2t1cChpKGEpLnBsdWNrKFwiaW5wdXRcIikpKSxhPWEubWFwKGZ1bmN0aW9uKGEpe3ZhciBiPWoudG9BcnJheSh0aGlzLmlucHV0TG9va3VwLGEuaW5wdXQpO3JldHVybiBpKGkoYSkuY2xvbmUoKSkuZXh0ZW5kKHtpbnB1dDpifSl9LHRoaXMpKSxpKGFbMF0ub3V0cHV0KS5pc0FycmF5KCl8fCh0aGlzLm91dHB1dExvb2t1cHx8KHRoaXMub3V0cHV0TG9va3VwPWouYnVpbGRMb29rdXAoaShhKS5wbHVjayhcIm91dHB1dFwiKSkpLGE9YS5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9ai50b0FycmF5KHRoaXMub3V0cHV0TG9va3VwLGEub3V0cHV0KTtyZXR1cm4gaShpKGEpLmNsb25lKCkpLmV4dGVuZCh7b3V0cHV0OmJ9KX0sdGhpcykpLGF9LHRlc3Q6ZnVuY3Rpb24oYSl7YT10aGlzLmZvcm1hdERhdGEoYSk7Zm9yKHZhciBiPTE9PWFbMF0ub3V0cHV0Lmxlbmd0aCxjPTAsZD0wLGU9MCxmPTAsaD1bXSxqPTAsaz0wO2s8YS5sZW5ndGg7aysrKXt2YXIgbCxtLG49dGhpcy5ydW5JbnB1dChhW2tdLmlucHV0KSxvPWFba10ub3V0cHV0O2lmKGI/KGw9blswXT50aGlzLmJpbmFyeVRocmVzaD8xOjAsbT1vWzBdKToobD1uLmluZGV4T2YoaShuKS5tYXgoKSksbT1vLmluZGV4T2YoaShvKS5tYXgoKSkpLGwhPW0pe3ZhciBwPWFba107aShwKS5leHRlbmQoe2FjdHVhbDpsLGV4cGVjdGVkOm19KSxoLnB1c2gocCl9YiYmKDA9PWwmJjA9PW0/ZisrOjE9PWwmJjE9PW0/ZSsrOjA9PWwmJjE9PW0/ZCsrOjE9PWwmJjA9PW0mJmMrKyk7dmFyIHE9bi5tYXAoZnVuY3Rpb24oYSxiKXtyZXR1cm4gb1tiXS1hfSk7ais9ZyhxKX12YXIgcj1qL2EubGVuZ3RoLHM9e2Vycm9yOnIsbWlzY2xhc3NlczpofTtyZXR1cm4gYiYmaShzKS5leHRlbmQoe3RydWVOZWc6Zix0cnVlUG9zOmUsZmFsc2VOZWc6ZCxmYWxzZVBvczpjLHRvdGFsOmEubGVuZ3RoLHByZWNpc2lvbjplLyhlK2MpLHJlY2FsbDplLyhlK2QpLGFjY3VyYWN5OihmK2UpL2EubGVuZ3RofSksc30sdG9KU09OOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdLGI9MDtiPD10aGlzLm91dHB1dExheWVyO2IrKyl7YVtiXT17fTt2YXIgYztjPTA9PWImJnRoaXMuaW5wdXRMb29rdXA/aSh0aGlzLmlucHV0TG9va3VwKS5rZXlzKCk6Yj09dGhpcy5vdXRwdXRMYXllciYmdGhpcy5vdXRwdXRMb29rdXA/aSh0aGlzLm91dHB1dExvb2t1cCkua2V5cygpOmkucmFuZ2UoMCx0aGlzLnNpemVzW2JdKTtmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIGU9Y1tkXTtpZihhW2JdW2VdPXt9LGI+MCl7YVtiXVtlXS5iaWFzPXRoaXMuYmlhc2VzW2JdW2RdLGFbYl1bZV0ud2VpZ2h0cz17fTtmb3IodmFyIGYgaW4gYVtiLTFdKXt2YXIgZz1mOzE9PWImJnRoaXMuaW5wdXRMb29rdXAmJihnPXRoaXMuaW5wdXRMb29rdXBbZl0pLGFbYl1bZV0ud2VpZ2h0c1tmXT10aGlzLndlaWdodHNbYl1bZF1bZ119fX19cmV0dXJue2xheWVyczphLG91dHB1dExvb2t1cDohIXRoaXMub3V0cHV0TG9va3VwLGlucHV0TG9va3VwOiEhdGhpcy5pbnB1dExvb2t1cH19LGZyb21KU09OOmZ1bmN0aW9uKGEpe3ZhciBiPWEubGF5ZXJzLmxlbmd0aDt0aGlzLm91dHB1dExheWVyPWItMSx0aGlzLnNpemVzPW5ldyBBcnJheShiKSx0aGlzLndlaWdodHM9bmV3IEFycmF5KGIpLHRoaXMuYmlhc2VzPW5ldyBBcnJheShiKSx0aGlzLm91dHB1dHM9bmV3IEFycmF5KGIpO2Zvcih2YXIgYz0wO2M8PXRoaXMub3V0cHV0TGF5ZXI7YysrKXt2YXIgZD1hLmxheWVyc1tjXTswIT1jfHxkWzBdJiYhYS5pbnB1dExvb2t1cD9jIT10aGlzLm91dHB1dExheWVyfHxkWzBdJiYhYS5vdXRwdXRMb29rdXB8fCh0aGlzLm91dHB1dExvb2t1cD1qLmxvb2t1cEZyb21IYXNoKGQpKTp0aGlzLmlucHV0TG9va3VwPWoubG9va3VwRnJvbUhhc2goZCk7dmFyIGU9aShkKS5rZXlzKCk7dGhpcy5zaXplc1tjXT1lLmxlbmd0aCx0aGlzLndlaWdodHNbY109W10sdGhpcy5iaWFzZXNbY109W10sdGhpcy5vdXRwdXRzW2NdPVtdO2Zvcih2YXIgZiBpbiBlKXt2YXIgZz1lW2ZdO3RoaXMuYmlhc2VzW2NdW2ZdPWRbZ10uYmlhcyx0aGlzLndlaWdodHNbY11bZl09aShkW2ddLndlaWdodHMpLnRvQXJyYXkoKX19cmV0dXJuIHRoaXN9LHRvRnVuY3Rpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRvSlNPTigpO3JldHVybiBuZXcgRnVuY3Rpb24oXCJpbnB1dFwiLFwiICB2YXIgbmV0ID0gXCIrSlNPTi5zdHJpbmdpZnkoYSkrXCI7XFxuXFxuICBmb3IgKHZhciBpID0gMTsgaSA8IG5ldC5sYXllcnMubGVuZ3RoOyBpKyspIHtcXG4gICAgdmFyIGxheWVyID0gbmV0LmxheWVyc1tpXTtcXG4gICAgdmFyIG91dHB1dCA9IHt9O1xcbiAgICBcXG4gICAgZm9yICh2YXIgaWQgaW4gbGF5ZXIpIHtcXG4gICAgICB2YXIgbm9kZSA9IGxheWVyW2lkXTtcXG4gICAgICB2YXIgc3VtID0gbm9kZS5iaWFzO1xcbiAgICAgIFxcbiAgICAgIGZvciAodmFyIGlpZCBpbiBub2RlLndlaWdodHMpIHtcXG4gICAgICAgIHN1bSArPSBub2RlLndlaWdodHNbaWlkXSAqIGlucHV0W2lpZF07XFxuICAgICAgfVxcbiAgICAgIG91dHB1dFtpZF0gPSAoMSAvICgxICsgTWF0aC5leHAoLXN1bSkpKTtcXG4gICAgfVxcbiAgICBpbnB1dCA9IG91dHB1dDtcXG4gIH1cXG4gIHJldHVybiBvdXRwdXQ7XCIpfSxjcmVhdGVUcmFpblN0cmVhbTpmdW5jdGlvbihhKXtyZXR1cm4gYT1hfHx7fSxhLm5ldXJhbE5ldHdvcms9dGhpcyx0aGlzLnRyYWluU3RyZWFtPW5ldyBoKGEpLHRoaXMudHJhaW5TdHJlYW19fSxjLk5ldXJhbE5ldHdvcms9bSxsKGgsayksaC5wcm90b3R5cGUuX3dyaXRlPWZ1bmN0aW9uKGEsYixjKXtpZighYSlyZXR1cm4gdGhpcy5lbWl0KFwiZmluaXNoXCIpLGMoKTtpZighdGhpcy5kYXRhRm9ybWF0RGV0ZXJtaW5lZClyZXR1cm4gdGhpcy5zaXplKyssdGhpcy5pbnB1dEtleXM9aS51bmlvbih0aGlzLmlucHV0S2V5cyxpLmtleXMoYS5pbnB1dCkpLHRoaXMub3V0cHV0S2V5cz1pLnVuaW9uKHRoaXMub3V0cHV0S2V5cyxpLmtleXMoYS5vdXRwdXQpKSx0aGlzLmZpcnN0RGF0dW09dGhpcy5maXJzdERhdHVtfHxhLGMoKTt0aGlzLmNvdW50Kys7dmFyIGQ9dGhpcy5uZXVyYWxOZXR3b3JrLmZvcm1hdERhdGEoYSk7dGhpcy50cmFpbkRhdHVtKGRbMF0pLGMoKX0saC5wcm90b3R5cGUudHJhaW5EYXR1bT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLm5ldXJhbE5ldHdvcmsudHJhaW5QYXR0ZXJuKGEuaW5wdXQsYS5vdXRwdXQpO3RoaXMuc3VtKz1ifSxoLnByb3RvdHlwZS5maW5pc2hTdHJlYW1JdGVyYXRpb249ZnVuY3Rpb24oKXtpZih0aGlzLmRhdGFGb3JtYXREZXRlcm1pbmVkJiZ0aGlzLnNpemUhPT10aGlzLmNvdW50JiZjb25zb2xlLmxvZyhcIlRoaXMgaXRlcmF0aW9uJ3MgZGF0YSBsZW5ndGggd2FzIGRpZmZlcmVudCBmcm9tIHRoZSBmaXJzdC5cIiksIXRoaXMuZGF0YUZvcm1hdERldGVybWluZWQpe3RoaXMubmV1cmFsTmV0d29yay5pbnB1dExvb2t1cD1qLmxvb2t1cEZyb21BcnJheSh0aGlzLmlucHV0S2V5cyksdGhpcy5uZXVyYWxOZXR3b3JrLm91dHB1dExvb2t1cD1qLmxvb2t1cEZyb21BcnJheSh0aGlzLm91dHB1dEtleXMpO3ZhciBhPXRoaXMubmV1cmFsTmV0d29yay5mb3JtYXREYXRhKHRoaXMuZmlyc3REYXR1bSksYj1hWzBdLmlucHV0Lmxlbmd0aCxjPWFbMF0ub3V0cHV0Lmxlbmd0aCxkPXRoaXMuaGlkZGVuU2l6ZXM7ZHx8KGQ9W01hdGgubWF4KDMsTWF0aC5mbG9vcihiLzIpKV0pO3ZhciBlPWkoW2IsZCxjXSkuZmxhdHRlbigpO3JldHVybiB0aGlzLmRhdGFGb3JtYXREZXRlcm1pbmVkPSEwLHRoaXMubmV1cmFsTmV0d29yay5pbml0aWFsaXplKGUpLHZvaWQoXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5mbG9vZENhbGxiYWNrJiZ0aGlzLmZsb29kQ2FsbGJhY2soKSl9dmFyIGY9dGhpcy5zdW0vdGhpcy5zaXplO2lmKHRoaXMubG9nJiZ0aGlzLmkldGhpcy5sb2dQZXJpb2Q9PTAmJmNvbnNvbGUubG9nKFwiaXRlcmF0aW9uczpcIix0aGlzLmksXCJ0cmFpbmluZyBlcnJvcjpcIixmKSx0aGlzLmNhbGxiYWNrJiZ0aGlzLmkldGhpcy5jYWxsYmFja1BlcmlvZD09MCYmdGhpcy5jYWxsYmFjayh7ZXJyb3I6ZixpdGVyYXRpb25zOnRoaXMuaX0pLHRoaXMuc3VtPTAsdGhpcy5jb3VudD0wLHRoaXMuaSsrLHRoaXMuaTx0aGlzLml0ZXJhdGlvbnMmJmY+dGhpcy5lcnJvclRocmVzaCl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5mbG9vZENhbGxiYWNrKXJldHVybiB0aGlzLmZsb29kQ2FsbGJhY2soKX1lbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuZG9uZVRyYWluaW5nQ2FsbGJhY2spcmV0dXJuIHRoaXMuZG9uZVRyYWluaW5nQ2FsbGJhY2soe2Vycm9yOmYsaXRlcmF0aW9uczp0aGlzLml9KX19LHtcIi4vbG9va3VwXCI6NCxpbmhlcml0czoxOSxzdHJlYW06MTIsdW5kZXJzY29yZToyMH1dLDY6W2Z1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEsYixjKXtpZighKHRoaXMgaW5zdGFuY2VvZiBkKSlyZXR1cm4gbmV3IGQoYSxiLGMpO3ZhciBlPXR5cGVvZiBhO2lmKFwiYmFzZTY0XCI9PT1iJiZcInN0cmluZ1wiPT09ZSlmb3IoYT1DKGEpO2EubGVuZ3RoJTQhPT0wOylhKz1cIj1cIjt2YXIgZjtpZihcIm51bWJlclwiPT09ZSlmPUYoYSk7ZWxzZSBpZihcInN0cmluZ1wiPT09ZSlmPWQuYnl0ZUxlbmd0aChhLGIpO2Vsc2V7aWYoXCJvYmplY3RcIiE9PWUpdGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgYXJndW1lbnQgbmVlZHMgdG8gYmUgYSBudW1iZXIsIGFycmF5IG9yIHN0cmluZy5cIik7Zj1GKGEubGVuZ3RoKX12YXIgZztkLl91c2VUeXBlZEFycmF5cz9nPUQobmV3IFVpbnQ4QXJyYXkoZikpOihnPXRoaXMsZy5sZW5ndGg9ZixnLl9pc0J1ZmZlcj0hMCk7dmFyIGg7aWYoZC5fdXNlVHlwZWRBcnJheXMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFVpbnQ4QXJyYXkmJmEgaW5zdGFuY2VvZiBVaW50OEFycmF5KWcuX3NldChhKTtlbHNlIGlmKEgoYSkpZm9yKGg9MDtmPmg7aCsrKWdbaF09ZC5pc0J1ZmZlcihhKT9hLnJlYWRVSW50OChoKTphW2hdO2Vsc2UgaWYoXCJzdHJpbmdcIj09PWUpZy53cml0ZShhLDAsYik7ZWxzZSBpZihcIm51bWJlclwiPT09ZSYmIWQuX3VzZVR5cGVkQXJyYXlzJiYhYylmb3IoaD0wO2Y+aDtoKyspZ1toXT0wO3JldHVybiBnfWZ1bmN0aW9uIGUoYSxiLGMsZSl7Yz1OdW1iZXIoYyl8fDA7dmFyIGY9YS5sZW5ndGgtYztlPyhlPU51bWJlcihlKSxlPmYmJihlPWYpKTplPWY7dmFyIGc9Yi5sZW5ndGg7UyhnJTI9PT0wLFwiSW52YWxpZCBoZXggc3RyaW5nXCIpLGU+Zy8yJiYoZT1nLzIpO2Zvcih2YXIgaD0wO2U+aDtoKyspe3ZhciBpPXBhcnNlSW50KGIuc3Vic3RyKDIqaCwyKSwxNik7UyghaXNOYU4oaSksXCJJbnZhbGlkIGhleCBzdHJpbmdcIiksYVtjK2hdPWl9cmV0dXJuIGQuX2NoYXJzV3JpdHRlbj0yKmgsaH1mdW5jdGlvbiBmKGEsYixjLGUpe3ZhciBmPWQuX2NoYXJzV3JpdHRlbj1OKEooYiksYSxjLGUpO3JldHVybiBmfWZ1bmN0aW9uIGcoYSxiLGMsZSl7dmFyIGY9ZC5fY2hhcnNXcml0dGVuPU4oSyhiKSxhLGMsZSk7cmV0dXJuIGZ9ZnVuY3Rpb24gaChhLGIsYyxkKXtyZXR1cm4gZyhhLGIsYyxkKX1mdW5jdGlvbiBpKGEsYixjLGUpe3ZhciBmPWQuX2NoYXJzV3JpdHRlbj1OKE0oYiksYSxjLGUpO3JldHVybiBmfWZ1bmN0aW9uIGooYSxiLGMsZSl7dmFyIGY9ZC5fY2hhcnNXcml0dGVuPU4oTChiKSxhLGMsZSk7cmV0dXJuIGZ9ZnVuY3Rpb24gayhhLGIsYyl7cmV0dXJuIFQuZnJvbUJ5dGVBcnJheSgwPT09YiYmYz09PWEubGVuZ3RoP2E6YS5zbGljZShiLGMpKX1mdW5jdGlvbiBsKGEsYixjKXt2YXIgZD1cIlwiLGU9XCJcIjtjPU1hdGgubWluKGEubGVuZ3RoLGMpO2Zvcih2YXIgZj1iO2M+ZjtmKyspYVtmXTw9MTI3PyhkKz1PKGUpK1N0cmluZy5mcm9tQ2hhckNvZGUoYVtmXSksZT1cIlwiKTplKz1cIiVcIithW2ZdLnRvU3RyaW5nKDE2KTtyZXR1cm4gZCtPKGUpfWZ1bmN0aW9uIG0oYSxiLGMpe3ZhciBkPVwiXCI7Yz1NYXRoLm1pbihhLmxlbmd0aCxjKTtmb3IodmFyIGU9YjtjPmU7ZSsrKWQrPVN0cmluZy5mcm9tQ2hhckNvZGUoYVtlXSk7cmV0dXJuIGR9ZnVuY3Rpb24gbihhLGIsYyl7cmV0dXJuIG0oYSxiLGMpfWZ1bmN0aW9uIG8oYSxiLGMpe3ZhciBkPWEubGVuZ3RoOyghYnx8MD5iKSYmKGI9MCksKCFjfHwwPmN8fGM+ZCkmJihjPWQpO2Zvcih2YXIgZT1cIlwiLGY9YjtjPmY7ZisrKWUrPUkoYVtmXSk7cmV0dXJuIGV9ZnVuY3Rpb24gcChhLGIsYyl7Zm9yKHZhciBkPWEuc2xpY2UoYixjKSxlPVwiXCIsZj0wO2Y8ZC5sZW5ndGg7Zis9MillKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGRbZl0rMjU2KmRbZisxXSk7cmV0dXJuIGV9ZnVuY3Rpb24gcShhLGIsYyxkKXtkfHwoUyhcImJvb2xlYW5cIj09dHlwZW9mIGMsXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuXCIpLFModm9pZCAwIT09YiYmbnVsbCE9PWIsXCJtaXNzaW5nIG9mZnNldFwiKSxTKGIrMTxhLmxlbmd0aCxcIlRyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpKTt2YXIgZT1hLmxlbmd0aDtpZighKGI+PWUpKXt2YXIgZjtyZXR1cm4gYz8oZj1hW2JdLGU+YisxJiYoZnw9YVtiKzFdPDw4KSk6KGY9YVtiXTw8OCxlPmIrMSYmKGZ8PWFbYisxXSkpLGZ9fWZ1bmN0aW9uIHIoYSxiLGMsZCl7ZHx8KFMoXCJib29sZWFuXCI9PXR5cGVvZiBjLFwibWlzc2luZyBvciBpbnZhbGlkIGVuZGlhblwiKSxTKHZvaWQgMCE9PWImJm51bGwhPT1iLFwibWlzc2luZyBvZmZzZXRcIiksUyhiKzM8YS5sZW5ndGgsXCJUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSk7dmFyIGU9YS5sZW5ndGg7aWYoIShiPj1lKSl7dmFyIGY7cmV0dXJuIGM/KGU+YisyJiYoZj1hW2IrMl08PDE2KSxlPmIrMSYmKGZ8PWFbYisxXTw8OCksZnw9YVtiXSxlPmIrMyYmKGYrPWFbYiszXTw8MjQ+Pj4wKSk6KGU+YisxJiYoZj1hW2IrMV08PDE2KSxlPmIrMiYmKGZ8PWFbYisyXTw8OCksZT5iKzMmJihmfD1hW2IrM10pLGYrPWFbYl08PDI0Pj4+MCksZn19ZnVuY3Rpb24gcyhhLGIsYyxkKXtkfHwoUyhcImJvb2xlYW5cIj09dHlwZW9mIGMsXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuXCIpLFModm9pZCAwIT09YiYmbnVsbCE9PWIsXCJtaXNzaW5nIG9mZnNldFwiKSxTKGIrMTxhLmxlbmd0aCxcIlRyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpKTt2YXIgZT1hLmxlbmd0aDtpZighKGI+PWUpKXt2YXIgZj1xKGEsYixjLCEwKSxnPTMyNzY4JmY7cmV0dXJuIGc/LTEqKDY1NTM1LWYrMSk6Zn19ZnVuY3Rpb24gdChhLGIsYyxkKXtkfHwoUyhcImJvb2xlYW5cIj09dHlwZW9mIGMsXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuXCIpLFModm9pZCAwIT09YiYmbnVsbCE9PWIsXCJtaXNzaW5nIG9mZnNldFwiKSxTKGIrMzxhLmxlbmd0aCxcIlRyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpKTt2YXIgZT1hLmxlbmd0aDtpZighKGI+PWUpKXt2YXIgZj1yKGEsYixjLCEwKSxnPTIxNDc0ODM2NDgmZjtyZXR1cm4gZz8tMSooNDI5NDk2NzI5NS1mKzEpOmZ9fWZ1bmN0aW9uIHUoYSxiLGMsZCl7cmV0dXJuIGR8fChTKFwiYm9vbGVhblwiPT10eXBlb2YgYyxcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksUyhiKzM8YS5sZW5ndGgsXCJUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSksVS5yZWFkKGEsYixjLDIzLDQpfWZ1bmN0aW9uIHYoYSxiLGMsZCl7cmV0dXJuIGR8fChTKFwiYm9vbGVhblwiPT10eXBlb2YgYyxcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksUyhiKzc8YS5sZW5ndGgsXCJUcnlpbmcgdG8gcmVhZCBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSksVS5yZWFkKGEsYixjLDUyLDgpfWZ1bmN0aW9uIHcoYSxiLGMsZCxlKXtlfHwoUyh2b2lkIDAhPT1iJiZudWxsIT09YixcIm1pc3NpbmcgdmFsdWVcIiksUyhcImJvb2xlYW5cIj09dHlwZW9mIGQsXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuXCIpLFModm9pZCAwIT09YyYmbnVsbCE9PWMsXCJtaXNzaW5nIG9mZnNldFwiKSxTKGMrMTxhLmxlbmd0aCxcInRyeWluZyB0byB3cml0ZSBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSxQKGIsNjU1MzUpKTt2YXIgZj1hLmxlbmd0aDtpZighKGM+PWYpKWZvcih2YXIgZz0wLGg9TWF0aC5taW4oZi1jLDIpO2g+ZztnKyspYVtjK2ddPShiJjI1NTw8OCooZD9nOjEtZykpPj4+OCooZD9nOjEtZyl9ZnVuY3Rpb24geChhLGIsYyxkLGUpe2V8fChTKHZvaWQgMCE9PWImJm51bGwhPT1iLFwibWlzc2luZyB2YWx1ZVwiKSxTKFwiYm9vbGVhblwiPT10eXBlb2YgZCxcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksUyh2b2lkIDAhPT1jJiZudWxsIT09YyxcIm1pc3Npbmcgb2Zmc2V0XCIpLFMoYyszPGEubGVuZ3RoLFwidHJ5aW5nIHRvIHdyaXRlIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpLFAoYiw0Mjk0OTY3Mjk1KSk7dmFyIGY9YS5sZW5ndGg7aWYoIShjPj1mKSlmb3IodmFyIGc9MCxoPU1hdGgubWluKGYtYyw0KTtoPmc7ZysrKWFbYytnXT1iPj4+OCooZD9nOjMtZykmMjU1fWZ1bmN0aW9uIHkoYSxiLGMsZCxlKXtlfHwoUyh2b2lkIDAhPT1iJiZudWxsIT09YixcIm1pc3NpbmcgdmFsdWVcIiksUyhcImJvb2xlYW5cIj09dHlwZW9mIGQsXCJtaXNzaW5nIG9yIGludmFsaWQgZW5kaWFuXCIpLFModm9pZCAwIT09YyYmbnVsbCE9PWMsXCJtaXNzaW5nIG9mZnNldFwiKSxTKGMrMTxhLmxlbmd0aCxcIlRyeWluZyB0byB3cml0ZSBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSxRKGIsMzI3NjcsLTMyNzY4KSk7dmFyIGY9YS5sZW5ndGg7Yz49Znx8KGI+PTA/dyhhLGIsYyxkLGUpOncoYSw2NTUzNStiKzEsYyxkLGUpKX1mdW5jdGlvbiB6KGEsYixjLGQsZSl7ZXx8KFModm9pZCAwIT09YiYmbnVsbCE9PWIsXCJtaXNzaW5nIHZhbHVlXCIpLFMoXCJib29sZWFuXCI9PXR5cGVvZiBkLFwibWlzc2luZyBvciBpbnZhbGlkIGVuZGlhblwiKSxTKHZvaWQgMCE9PWMmJm51bGwhPT1jLFwibWlzc2luZyBvZmZzZXRcIiksUyhjKzM8YS5sZW5ndGgsXCJUcnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIiksUShiLDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpKTt2YXIgZj1hLmxlbmd0aDtjPj1mfHwoYj49MD94KGEsYixjLGQsZSk6eChhLDQyOTQ5NjcyOTUrYisxLGMsZCxlKSl9ZnVuY3Rpb24gQShhLGIsYyxkLGUpe2V8fChTKHZvaWQgMCE9PWImJm51bGwhPT1iLFwibWlzc2luZyB2YWx1ZVwiKSxTKFwiYm9vbGVhblwiPT10eXBlb2YgZCxcIm1pc3Npbmcgb3IgaW52YWxpZCBlbmRpYW5cIiksUyh2b2lkIDAhPT1jJiZudWxsIT09YyxcIm1pc3Npbmcgb2Zmc2V0XCIpLFMoYyszPGEubGVuZ3RoLFwiVHJ5aW5nIHRvIHdyaXRlIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpLFIoYiwzLjQwMjgyMzQ2NjM4NTI4ODZlMzgsLTMuNDAyODIzNDY2Mzg1Mjg4NmUzOCkpO3ZhciBmPWEubGVuZ3RoO2M+PWZ8fFUud3JpdGUoYSxiLGMsZCwyMyw0KX1mdW5jdGlvbiBCKGEsYixjLGQsZSl7ZXx8KFModm9pZCAwIT09YiYmbnVsbCE9PWIsXCJtaXNzaW5nIHZhbHVlXCIpLFMoXCJib29sZWFuXCI9PXR5cGVvZiBkLFwibWlzc2luZyBvciBpbnZhbGlkIGVuZGlhblwiKSxTKHZvaWQgMCE9PWMmJm51bGwhPT1jLFwibWlzc2luZyBvZmZzZXRcIiksUyhjKzc8YS5sZW5ndGgsXCJUcnlpbmcgdG8gd3JpdGUgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIiksUihiLDEuNzk3NjkzMTM0ODYyMzE1N2UzMDgsLTEuNzk3NjkzMTM0ODYyMzE1N2UzMDgpKTt2YXIgZj1hLmxlbmd0aDtjPj1mfHxVLndyaXRlKGEsYixjLGQsNTIsOCl9ZnVuY3Rpb24gQyhhKXtyZXR1cm4gYS50cmltP2EudHJpbSgpOmEucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX1mdW5jdGlvbiBEKGEpe3JldHVybiBhLl9pc0J1ZmZlcj0hMCxhLl9nZXQ9YS5nZXQsYS5fc2V0PWEuc2V0LGEuZ2V0PVYuZ2V0LGEuc2V0PVYuc2V0LGEud3JpdGU9Vi53cml0ZSxhLnRvU3RyaW5nPVYudG9TdHJpbmcsYS50b0xvY2FsZVN0cmluZz1WLnRvU3RyaW5nLGEudG9KU09OPVYudG9KU09OLGEuY29weT1WLmNvcHksYS5zbGljZT1WLnNsaWNlLGEucmVhZFVJbnQ4PVYucmVhZFVJbnQ4LGEucmVhZFVJbnQxNkxFPVYucmVhZFVJbnQxNkxFLGEucmVhZFVJbnQxNkJFPVYucmVhZFVJbnQxNkJFLGEucmVhZFVJbnQzMkxFPVYucmVhZFVJbnQzMkxFLGEucmVhZFVJbnQzMkJFPVYucmVhZFVJbnQzMkJFLGEucmVhZEludDg9Vi5yZWFkSW50OCxhLnJlYWRJbnQxNkxFPVYucmVhZEludDE2TEUsYS5yZWFkSW50MTZCRT1WLnJlYWRJbnQxNkJFLGEucmVhZEludDMyTEU9Vi5yZWFkSW50MzJMRSxhLnJlYWRJbnQzMkJFPVYucmVhZEludDMyQkUsYS5yZWFkRmxvYXRMRT1WLnJlYWRGbG9hdExFLGEucmVhZEZsb2F0QkU9Vi5yZWFkRmxvYXRCRSxhLnJlYWREb3VibGVMRT1WLnJlYWREb3VibGVMRSxhLnJlYWREb3VibGVCRT1WLnJlYWREb3VibGVCRSxhLndyaXRlVUludDg9Vi53cml0ZVVJbnQ4LGEud3JpdGVVSW50MTZMRT1WLndyaXRlVUludDE2TEUsYS53cml0ZVVJbnQxNkJFPVYud3JpdGVVSW50MTZCRSxhLndyaXRlVUludDMyTEU9Vi53cml0ZVVJbnQzMkxFLGEud3JpdGVVSW50MzJCRT1WLndyaXRlVUludDMyQkUsYS53cml0ZUludDg9Vi53cml0ZUludDgsYS53cml0ZUludDE2TEU9Vi53cml0ZUludDE2TEUsYS53cml0ZUludDE2QkU9Vi53cml0ZUludDE2QkUsYS53cml0ZUludDMyTEU9Vi53cml0ZUludDMyTEUsYS53cml0ZUludDMyQkU9Vi53cml0ZUludDMyQkUsYS53cml0ZUZsb2F0TEU9Vi53cml0ZUZsb2F0TEUsYS53cml0ZUZsb2F0QkU9Vi53cml0ZUZsb2F0QkUsYS53cml0ZURvdWJsZUxFPVYud3JpdGVEb3VibGVMRSxhLndyaXRlRG91YmxlQkU9Vi53cml0ZURvdWJsZUJFLGEuZmlsbD1WLmZpbGwsYS5pbnNwZWN0PVYuaW5zcGVjdCxhLnRvQXJyYXlCdWZmZXI9Vi50b0FycmF5QnVmZmVyLGF9ZnVuY3Rpb24gRShhLGIsYyl7cmV0dXJuXCJudW1iZXJcIiE9dHlwZW9mIGE/YzooYT1+fmEsYT49Yj9iOmE+PTA/YTooYSs9YixhPj0wP2E6MCkpfWZ1bmN0aW9uIEYoYSl7cmV0dXJuIGE9fn5NYXRoLmNlaWwoK2EpLDA+YT8wOmF9ZnVuY3Rpb24gRyhhKXtyZXR1cm4oQXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24oYSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfSkoYSl9ZnVuY3Rpb24gSChhKXtyZXR1cm4gRyhhKXx8ZC5pc0J1ZmZlcihhKXx8YSYmXCJvYmplY3RcIj09dHlwZW9mIGEmJlwibnVtYmVyXCI9PXR5cGVvZiBhLmxlbmd0aH1mdW5jdGlvbiBJKGEpe3JldHVybiAxNj5hP1wiMFwiK2EudG9TdHJpbmcoMTYpOmEudG9TdHJpbmcoMTYpfWZ1bmN0aW9uIEooYSl7Zm9yKHZhciBiPVtdLGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YS5jaGFyQ29kZUF0KGMpO2lmKDEyNz49ZCliLnB1c2goYS5jaGFyQ29kZUF0KGMpKTtlbHNle3ZhciBlPWM7ZD49NTUyOTYmJjU3MzQzPj1kJiZjKys7Zm9yKHZhciBmPWVuY29kZVVSSUNvbXBvbmVudChhLnNsaWNlKGUsYysxKSkuc3Vic3RyKDEpLnNwbGl0KFwiJVwiKSxnPTA7ZzxmLmxlbmd0aDtnKyspYi5wdXNoKHBhcnNlSW50KGZbZ10sMTYpKX19cmV0dXJuIGJ9ZnVuY3Rpb24gSyhhKXtmb3IodmFyIGI9W10sYz0wO2M8YS5sZW5ndGg7YysrKWIucHVzaCgyNTUmYS5jaGFyQ29kZUF0KGMpKTtyZXR1cm4gYn1mdW5jdGlvbiBMKGEpe2Zvcih2YXIgYixjLGQsZT1bXSxmPTA7ZjxhLmxlbmd0aDtmKyspYj1hLmNoYXJDb2RlQXQoZiksYz1iPj44LGQ9YiUyNTYsZS5wdXNoKGQpLGUucHVzaChjKTtyZXR1cm4gZX1mdW5jdGlvbiBNKGEpe3JldHVybiBULnRvQnl0ZUFycmF5KGEpfWZ1bmN0aW9uIE4oYSxiLGMsZCl7Zm9yKHZhciBlPTA7ZD5lJiYhKGUrYz49Yi5sZW5ndGh8fGU+PWEubGVuZ3RoKTtlKyspYltlK2NdPWFbZV07cmV0dXJuIGV9ZnVuY3Rpb24gTyhhKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChhKX1jYXRjaChiKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSg2NTUzMyl9fWZ1bmN0aW9uIFAoYSxiKXtTKFwibnVtYmVyXCI9PXR5cGVvZiBhLFwiY2Fubm90IHdyaXRlIGEgbm9uLW51bWJlciBhcyBhIG51bWJlclwiKSxTKGE+PTAsXCJzcGVjaWZpZWQgYSBuZWdhdGl2ZSB2YWx1ZSBmb3Igd3JpdGluZyBhbiB1bnNpZ25lZCB2YWx1ZVwiKSxTKGI+PWEsXCJ2YWx1ZSBpcyBsYXJnZXIgdGhhbiBtYXhpbXVtIHZhbHVlIGZvciB0eXBlXCIpLFMoTWF0aC5mbG9vcihhKT09PWEsXCJ2YWx1ZSBoYXMgYSBmcmFjdGlvbmFsIGNvbXBvbmVudFwiKX1mdW5jdGlvbiBRKGEsYixjKXtTKFwibnVtYmVyXCI9PXR5cGVvZiBhLFwiY2Fubm90IHdyaXRlIGEgbm9uLW51bWJlciBhcyBhIG51bWJlclwiKSxTKGI+PWEsXCJ2YWx1ZSBsYXJnZXIgdGhhbiBtYXhpbXVtIGFsbG93ZWQgdmFsdWVcIiksUyhhPj1jLFwidmFsdWUgc21hbGxlciB0aGFuIG1pbmltdW0gYWxsb3dlZCB2YWx1ZVwiKSxTKE1hdGguZmxvb3IoYSk9PT1hLFwidmFsdWUgaGFzIGEgZnJhY3Rpb25hbCBjb21wb25lbnRcIil9ZnVuY3Rpb24gUihhLGIsYyl7UyhcIm51bWJlclwiPT10eXBlb2YgYSxcImNhbm5vdCB3cml0ZSBhIG5vbi1udW1iZXIgYXMgYSBudW1iZXJcIiksUyhiPj1hLFwidmFsdWUgbGFyZ2VyIHRoYW4gbWF4aW11bSBhbGxvd2VkIHZhbHVlXCIpLFMoYT49YyxcInZhbHVlIHNtYWxsZXIgdGhhbiBtaW5pbXVtIGFsbG93ZWQgdmFsdWVcIil9ZnVuY3Rpb24gUyhhLGIpe2lmKCFhKXRocm93IG5ldyBFcnJvcihifHxcIkZhaWxlZCBhc3NlcnRpb25cIil9dmFyIFQ9YShcImJhc2U2NC1qc1wiKSxVPWEoXCJpZWVlNzU0XCIpO2MuQnVmZmVyPWQsYy5TbG93QnVmZmVyPWQsYy5JTlNQRUNUX01BWF9CWVRFUz01MCxkLnBvb2xTaXplPTgxOTIsZC5fdXNlVHlwZWRBcnJheXM9ZnVuY3Rpb24oKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBVaW50OEFycmF5fHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBBcnJheUJ1ZmZlcilyZXR1cm4hMTt0cnl7dmFyIGE9bmV3IFVpbnQ4QXJyYXkoMCk7cmV0dXJuIGEuZm9vPWZ1bmN0aW9uKCl7cmV0dXJuIDQyfSw0Mj09PWEuZm9vKCkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuc3ViYXJyYXl9Y2F0Y2goYil7cmV0dXJuITF9fSgpLGQuaXNFbmNvZGluZz1mdW5jdGlvbihhKXtzd2l0Y2goU3RyaW5nKGEpLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImhleFwiOmNhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOmNhc2VcImFzY2lpXCI6Y2FzZVwiYmluYXJ5XCI6Y2FzZVwiYmFzZTY0XCI6Y2FzZVwicmF3XCI6Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LGQuaXNCdWZmZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIShudWxsPT09YXx8dm9pZCAwPT09YXx8IWEuX2lzQnVmZmVyKX0sZC5ieXRlTGVuZ3RoPWZ1bmN0aW9uKGEsYil7dmFyIGM7c3dpdGNoKGErPVwiXCIsYnx8XCJ1dGY4XCIpe2Nhc2VcImhleFwiOmM9YS5sZW5ndGgvMjticmVhaztjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpjPUooYSkubGVuZ3RoO2JyZWFrO2Nhc2VcImFzY2lpXCI6Y2FzZVwiYmluYXJ5XCI6Y2FzZVwicmF3XCI6Yz1hLmxlbmd0aDticmVhaztjYXNlXCJiYXNlNjRcIjpjPU0oYSkubGVuZ3RoO2JyZWFrO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOmM9MiphLmxlbmd0aDticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVua25vd24gZW5jb2RpbmdcIil9cmV0dXJuIGN9LGQuY29uY2F0PWZ1bmN0aW9uKGEsYil7aWYoUyhHKGEpLFwiVXNhZ2U6IEJ1ZmZlci5jb25jYXQobGlzdCwgW3RvdGFsTGVuZ3RoXSlcXG5saXN0IHNob3VsZCBiZSBhbiBBcnJheS5cIiksMD09PWEubGVuZ3RoKXJldHVybiBuZXcgZCgwKTtpZigxPT09YS5sZW5ndGgpcmV0dXJuIGFbMF07dmFyIGM7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGIpZm9yKGI9MCxjPTA7YzxhLmxlbmd0aDtjKyspYis9YVtjXS5sZW5ndGg7dmFyIGU9bmV3IGQoYiksZj0wO2ZvcihjPTA7YzxhLmxlbmd0aDtjKyspe3ZhciBnPWFbY107Zy5jb3B5KGUsZiksZis9Zy5sZW5ndGh9cmV0dXJuIGV9LGQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGEsYixjLGQpe2lmKGlzRmluaXRlKGIpKWlzRmluaXRlKGMpfHwoZD1jLGM9dm9pZCAwKTtlbHNle3ZhciBrPWQ7ZD1iLGI9YyxjPWt9Yj1OdW1iZXIoYil8fDA7dmFyIGw9dGhpcy5sZW5ndGgtYjtjPyhjPU51bWJlcihjKSxjPmwmJihjPWwpKTpjPWwsZD1TdHJpbmcoZHx8XCJ1dGY4XCIpLnRvTG93ZXJDYXNlKCk7dmFyIG07c3dpdGNoKGQpe2Nhc2VcImhleFwiOm09ZSh0aGlzLGEsYixjKTticmVhaztjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjptPWYodGhpcyxhLGIsYyk7YnJlYWs7Y2FzZVwiYXNjaWlcIjptPWcodGhpcyxhLGIsYyk7YnJlYWs7Y2FzZVwiYmluYXJ5XCI6bT1oKHRoaXMsYSxiLGMpO2JyZWFrO2Nhc2VcImJhc2U2NFwiOm09aSh0aGlzLGEsYixjKTticmVhaztjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjptPWoodGhpcyxhLGIsYyk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGVuY29kaW5nXCIpfXJldHVybiBtfSxkLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcztpZihhPVN0cmluZyhhfHxcInV0ZjhcIikudG9Mb3dlckNhc2UoKSxiPU51bWJlcihiKXx8MCxjPXZvaWQgMCE9PWM/TnVtYmVyKGMpOmM9ZC5sZW5ndGgsYz09PWIpcmV0dXJuXCJcIjt2YXIgZTtzd2l0Y2goYSl7Y2FzZVwiaGV4XCI6ZT1vKGQsYixjKTticmVhaztjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjplPWwoZCxiLGMpO2JyZWFrO2Nhc2VcImFzY2lpXCI6ZT1tKGQsYixjKTticmVhaztjYXNlXCJiaW5hcnlcIjplPW4oZCxiLGMpO2JyZWFrO2Nhc2VcImJhc2U2NFwiOmU9ayhkLGIsYyk7YnJlYWs7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6ZT1wKGQsYixjKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVua25vd24gZW5jb2RpbmdcIil9cmV0dXJuIGV9LGQucHJvdG90eXBlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybnt0eXBlOlwiQnVmZmVyXCIsZGF0YTpBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnJ8fHRoaXMsMCl9fSxkLnByb3RvdHlwZS5jb3B5PWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXM7aWYoY3x8KGM9MCksZHx8MD09PWR8fChkPXRoaXMubGVuZ3RoKSxifHwoYj0wKSxkIT09YyYmMCE9PWEubGVuZ3RoJiYwIT09ZS5sZW5ndGgpe1MoZD49YyxcInNvdXJjZUVuZCA8IHNvdXJjZVN0YXJ0XCIpLFMoYj49MCYmYjxhLmxlbmd0aCxcInRhcmdldFN0YXJ0IG91dCBvZiBib3VuZHNcIiksUyhjPj0wJiZjPGUubGVuZ3RoLFwic291cmNlU3RhcnQgb3V0IG9mIGJvdW5kc1wiKSxTKGQ+PTAmJmQ8PWUubGVuZ3RoLFwic291cmNlRW5kIG91dCBvZiBib3VuZHNcIiksZD50aGlzLmxlbmd0aCYmKGQ9dGhpcy5sZW5ndGgpLGEubGVuZ3RoLWI8ZC1jJiYoZD1hLmxlbmd0aC1iK2MpO2Zvcih2YXIgZj0wO2QtYz5mO2YrKylhW2YrYl09dGhpc1tmK2NdfX0sZC5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmxlbmd0aDtpZihhPUUoYSxjLDApLGI9RShiLGMsYyksZC5fdXNlVHlwZWRBcnJheXMpcmV0dXJuIEQodGhpcy5zdWJhcnJheShhLGIpKTtmb3IodmFyIGU9Yi1hLGY9bmV3IGQoZSx2b2lkIDAsITApLGc9MDtlPmc7ZysrKWZbZ109dGhpc1tnK2FdO3JldHVybiBmfSxkLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGNvbnNvbGUubG9nKFwiLmdldCgpIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB1c2luZyBhcnJheSBpbmRleGVzIGluc3RlYWQuXCIpLHRoaXMucmVhZFVJbnQ4KGEpfSxkLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gY29uc29sZS5sb2coXCIuc2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC5cIiksdGhpcy53cml0ZVVJbnQ4KGEsYil9LGQucHJvdG90eXBlLnJlYWRVSW50OD1mdW5jdGlvbihhLGIpe3JldHVybiBifHwoUyh2b2lkIDAhPT1hJiZudWxsIT09YSxcIm1pc3Npbmcgb2Zmc2V0XCIpLFMoYTx0aGlzLmxlbmd0aCxcIlRyeWluZyB0byByZWFkIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpKSxhPj10aGlzLmxlbmd0aD92b2lkIDA6dGhpc1thXX0sZC5wcm90b3R5cGUucmVhZFVJbnQxNkxFPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHEodGhpcyxhLCEwLGIpfSxkLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gcSh0aGlzLGEsITEsYil9LGQucHJvdG90eXBlLnJlYWRVSW50MzJMRT1mdW5jdGlvbihhLGIpe3JldHVybiByKHRoaXMsYSwhMCxiKX0sZC5wcm90b3R5cGUucmVhZFVJbnQzMkJFPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHIodGhpcyxhLCExLGIpfSxkLnByb3RvdHlwZS5yZWFkSW50OD1mdW5jdGlvbihhLGIpe2lmKGJ8fChTKHZvaWQgMCE9PWEmJm51bGwhPT1hLFwibWlzc2luZyBvZmZzZXRcIiksUyhhPHRoaXMubGVuZ3RoLFwiVHJ5aW5nIHRvIHJlYWQgYmV5b25kIGJ1ZmZlciBsZW5ndGhcIikpLCEoYT49dGhpcy5sZW5ndGgpKXt2YXIgYz0xMjgmdGhpc1thXTtyZXR1cm4gYz8tMSooMjU1LXRoaXNbYV0rMSk6dGhpc1thXX19LGQucHJvdG90eXBlLnJlYWRJbnQxNkxFPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHModGhpcyxhLCEwLGIpfSxkLnByb3RvdHlwZS5yZWFkSW50MTZCRT1mdW5jdGlvbihhLGIpe3JldHVybiBzKHRoaXMsYSwhMSxiKX0sZC5wcm90b3R5cGUucmVhZEludDMyTEU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdCh0aGlzLGEsITAsYil9LGQucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHQodGhpcyxhLCExLGIpfSxkLnByb3RvdHlwZS5yZWFkRmxvYXRMRT1mdW5jdGlvbihhLGIpe3JldHVybiB1KHRoaXMsYSwhMCxiKX0sZC5wcm90b3R5cGUucmVhZEZsb2F0QkU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdSh0aGlzLGEsITEsYil9LGQucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbihhLGIpe3JldHVybiB2KHRoaXMsYSwhMCxiKX0sZC5wcm90b3R5cGUucmVhZERvdWJsZUJFPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHYodGhpcyxhLCExLGIpfSxkLnByb3RvdHlwZS53cml0ZVVJbnQ4PWZ1bmN0aW9uKGEsYixjKXtjfHwoUyh2b2lkIDAhPT1hJiZudWxsIT09YSxcIm1pc3NpbmcgdmFsdWVcIiksUyh2b2lkIDAhPT1iJiZudWxsIT09YixcIm1pc3Npbmcgb2Zmc2V0XCIpLFMoYjx0aGlzLmxlbmd0aCxcInRyeWluZyB0byB3cml0ZSBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKSxQKGEsMjU1KSksYj49dGhpcy5sZW5ndGh8fCh0aGlzW2JdPWEpfSxkLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uKGEsYixjKXt3KHRoaXMsYSxiLCEwLGMpfSxkLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFPWZ1bmN0aW9uKGEsYixjKXt3KHRoaXMsYSxiLCExLGMpfSxkLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFPWZ1bmN0aW9uKGEsYixjKXt4KHRoaXMsYSxiLCEwLGMpfSxkLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPWZ1bmN0aW9uKGEsYixjKXt4KHRoaXMsYSxiLCExLGMpfSxkLnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24oYSxiLGMpe2N8fChTKHZvaWQgMCE9PWEmJm51bGwhPT1hLFwibWlzc2luZyB2YWx1ZVwiKSxTKHZvaWQgMCE9PWImJm51bGwhPT1iLFwibWlzc2luZyBvZmZzZXRcIiksUyhiPHRoaXMubGVuZ3RoLFwiVHJ5aW5nIHRvIHdyaXRlIGJleW9uZCBidWZmZXIgbGVuZ3RoXCIpLFEoYSwxMjcsLTEyOCkpLGI+PXRoaXMubGVuZ3RofHwoYT49MD90aGlzLndyaXRlVUludDgoYSxiLGMpOnRoaXMud3JpdGVVSW50OCgyNTUrYSsxLGIsYykpfSxkLnByb3RvdHlwZS53cml0ZUludDE2TEU9ZnVuY3Rpb24oYSxiLGMpe3kodGhpcyxhLGIsITAsYyl9LGQucHJvdG90eXBlLndyaXRlSW50MTZCRT1mdW5jdGlvbihhLGIsYyl7eSh0aGlzLGEsYiwhMSxjKX0sZC5wcm90b3R5cGUud3JpdGVJbnQzMkxFPWZ1bmN0aW9uKGEsYixjKXt6KHRoaXMsYSxiLCEwLGMpfSxkLnByb3RvdHlwZS53cml0ZUludDMyQkU9ZnVuY3Rpb24oYSxiLGMpe3oodGhpcyxhLGIsITEsYyl9LGQucHJvdG90eXBlLndyaXRlRmxvYXRMRT1mdW5jdGlvbihhLGIsYyl7QSh0aGlzLGEsYiwhMCxjKX0sZC5wcm90b3R5cGUud3JpdGVGbG9hdEJFPWZ1bmN0aW9uKGEsYixjKXtBKHRoaXMsYSxiLCExLGMpfSxkLnByb3RvdHlwZS53cml0ZURvdWJsZUxFPWZ1bmN0aW9uKGEsYixjKXtCKHRoaXMsYSxiLCEwLGMpfSxkLnByb3RvdHlwZS53cml0ZURvdWJsZUJFPWZ1bmN0aW9uKGEsYixjKXtCKHRoaXMsYSxiLCExLGMpfSxkLnByb3RvdHlwZS5maWxsPWZ1bmN0aW9uKGEsYixjKXtpZihhfHwoYT0wKSxifHwoYj0wKSxjfHwoYz10aGlzLmxlbmd0aCksXCJzdHJpbmdcIj09dHlwZW9mIGEmJihhPWEuY2hhckNvZGVBdCgwKSksUyhcIm51bWJlclwiPT10eXBlb2YgYSYmIWlzTmFOKGEpLFwidmFsdWUgaXMgbm90IGEgbnVtYmVyXCIpLFMoYz49YixcImVuZCA8IHN0YXJ0XCIpLGMhPT1iJiYwIT09dGhpcy5sZW5ndGgpe1MoYj49MCYmYjx0aGlzLmxlbmd0aCxcInN0YXJ0IG91dCBvZiBib3VuZHNcIiksUyhjPj0wJiZjPD10aGlzLmxlbmd0aCxcImVuZCBvdXQgb2YgYm91bmRzXCIpO2Zvcih2YXIgZD1iO2M+ZDtkKyspdGhpc1tkXT1hfX0sZC5wcm90b3R5cGUuaW5zcGVjdD1mdW5jdGlvbigpe2Zvcih2YXIgYT1bXSxiPXRoaXMubGVuZ3RoLGQ9MDtiPmQ7ZCsrKWlmKGFbZF09SSh0aGlzW2RdKSxkPT09Yy5JTlNQRUNUX01BWF9CWVRFUyl7YVtkKzFdPVwiLi4uXCI7YnJlYWt9cmV0dXJuXCI8QnVmZmVyIFwiK2Euam9pbihcIiBcIikrXCI+XCJ9LGQucHJvdG90eXBlLnRvQXJyYXlCdWZmZXI9ZnVuY3Rpb24oKXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBVaW50OEFycmF5KXtpZihkLl91c2VUeXBlZEFycmF5cylyZXR1cm4gbmV3IGQodGhpcykuYnVmZmVyO2Zvcih2YXIgYT1uZXcgVWludDhBcnJheSh0aGlzLmxlbmd0aCksYj0wLGM9YS5sZW5ndGg7Yz5iO2IrPTEpYVtiXT10aGlzW2JdO3JldHVybiBhLmJ1ZmZlcn10aHJvdyBuZXcgRXJyb3IoXCJCdWZmZXIudG9BcnJheUJ1ZmZlciBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKX07dmFyIFY9ZC5wcm90b3R5cGV9LHtcImJhc2U2NC1qc1wiOjcsaWVlZTc1NDo4fV0sNzpbZnVuY3Rpb24oYSxiKXt2YXIgYz1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIjshZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBhKGEpe3ZhciBiPWEuY2hhckNvZGVBdCgwKTtyZXR1cm4gYj09PWc/NjI6Yj09PWg/NjM6aT5iPy0xOmkrMTA+Yj9iLWkrMjYrMjY6aysyNj5iP2ItazpqKzI2PmI/Yi1qKzI2OnZvaWQgMH1mdW5jdGlvbiBkKGIpe2Z1bmN0aW9uIGMoYSl7altsKytdPWF9dmFyIGQsZSxnLGgsaSxqO2lmKGIubGVuZ3RoJTQ+MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0XCIpO3ZhciBrPWIubGVuZ3RoO2k9XCI9XCI9PT1iLmNoYXJBdChrLTIpPzI6XCI9XCI9PT1iLmNoYXJBdChrLTEpPzE6MCxqPW5ldyBmKDMqYi5sZW5ndGgvNC1pKSxnPWk+MD9iLmxlbmd0aC00OmIubGVuZ3RoO3ZhciBsPTA7Zm9yKGQ9MCxlPTA7Zz5kO2QrPTQsZSs9MyloPWEoYi5jaGFyQXQoZCkpPDwxOHxhKGIuY2hhckF0KGQrMSkpPDwxMnxhKGIuY2hhckF0KGQrMikpPDw2fGEoYi5jaGFyQXQoZCszKSksYygoMTY3MTE2ODAmaCk+PjE2KSxjKCg2NTI4MCZoKT4+OCksYygyNTUmaCk7cmV0dXJuIDI9PT1pPyhoPWEoYi5jaGFyQXQoZCkpPDwyfGEoYi5jaGFyQXQoZCsxKSk+PjQsYygyNTUmaCkpOjE9PT1pJiYoaD1hKGIuY2hhckF0KGQpKTw8MTB8YShiLmNoYXJBdChkKzEpKTw8NHxhKGIuY2hhckF0KGQrMikpPj4yLGMoaD4+OCYyNTUpLGMoMjU1JmgpKSxqfWZ1bmN0aW9uIGUoYSl7ZnVuY3Rpb24gYihhKXtyZXR1cm4gYy5jaGFyQXQoYSl9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYihhPj4xOCY2MykrYihhPj4xMiY2MykrYihhPj42JjYzKStiKDYzJmEpfXZhciBlLGYsZyxoPWEubGVuZ3RoJTMsaT1cIlwiO2ZvcihlPTAsZz1hLmxlbmd0aC1oO2c+ZTtlKz0zKWY9KGFbZV08PDE2KSsoYVtlKzFdPDw4KSthW2UrMl0saSs9ZChmKTtzd2l0Y2goaCl7Y2FzZSAxOmY9YVthLmxlbmd0aC0xXSxpKz1iKGY+PjIpLGkrPWIoZjw8NCY2MyksaSs9XCI9PVwiO2JyZWFrO2Nhc2UgMjpmPShhW2EubGVuZ3RoLTJdPDw4KSthW2EubGVuZ3RoLTFdLGkrPWIoZj4+MTApLGkrPWIoZj4+NCY2MyksaSs9YihmPDwyJjYzKSxpKz1cIj1cIn1yZXR1cm4gaX12YXIgZj1cInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheT9VaW50OEFycmF5OkFycmF5LGc9KFwiMFwiLmNoYXJDb2RlQXQoMCksXCIrXCIuY2hhckNvZGVBdCgwKSksaD1cIi9cIi5jaGFyQ29kZUF0KDApLGk9XCIwXCIuY2hhckNvZGVBdCgwKSxqPVwiYVwiLmNoYXJDb2RlQXQoMCksaz1cIkFcIi5jaGFyQ29kZUF0KDApO2IuZXhwb3J0cy50b0J5dGVBcnJheT1kLGIuZXhwb3J0cy5mcm9tQnl0ZUFycmF5PWV9KCl9LHt9XSw4OltmdW5jdGlvbihhLGIsYyl7Yy5yZWFkPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoPTgqZS1kLTEsaT0oMTw8aCktMSxqPWk+PjEsaz0tNyxsPWM/ZS0xOjAsbT1jPy0xOjEsbj1hW2IrbF07Zm9yKGwrPW0sZj1uJigxPDwtayktMSxuPj49LWssays9aDtrPjA7Zj0yNTYqZithW2IrbF0sbCs9bSxrLT04KTtmb3IoZz1mJigxPDwtayktMSxmPj49LWssays9ZDtrPjA7Zz0yNTYqZythW2IrbF0sbCs9bSxrLT04KTtpZigwPT09ZilmPTEtajtlbHNle2lmKGY9PT1pKXJldHVybiBnPzAvMDoxLzAqKG4/LTE6MSk7Zys9TWF0aC5wb3coMixkKSxmLT1qfXJldHVybihuPy0xOjEpKmcqTWF0aC5wb3coMixmLWQpfSxjLndyaXRlPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZyxoLGksaj04KmYtZS0xLGs9KDE8PGopLTEsbD1rPj4xLG09MjM9PT1lP01hdGgucG93KDIsLTI0KS1NYXRoLnBvdygyLC03Nyk6MCxuPWQ/MDpmLTEsbz1kPzE6LTEscD0wPmJ8fDA9PT1iJiYwPjEvYj8xOjA7Zm9yKGI9TWF0aC5hYnMoYiksaXNOYU4oYil8fDEvMD09PWI/KGg9aXNOYU4oYik/MTowLGc9ayk6KGc9TWF0aC5mbG9vcihNYXRoLmxvZyhiKS9NYXRoLkxOMiksYiooaT1NYXRoLnBvdygyLC1nKSk8MSYmKGctLSxpKj0yKSxiKz1nK2w+PTE/bS9pOm0qTWF0aC5wb3coMiwxLWwpLGIqaT49MiYmKGcrKyxpLz0yKSxnK2w+PWs/KGg9MCxnPWspOmcrbD49MT8oaD0oYippLTEpKk1hdGgucG93KDIsZSksZys9bCk6KGg9YipNYXRoLnBvdygyLGwtMSkqTWF0aC5wb3coMixlKSxnPTApKTtlPj04O2FbYytuXT0yNTUmaCxuKz1vLGgvPTI1NixlLT04KTtmb3IoZz1nPDxlfGgsais9ZTtqPjA7YVtjK25dPTI1NSZnLG4rPW8sZy89MjU2LGotPTgpO2FbYytuLW9dfD0xMjgqcH19LHt9XSw5OltmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXt0aGlzLl9ldmVudHM9dGhpcy5fZXZlbnRzfHx7fSx0aGlzLl9tYXhMaXN0ZW5lcnM9dGhpcy5fbWF4TGlzdGVuZXJzfHx2b2lkIDB9ZnVuY3Rpb24gZChhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBhfWZ1bmN0aW9uIGUoYSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGF9ZnVuY3Rpb24gZihhKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgYSYmbnVsbCE9PWF9ZnVuY3Rpb24gZyhhKXtyZXR1cm4gdm9pZCAwPT09YX1iLmV4cG9ydHM9YyxjLkV2ZW50RW1pdHRlcj1jLGMucHJvdG90eXBlLl9ldmVudHM9dm9pZCAwLGMucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnM9dm9pZCAwLGMuZGVmYXVsdE1heExpc3RlbmVycz0xMCxjLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oYSl7aWYoIWUoYSl8fDA+YXx8aXNOYU4oYSkpdGhyb3cgVHlwZUVycm9yKFwibiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyXCIpO3JldHVybiB0aGlzLl9tYXhMaXN0ZW5lcnM9YSx0aGlzfSxjLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZSxoLGksajtpZih0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pLFwiZXJyb3JcIj09PWEmJighdGhpcy5fZXZlbnRzLmVycm9yfHxmKHRoaXMuX2V2ZW50cy5lcnJvcikmJiF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSl0aHJvdyBiPWFyZ3VtZW50c1sxXSxiIGluc3RhbmNlb2YgRXJyb3I/YjpUeXBlRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuJyk7aWYoYz10aGlzLl9ldmVudHNbYV0sZyhjKSlyZXR1cm4hMTtpZihkKGMpKXN3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDE6Yy5jYWxsKHRoaXMpO2JyZWFrO2Nhc2UgMjpjLmNhbGwodGhpcyxhcmd1bWVudHNbMV0pO2JyZWFrO2Nhc2UgMzpjLmNhbGwodGhpcyxhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKTticmVhaztkZWZhdWx0OmZvcihlPWFyZ3VtZW50cy5sZW5ndGgsaD1uZXcgQXJyYXkoZS0xKSxpPTE7ZT5pO2krKyloW2ktMV09YXJndW1lbnRzW2ldO2MuYXBwbHkodGhpcyxoKX1lbHNlIGlmKGYoYykpe2ZvcihlPWFyZ3VtZW50cy5sZW5ndGgsaD1uZXcgQXJyYXkoZS0xKSxpPTE7ZT5pO2krKyloW2ktMV09YXJndW1lbnRzW2ldO2ZvcihqPWMuc2xpY2UoKSxlPWoubGVuZ3RoLGk9MDtlPmk7aSsrKWpbaV0uYXBwbHkodGhpcyxoKX1yZXR1cm4hMH0sYy5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ZnVuY3Rpb24oYSxiKXt2YXIgZTtpZighZChiKSl0aHJvdyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7aWYodGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KSx0aGlzLl9ldmVudHMubmV3TGlzdGVuZXImJnRoaXMuZW1pdChcIm5ld0xpc3RlbmVyXCIsYSxkKGIubGlzdGVuZXIpP2IubGlzdGVuZXI6YiksdGhpcy5fZXZlbnRzW2FdP2YodGhpcy5fZXZlbnRzW2FdKT90aGlzLl9ldmVudHNbYV0ucHVzaChiKTp0aGlzLl9ldmVudHNbYV09W3RoaXMuX2V2ZW50c1thXSxiXTp0aGlzLl9ldmVudHNbYV09YixmKHRoaXMuX2V2ZW50c1thXSkmJiF0aGlzLl9ldmVudHNbYV0ud2FybmVkKXt2YXIgZTtlPWcodGhpcy5fbWF4TGlzdGVuZXJzKT9jLmRlZmF1bHRNYXhMaXN0ZW5lcnM6dGhpcy5fbWF4TGlzdGVuZXJzLGUmJmU+MCYmdGhpcy5fZXZlbnRzW2FdLmxlbmd0aD5lJiYodGhpcy5fZXZlbnRzW2FdLndhcm5lZD0hMCxjb25zb2xlLmVycm9yKFwiKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC5cIix0aGlzLl9ldmVudHNbYV0ubGVuZ3RoKSxjb25zb2xlLnRyYWNlKCkpfXJldHVybiB0aGlzfSxjLnByb3RvdHlwZS5vbj1jLnByb3RvdHlwZS5hZGRMaXN0ZW5lcixjLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYygpe3RoaXMucmVtb3ZlTGlzdGVuZXIoYSxjKSxlfHwoZT0hMCxiLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9aWYoIWQoYikpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3ZhciBlPSExO3JldHVybiBjLmxpc3RlbmVyPWIsdGhpcy5vbihhLGMpLHRoaXN9LGMucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxnLGg7aWYoIWQoYikpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO2lmKCF0aGlzLl9ldmVudHN8fCF0aGlzLl9ldmVudHNbYV0pcmV0dXJuIHRoaXM7aWYoYz10aGlzLl9ldmVudHNbYV0sZz1jLmxlbmd0aCxlPS0xLGM9PT1ifHxkKGMubGlzdGVuZXIpJiZjLmxpc3RlbmVyPT09YilkZWxldGUgdGhpcy5fZXZlbnRzW2FdLHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixhLGIpO2Vsc2UgaWYoZihjKSl7Zm9yKGg9ZztoLS0+MDspaWYoY1toXT09PWJ8fGNbaF0ubGlzdGVuZXImJmNbaF0ubGlzdGVuZXI9PT1iKXtlPWg7YnJlYWt9aWYoMD5lKXJldHVybiB0aGlzOzE9PT1jLmxlbmd0aD8oYy5sZW5ndGg9MCxkZWxldGUgdGhpcy5fZXZlbnRzW2FdKTpjLnNwbGljZShlLDEpLHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixhLGIpfXJldHVybiB0aGlzfSxjLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24oYSl7dmFyIGIsYztpZighdGhpcy5fZXZlbnRzKXJldHVybiB0aGlzO2lmKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpcmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMuX2V2ZW50cz17fTp0aGlzLl9ldmVudHNbYV0mJmRlbGV0ZSB0aGlzLl9ldmVudHNbYV0sdGhpcztpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKGIgaW4gdGhpcy5fZXZlbnRzKVwicmVtb3ZlTGlzdGVuZXJcIiE9PWImJnRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGIpO3JldHVybiB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhcInJlbW92ZUxpc3RlbmVyXCIpLHRoaXMuX2V2ZW50cz17fSx0aGlzfWlmKGM9dGhpcy5fZXZlbnRzW2FdLGQoYykpdGhpcy5yZW1vdmVMaXN0ZW5lcihhLGMpO2Vsc2UgZm9yKDtjLmxlbmd0aDspdGhpcy5yZW1vdmVMaXN0ZW5lcihhLGNbYy5sZW5ndGgtMV0pO3JldHVybiBkZWxldGUgdGhpcy5fZXZlbnRzW2FdLHRoaXN9LGMucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gYj10aGlzLl9ldmVudHMmJnRoaXMuX2V2ZW50c1thXT9kKHRoaXMuX2V2ZW50c1thXSk/W3RoaXMuX2V2ZW50c1thXV06dGhpcy5fZXZlbnRzW2FdLnNsaWNlKCk6W119LGMubGlzdGVuZXJDb3VudD1mdW5jdGlvbihhLGIpe3ZhciBjO3JldHVybiBjPWEuX2V2ZW50cyYmYS5fZXZlbnRzW2JdP2QoYS5fZXZlbnRzW2JdKT8xOmEuX2V2ZW50c1tiXS5sZW5ndGg6MH19LHt9XSwxMDpbZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmV4cG9ydHM9e307Yy5uZXh0VGljaz1mdW5jdGlvbigpe3ZhciBhPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5zZXRJbW1lZGlhdGUsYj1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cucG9zdE1lc3NhZ2UmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyO2lmKGEpcmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiB3aW5kb3cuc2V0SW1tZWRpYXRlKGEpfTtpZihiKXt2YXIgYz1bXTtyZXR1cm4gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZnVuY3Rpb24oYSl7dmFyIGI9YS5zb3VyY2U7aWYoKGI9PT13aW5kb3d8fG51bGw9PT1iKSYmXCJwcm9jZXNzLXRpY2tcIj09PWEuZGF0YSYmKGEuc3RvcFByb3BhZ2F0aW9uKCksYy5sZW5ndGg+MCkpe3ZhciBkPWMuc2hpZnQoKTtkKCl9fSwhMCksZnVuY3Rpb24oYSl7Yy5wdXNoKGEpLHdpbmRvdy5wb3N0TWVzc2FnZShcInByb2Nlc3MtdGlja1wiLFwiKlwiKX19cmV0dXJuIGZ1bmN0aW9uKGEpe3NldFRpbWVvdXQoYSwwKX19KCksYy50aXRsZT1cImJyb3dzZXJcIixjLmJyb3dzZXI9ITAsYy5lbnY9e30sYy5hcmd2PVtdLGMuYmluZGluZz1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkXCIpfSxjLmN3ZD1mdW5jdGlvbigpe3JldHVyblwiL1wifSxjLmNoZGlyPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkXCIpfX0se31dLDExOltmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBjPyhnLmNhbGwodGhpcyxhKSxoLmNhbGwodGhpcyxhKSxhJiZhLnJlYWRhYmxlPT09ITEmJih0aGlzLnJlYWRhYmxlPSExKSxhJiZhLndyaXRhYmxlPT09ITEmJih0aGlzLndyaXRhYmxlPSExKSx0aGlzLmFsbG93SGFsZk9wZW49ITAsYSYmYS5hbGxvd0hhbGZPcGVuPT09ITEmJih0aGlzLmFsbG93SGFsZk9wZW49ITEpLHZvaWQgdGhpcy5vbmNlKFwiZW5kXCIsZCkpOm5ldyBjKGEpfWZ1bmN0aW9uIGQoKXtpZighdGhpcy5hbGxvd0hhbGZPcGVuJiYhdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZCl7dmFyIGE9dGhpcztmKGZ1bmN0aW9uKCl7YS5lbmQoKX0pfX1iLmV4cG9ydHM9Yzt2YXIgZT1hKFwiaW5oZXJpdHNcIiksZj1hKFwicHJvY2Vzcy9icm93c2VyLmpzXCIpLm5leHRUaWNrLGc9YShcIi4vcmVhZGFibGUuanNcIiksaD1hKFwiLi93cml0YWJsZS5qc1wiKTtlKGMsZyksYy5wcm90b3R5cGUud3JpdGU9aC5wcm90b3R5cGUud3JpdGUsYy5wcm90b3R5cGUuZW5kPWgucHJvdG90eXBlLmVuZCxjLnByb3RvdHlwZS5fd3JpdGU9aC5wcm90b3R5cGUuX3dyaXRlfSx7XCIuL3JlYWRhYmxlLmpzXCI6MTUsXCIuL3dyaXRhYmxlLmpzXCI6MTcsaW5oZXJpdHM6MTksXCJwcm9jZXNzL2Jyb3dzZXIuanNcIjoxM31dLDEyOltmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoKXtkLmNhbGwodGhpcyl9Yi5leHBvcnRzPWM7dmFyIGQ9YShcImV2ZW50c1wiKS5FdmVudEVtaXR0ZXIsZT1hKFwiaW5oZXJpdHNcIik7ZShjLGQpLGMuUmVhZGFibGU9YShcIi4vcmVhZGFibGUuanNcIiksYy5Xcml0YWJsZT1hKFwiLi93cml0YWJsZS5qc1wiKSxjLkR1cGxleD1hKFwiLi9kdXBsZXguanNcIiksYy5UcmFuc2Zvcm09YShcIi4vdHJhbnNmb3JtLmpzXCIpLGMuUGFzc1Rocm91Z2g9YShcIi4vcGFzc3Rocm91Z2guanNcIiksYy5TdHJlYW09YyxjLnByb3RvdHlwZS5waXBlPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhiKXthLndyaXRhYmxlJiYhMT09PWEud3JpdGUoYikmJmoucGF1c2UmJmoucGF1c2UoKVxufWZ1bmN0aW9uIGUoKXtqLnJlYWRhYmxlJiZqLnJlc3VtZSYmai5yZXN1bWUoKX1mdW5jdGlvbiBmKCl7a3x8KGs9ITAsYS5lbmQoKSl9ZnVuY3Rpb24gZygpe2t8fChrPSEwLFwiZnVuY3Rpb25cIj09dHlwZW9mIGEuZGVzdHJveSYmYS5kZXN0cm95KCkpfWZ1bmN0aW9uIGgoYSl7aWYoaSgpLDA9PT1kLmxpc3RlbmVyQ291bnQodGhpcyxcImVycm9yXCIpKXRocm93IGF9ZnVuY3Rpb24gaSgpe2oucmVtb3ZlTGlzdGVuZXIoXCJkYXRhXCIsYyksYS5yZW1vdmVMaXN0ZW5lcihcImRyYWluXCIsZSksai5yZW1vdmVMaXN0ZW5lcihcImVuZFwiLGYpLGoucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLGcpLGoucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLGgpLGEucmVtb3ZlTGlzdGVuZXIoXCJlcnJvclwiLGgpLGoucmVtb3ZlTGlzdGVuZXIoXCJlbmRcIixpKSxqLnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIixpKSxhLnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIixpKX12YXIgaj10aGlzO2oub24oXCJkYXRhXCIsYyksYS5vbihcImRyYWluXCIsZSksYS5faXNTdGRpb3x8YiYmYi5lbmQ9PT0hMXx8KGoub24oXCJlbmRcIixmKSxqLm9uKFwiY2xvc2VcIixnKSk7dmFyIGs9ITE7cmV0dXJuIGoub24oXCJlcnJvclwiLGgpLGEub24oXCJlcnJvclwiLGgpLGoub24oXCJlbmRcIixpKSxqLm9uKFwiY2xvc2VcIixpKSxhLm9uKFwiY2xvc2VcIixpKSxhLmVtaXQoXCJwaXBlXCIsaiksYX19LHtcIi4vZHVwbGV4LmpzXCI6MTEsXCIuL3Bhc3N0aHJvdWdoLmpzXCI6MTQsXCIuL3JlYWRhYmxlLmpzXCI6MTUsXCIuL3RyYW5zZm9ybS5qc1wiOjE2LFwiLi93cml0YWJsZS5qc1wiOjE3LGV2ZW50czo5LGluaGVyaXRzOjE5fV0sMTM6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWEoMTApfSx7fV0sMTQ6W2Z1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGM/dm9pZCBkLmNhbGwodGhpcyxhKTpuZXcgYyhhKX1iLmV4cG9ydHM9Yzt2YXIgZD1hKFwiLi90cmFuc2Zvcm0uanNcIiksZT1hKFwiaW5oZXJpdHNcIik7ZShjLGQpLGMucHJvdG90eXBlLl90cmFuc2Zvcm09ZnVuY3Rpb24oYSxiLGMpe2MobnVsbCxhKX19LHtcIi4vdHJhbnNmb3JtLmpzXCI6MTYsaW5oZXJpdHM6MTl9XSwxNTpbZnVuY3Rpb24oYSxiKXsoZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZChiKXtiPWJ8fHt9O3ZhciBjPWIuaGlnaFdhdGVyTWFyazt0aGlzLmhpZ2hXYXRlck1hcms9Y3x8MD09PWM/YzoxNjM4NCx0aGlzLmhpZ2hXYXRlck1hcms9fn50aGlzLmhpZ2hXYXRlck1hcmssdGhpcy5idWZmZXI9W10sdGhpcy5sZW5ndGg9MCx0aGlzLnBpcGVzPW51bGwsdGhpcy5waXBlc0NvdW50PTAsdGhpcy5mbG93aW5nPSExLHRoaXMuZW5kZWQ9ITEsdGhpcy5lbmRFbWl0dGVkPSExLHRoaXMucmVhZGluZz0hMSx0aGlzLmNhbGxlZFJlYWQ9ITEsdGhpcy5zeW5jPSEwLHRoaXMubmVlZFJlYWRhYmxlPSExLHRoaXMuZW1pdHRlZFJlYWRhYmxlPSExLHRoaXMucmVhZGFibGVMaXN0ZW5pbmc9ITEsdGhpcy5vYmplY3RNb2RlPSEhYi5vYmplY3RNb2RlLHRoaXMuZGVmYXVsdEVuY29kaW5nPWIuZGVmYXVsdEVuY29kaW5nfHxcInV0ZjhcIix0aGlzLnJhbk91dD0hMSx0aGlzLmF3YWl0RHJhaW49MCx0aGlzLnJlYWRpbmdNb3JlPSExLHRoaXMuZGVjb2Rlcj1udWxsLHRoaXMuZW5jb2Rpbmc9bnVsbCxiLmVuY29kaW5nJiYoeHx8KHg9YShcInN0cmluZ19kZWNvZGVyXCIpLlN0cmluZ0RlY29kZXIpLHRoaXMuZGVjb2Rlcj1uZXcgeChiLmVuY29kaW5nKSx0aGlzLmVuY29kaW5nPWIuZW5jb2RpbmcpfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBlPyh0aGlzLl9yZWFkYWJsZVN0YXRlPW5ldyBkKGEsdGhpcyksdGhpcy5yZWFkYWJsZT0hMCx2b2lkIHouY2FsbCh0aGlzKSk6bmV3IGUoYSl9ZnVuY3Rpb24gZihhLGIsYyxkLGUpe3ZhciBmPWooYixjKTtpZihmKWEuZW1pdChcImVycm9yXCIsZik7ZWxzZSBpZihudWxsPT09Y3x8dm9pZCAwPT09YyliLnJlYWRpbmc9ITEsYi5lbmRlZHx8ayhhLGIpO2Vsc2UgaWYoYi5vYmplY3RNb2RlfHxjJiZjLmxlbmd0aD4wKWlmKGIuZW5kZWQmJiFlKXt2YXIgaD1uZXcgRXJyb3IoXCJzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRlwiKTthLmVtaXQoXCJlcnJvclwiLGgpfWVsc2UgaWYoYi5lbmRFbWl0dGVkJiZlKXt2YXIgaD1uZXcgRXJyb3IoXCJzdHJlYW0udW5zaGlmdCgpIGFmdGVyIGVuZCBldmVudFwiKTthLmVtaXQoXCJlcnJvclwiLGgpfWVsc2UhYi5kZWNvZGVyfHxlfHxkfHwoYz1iLmRlY29kZXIud3JpdGUoYykpLGIubGVuZ3RoKz1iLm9iamVjdE1vZGU/MTpjLmxlbmd0aCxlP2IuYnVmZmVyLnVuc2hpZnQoYyk6KGIucmVhZGluZz0hMSxiLmJ1ZmZlci5wdXNoKGMpKSxiLm5lZWRSZWFkYWJsZSYmbChhKSxuKGEsYik7ZWxzZSBlfHwoYi5yZWFkaW5nPSExKTtyZXR1cm4gZyhiKX1mdW5jdGlvbiBnKGEpe3JldHVybiFhLmVuZGVkJiYoYS5uZWVkUmVhZGFibGV8fGEubGVuZ3RoPGEuaGlnaFdhdGVyTWFya3x8MD09PWEubGVuZ3RoKX1mdW5jdGlvbiBoKGEpe2lmKGE+PUQpYT1EO2Vsc2V7YS0tO2Zvcih2YXIgYj0xOzMyPmI7Yjw8PTEpYXw9YT4+YjthKyt9cmV0dXJuIGF9ZnVuY3Rpb24gaShhLGIpe3JldHVybiAwPT09Yi5sZW5ndGgmJmIuZW5kZWQ/MDpiLm9iamVjdE1vZGU/MD09PWE/MDoxOmlzTmFOKGEpfHxudWxsPT09YT9iLmZsb3dpbmcmJmIuYnVmZmVyLmxlbmd0aD9iLmJ1ZmZlclswXS5sZW5ndGg6Yi5sZW5ndGg6MD49YT8wOihhPmIuaGlnaFdhdGVyTWFyayYmKGIuaGlnaFdhdGVyTWFyaz1oKGEpKSxhPmIubGVuZ3RoP2IuZW5kZWQ/Yi5sZW5ndGg6KGIubmVlZFJlYWRhYmxlPSEwLDApOmEpfWZ1bmN0aW9uIGooYSxiKXt2YXIgYz1udWxsO3JldHVybiBBLmlzQnVmZmVyKGIpfHxcInN0cmluZ1wiPT10eXBlb2YgYnx8bnVsbD09PWJ8fHZvaWQgMD09PWJ8fGEub2JqZWN0TW9kZXx8Y3x8KGM9bmV3IFR5cGVFcnJvcihcIkludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmtcIikpLGN9ZnVuY3Rpb24gayhhLGIpe2lmKGIuZGVjb2RlciYmIWIuZW5kZWQpe3ZhciBjPWIuZGVjb2Rlci5lbmQoKTtjJiZjLmxlbmd0aCYmKGIuYnVmZmVyLnB1c2goYyksYi5sZW5ndGgrPWIub2JqZWN0TW9kZT8xOmMubGVuZ3RoKX1iLmVuZGVkPSEwLGIubGVuZ3RoPjA/bChhKTp1KGEpfWZ1bmN0aW9uIGwoYSl7dmFyIGI9YS5fcmVhZGFibGVTdGF0ZTtiLm5lZWRSZWFkYWJsZT0hMSxiLmVtaXR0ZWRSZWFkYWJsZXx8KGIuZW1pdHRlZFJlYWRhYmxlPSEwLGIuc3luYz9CKGZ1bmN0aW9uKCl7bShhKX0pOm0oYSkpfWZ1bmN0aW9uIG0oYSl7YS5lbWl0KFwicmVhZGFibGVcIil9ZnVuY3Rpb24gbihhLGIpe2IucmVhZGluZ01vcmV8fChiLnJlYWRpbmdNb3JlPSEwLEIoZnVuY3Rpb24oKXtvKGEsYil9KSl9ZnVuY3Rpb24gbyhhLGIpe2Zvcih2YXIgYz1iLmxlbmd0aDshYi5yZWFkaW5nJiYhYi5mbG93aW5nJiYhYi5lbmRlZCYmYi5sZW5ndGg8Yi5oaWdoV2F0ZXJNYXJrJiYoYS5yZWFkKDApLGMhPT1iLmxlbmd0aCk7KWM9Yi5sZW5ndGg7Yi5yZWFkaW5nTW9yZT0hMX1mdW5jdGlvbiBwKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPWEuX3JlYWRhYmxlU3RhdGU7Yi5hd2FpdERyYWluLS0sMD09PWIuYXdhaXREcmFpbiYmcShhKX19ZnVuY3Rpb24gcShhKXtmdW5jdGlvbiBiKGEpe3ZhciBiPWEud3JpdGUoYyk7ITE9PT1iJiZkLmF3YWl0RHJhaW4rK312YXIgYyxkPWEuX3JlYWRhYmxlU3RhdGU7Zm9yKGQuYXdhaXREcmFpbj0wO2QucGlwZXNDb3VudCYmbnVsbCE9PShjPWEucmVhZCgpKTspaWYoMT09PWQucGlwZXNDb3VudD9iKGQucGlwZXMsMCxudWxsKTp2KGQucGlwZXMsYiksYS5lbWl0KFwiZGF0YVwiLGMpLGQuYXdhaXREcmFpbj4wKXJldHVybjtyZXR1cm4gMD09PWQucGlwZXNDb3VudD8oZC5mbG93aW5nPSExLHZvaWQoeS5saXN0ZW5lckNvdW50KGEsXCJkYXRhXCIpPjAmJnMoYSkpKTp2b2lkKGQucmFuT3V0PSEwKX1mdW5jdGlvbiByKCl7dGhpcy5fcmVhZGFibGVTdGF0ZS5yYW5PdXQmJih0aGlzLl9yZWFkYWJsZVN0YXRlLnJhbk91dD0hMSxxKHRoaXMpKX1mdW5jdGlvbiBzKGEsYil7dmFyIGM9YS5fcmVhZGFibGVTdGF0ZTtpZihjLmZsb3dpbmcpdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHN3aXRjaCB0byBvbGQgbW9kZSBub3cuXCIpO3ZhciBkPWJ8fCExLGU9ITE7YS5yZWFkYWJsZT0hMCxhLnBpcGU9ei5wcm90b3R5cGUucGlwZSxhLm9uPWEuYWRkTGlzdGVuZXI9ei5wcm90b3R5cGUub24sYS5vbihcInJlYWRhYmxlXCIsZnVuY3Rpb24oKXtlPSEwO2Zvcih2YXIgYjshZCYmbnVsbCE9PShiPWEucmVhZCgpKTspYS5lbWl0KFwiZGF0YVwiLGIpO251bGw9PT1iJiYoZT0hMSxhLl9yZWFkYWJsZVN0YXRlLm5lZWRSZWFkYWJsZT0hMCl9KSxhLnBhdXNlPWZ1bmN0aW9uKCl7ZD0hMCx0aGlzLmVtaXQoXCJwYXVzZVwiKX0sYS5yZXN1bWU9ZnVuY3Rpb24oKXtkPSExLGU/QihmdW5jdGlvbigpe2EuZW1pdChcInJlYWRhYmxlXCIpfSk6dGhpcy5yZWFkKDApLHRoaXMuZW1pdChcInJlc3VtZVwiKX0sYS5lbWl0KFwicmVhZGFibGVcIil9ZnVuY3Rpb24gdChhLGIpe3ZhciBjLGQ9Yi5idWZmZXIsZT1iLmxlbmd0aCxmPSEhYi5kZWNvZGVyLGc9ISFiLm9iamVjdE1vZGU7aWYoMD09PWQubGVuZ3RoKXJldHVybiBudWxsO2lmKDA9PT1lKWM9bnVsbDtlbHNlIGlmKGcpYz1kLnNoaWZ0KCk7ZWxzZSBpZighYXx8YT49ZSljPWY/ZC5qb2luKFwiXCIpOkEuY29uY2F0KGQsZSksZC5sZW5ndGg9MDtlbHNlIGlmKGE8ZFswXS5sZW5ndGgpe3ZhciBoPWRbMF07Yz1oLnNsaWNlKDAsYSksZFswXT1oLnNsaWNlKGEpfWVsc2UgaWYoYT09PWRbMF0ubGVuZ3RoKWM9ZC5zaGlmdCgpO2Vsc2V7Yz1mP1wiXCI6bmV3IEEoYSk7Zm9yKHZhciBpPTAsaj0wLGs9ZC5sZW5ndGg7az5qJiZhPmk7aisrKXt2YXIgaD1kWzBdLGw9TWF0aC5taW4oYS1pLGgubGVuZ3RoKTtmP2MrPWguc2xpY2UoMCxsKTpoLmNvcHkoYyxpLDAsbCksbDxoLmxlbmd0aD9kWzBdPWguc2xpY2UobCk6ZC5zaGlmdCgpLGkrPWx9fXJldHVybiBjfWZ1bmN0aW9uIHUoYSl7dmFyIGI9YS5fcmVhZGFibGVTdGF0ZTtpZihiLmxlbmd0aD4wKXRocm93IG5ldyBFcnJvcihcImVuZFJlYWRhYmxlIGNhbGxlZCBvbiBub24tZW1wdHkgc3RyZWFtXCIpOyFiLmVuZEVtaXR0ZWQmJmIuY2FsbGVkUmVhZCYmKGIuZW5kZWQ9ITAsQihmdW5jdGlvbigpe2IuZW5kRW1pdHRlZHx8MCE9PWIubGVuZ3RofHwoYi5lbmRFbWl0dGVkPSEwLGEucmVhZGFibGU9ITEsYS5lbWl0KFwiZW5kXCIpKX0pKX1mdW5jdGlvbiB2KGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWIoYVtjXSxjKX1mdW5jdGlvbiB3KGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfWIuZXhwb3J0cz1lLGUuUmVhZGFibGVTdGF0ZT1kO3ZhciB4LHk9YShcImV2ZW50c1wiKS5FdmVudEVtaXR0ZXIsej1hKFwiLi9pbmRleC5qc1wiKSxBPWEoXCJidWZmZXJcIikuQnVmZmVyLEI9YShcInByb2Nlc3MvYnJvd3Nlci5qc1wiKS5uZXh0VGljayxDPWEoXCJpbmhlcml0c1wiKTtDKGUseiksZS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuX3JlYWRhYmxlU3RhdGU7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGF8fGMub2JqZWN0TW9kZXx8KGI9Ynx8Yy5kZWZhdWx0RW5jb2RpbmcsYiE9PWMuZW5jb2RpbmcmJihhPW5ldyBBKGEsYiksYj1cIlwiKSksZih0aGlzLGMsYSxiLCExKX0sZS5wcm90b3R5cGUudW5zaGlmdD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLl9yZWFkYWJsZVN0YXRlO3JldHVybiBmKHRoaXMsYixhLFwiXCIsITApfSxlLnByb3RvdHlwZS5zZXRFbmNvZGluZz1mdW5jdGlvbihiKXt4fHwoeD1hKFwic3RyaW5nX2RlY29kZXJcIikuU3RyaW5nRGVjb2RlciksdGhpcy5fcmVhZGFibGVTdGF0ZS5kZWNvZGVyPW5ldyB4KGIpLHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2Rpbmc9Yn07dmFyIEQ9ODM4ODYwODtlLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX3JlYWRhYmxlU3RhdGU7Yi5jYWxsZWRSZWFkPSEwO3ZhciBjPWE7aWYoKFwibnVtYmVyXCIhPXR5cGVvZiBhfHxhPjApJiYoYi5lbWl0dGVkUmVhZGFibGU9ITEpLDA9PT1hJiZiLm5lZWRSZWFkYWJsZSYmKGIubGVuZ3RoPj1iLmhpZ2hXYXRlck1hcmt8fGIuZW5kZWQpKXJldHVybiBsKHRoaXMpLG51bGw7aWYoYT1pKGEsYiksMD09PWEmJmIuZW5kZWQpcmV0dXJuIDA9PT1iLmxlbmd0aCYmdSh0aGlzKSxudWxsO3ZhciBkPWIubmVlZFJlYWRhYmxlO2IubGVuZ3RoLWE8PWIuaGlnaFdhdGVyTWFyayYmKGQ9ITApLChiLmVuZGVkfHxiLnJlYWRpbmcpJiYoZD0hMSksZCYmKGIucmVhZGluZz0hMCxiLnN5bmM9ITAsMD09PWIubGVuZ3RoJiYoYi5uZWVkUmVhZGFibGU9ITApLHRoaXMuX3JlYWQoYi5oaWdoV2F0ZXJNYXJrKSxiLnN5bmM9ITEpLGQmJiFiLnJlYWRpbmcmJihhPWkoYyxiKSk7dmFyIGU7cmV0dXJuIGU9YT4wP3QoYSxiKTpudWxsLG51bGw9PT1lJiYoYi5uZWVkUmVhZGFibGU9ITAsYT0wKSxiLmxlbmd0aC09YSwwIT09Yi5sZW5ndGh8fGIuZW5kZWR8fChiLm5lZWRSZWFkYWJsZT0hMCksYi5lbmRlZCYmIWIuZW5kRW1pdHRlZCYmMD09PWIubGVuZ3RoJiZ1KHRoaXMpLGV9LGUucHJvdG90eXBlLl9yZWFkPWZ1bmN0aW9uKCl7dGhpcy5lbWl0KFwiZXJyb3JcIixuZXcgRXJyb3IoXCJub3QgaW1wbGVtZW50ZWRcIikpfSxlLnByb3RvdHlwZS5waXBlPWZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhKXthPT09ayYmZigpfWZ1bmN0aW9uIGUoKXthLmVuZCgpfWZ1bmN0aW9uIGYoKXthLnJlbW92ZUxpc3RlbmVyKFwiY2xvc2VcIixoKSxhLnJlbW92ZUxpc3RlbmVyKFwiZmluaXNoXCIsaSksYS5yZW1vdmVMaXN0ZW5lcihcImRyYWluXCIsbyksYS5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsZyksYS5yZW1vdmVMaXN0ZW5lcihcInVucGlwZVwiLGQpLGsucmVtb3ZlTGlzdGVuZXIoXCJlbmRcIixlKSxrLnJlbW92ZUxpc3RlbmVyKFwiZW5kXCIsZiksKCFhLl93cml0YWJsZVN0YXRlfHxhLl93cml0YWJsZVN0YXRlLm5lZWREcmFpbikmJm8oKX1mdW5jdGlvbiBnKGIpe2ooKSwwPT09cyYmMD09PXkubGlzdGVuZXJDb3VudChhLFwiZXJyb3JcIikmJmEuZW1pdChcImVycm9yXCIsYil9ZnVuY3Rpb24gaCgpe2EucmVtb3ZlTGlzdGVuZXIoXCJmaW5pc2hcIixpKSxqKCl9ZnVuY3Rpb24gaSgpe2EucmVtb3ZlTGlzdGVuZXIoXCJjbG9zZVwiLGgpLGooKX1mdW5jdGlvbiBqKCl7ay51bnBpcGUoYSl9dmFyIGs9dGhpcyxsPXRoaXMuX3JlYWRhYmxlU3RhdGU7c3dpdGNoKGwucGlwZXNDb3VudCl7Y2FzZSAwOmwucGlwZXM9YTticmVhaztjYXNlIDE6bC5waXBlcz1bbC5waXBlcyxhXTticmVhaztkZWZhdWx0OmwucGlwZXMucHVzaChhKX1sLnBpcGVzQ291bnQrPTE7dmFyIG09KCFifHxiLmVuZCE9PSExKSYmYSE9PWMuc3Rkb3V0JiZhIT09Yy5zdGRlcnIsbj1tP2U6ZjtsLmVuZEVtaXR0ZWQ/QihuKTprLm9uY2UoXCJlbmRcIixuKSxhLm9uKFwidW5waXBlXCIsZCk7dmFyIG89cChrKTthLm9uKFwiZHJhaW5cIixvKTt2YXIgcz15Lmxpc3RlbmVyQ291bnQoYSxcImVycm9yXCIpO3JldHVybiBhLm9uY2UoXCJlcnJvclwiLGcpLGEub25jZShcImNsb3NlXCIsaCksYS5vbmNlKFwiZmluaXNoXCIsaSksYS5lbWl0KFwicGlwZVwiLGspLGwuZmxvd2luZ3x8KHRoaXMub24oXCJyZWFkYWJsZVwiLHIpLGwuZmxvd2luZz0hMCxCKGZ1bmN0aW9uKCl7cShrKX0pKSxhfSxlLnByb3RvdHlwZS51bnBpcGU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fcmVhZGFibGVTdGF0ZTtpZigwPT09Yi5waXBlc0NvdW50KXJldHVybiB0aGlzO2lmKDE9PT1iLnBpcGVzQ291bnQpcmV0dXJuIGEmJmEhPT1iLnBpcGVzP3RoaXM6KGF8fChhPWIucGlwZXMpLGIucGlwZXM9bnVsbCxiLnBpcGVzQ291bnQ9MCx0aGlzLnJlbW92ZUxpc3RlbmVyKFwicmVhZGFibGVcIixyKSxiLmZsb3dpbmc9ITEsYSYmYS5lbWl0KFwidW5waXBlXCIsdGhpcyksdGhpcyk7aWYoIWEpe3ZhciBjPWIucGlwZXMsZD1iLnBpcGVzQ291bnQ7Yi5waXBlcz1udWxsLGIucGlwZXNDb3VudD0wLHRoaXMucmVtb3ZlTGlzdGVuZXIoXCJyZWFkYWJsZVwiLHIpLGIuZmxvd2luZz0hMTtmb3IodmFyIGU9MDtkPmU7ZSsrKWNbZV0uZW1pdChcInVucGlwZVwiLHRoaXMpO3JldHVybiB0aGlzfXZhciBlPXcoYi5waXBlcyxhKTtyZXR1cm4tMT09PWU/dGhpczooYi5waXBlcy5zcGxpY2UoZSwxKSxiLnBpcGVzQ291bnQtPTEsMT09PWIucGlwZXNDb3VudCYmKGIucGlwZXM9Yi5waXBlc1swXSksYS5lbWl0KFwidW5waXBlXCIsdGhpcyksdGhpcyl9LGUucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGEsYil7dmFyIGM9ei5wcm90b3R5cGUub24uY2FsbCh0aGlzLGEsYik7aWYoXCJkYXRhXCIhPT1hfHx0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmd8fHModGhpcyksXCJyZWFkYWJsZVwiPT09YSYmdGhpcy5yZWFkYWJsZSl7dmFyIGQ9dGhpcy5fcmVhZGFibGVTdGF0ZTtkLnJlYWRhYmxlTGlzdGVuaW5nfHwoZC5yZWFkYWJsZUxpc3RlbmluZz0hMCxkLmVtaXR0ZWRSZWFkYWJsZT0hMSxkLm5lZWRSZWFkYWJsZT0hMCxkLnJlYWRpbmc/ZC5sZW5ndGgmJmwodGhpcyxkKTp0aGlzLnJlYWQoMCkpfXJldHVybiBjfSxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1lLnByb3RvdHlwZS5vbixlLnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXtzKHRoaXMpLHRoaXMucmVhZCgwKSx0aGlzLmVtaXQoXCJyZXN1bWVcIil9LGUucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7cyh0aGlzLCEwKSx0aGlzLmVtaXQoXCJwYXVzZVwiKX0sZS5wcm90b3R5cGUud3JhcD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLl9yZWFkYWJsZVN0YXRlLGM9ITEsZD10aGlzO2Eub24oXCJlbmRcIixmdW5jdGlvbigpe2lmKGIuZGVjb2RlciYmIWIuZW5kZWQpe3ZhciBhPWIuZGVjb2Rlci5lbmQoKTthJiZhLmxlbmd0aCYmZC5wdXNoKGEpfWQucHVzaChudWxsKX0pLGEub24oXCJkYXRhXCIsZnVuY3Rpb24oZSl7aWYoYi5kZWNvZGVyJiYoZT1iLmRlY29kZXIud3JpdGUoZSkpLGUmJihiLm9iamVjdE1vZGV8fGUubGVuZ3RoKSl7dmFyIGY9ZC5wdXNoKGUpO2Z8fChjPSEwLGEucGF1c2UoKSl9fSk7Zm9yKHZhciBlIGluIGEpXCJmdW5jdGlvblwiPT10eXBlb2YgYVtlXSYmXCJ1bmRlZmluZWRcIj09dHlwZW9mIHRoaXNbZV0mJih0aGlzW2VdPWZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhW2JdLmFwcGx5KGEsYXJndW1lbnRzKX19KGUpKTt2YXIgZj1bXCJlcnJvclwiLFwiY2xvc2VcIixcImRlc3Ryb3lcIixcInBhdXNlXCIsXCJyZXN1bWVcIl07cmV0dXJuIHYoZixmdW5jdGlvbihiKXthLm9uKGIsZnVuY3Rpb24oYSl7cmV0dXJuIGQuZW1pdC5hcHBseShkLGIsYSl9KX0pLGQuX3JlYWQ9ZnVuY3Rpb24oKXtjJiYoYz0hMSxhLnJlc3VtZSgpKX0sZH0sZS5fZnJvbUxpc3Q9dH0pLmNhbGwodGhpcyxhKFwiL1VzZXJzL2hhcnRoL3JlcG9zL2JyYWluL25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9pbnNlcnQtbW9kdWxlLWdsb2JhbHMvbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qc1wiKSl9LHtcIi4vaW5kZXguanNcIjoxMixcIi9Vc2Vycy9oYXJ0aC9yZXBvcy9icmFpbi9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvaW5zZXJ0LW1vZHVsZS1nbG9iYWxzL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanNcIjoxMCxidWZmZXI6NixldmVudHM6OSxpbmhlcml0czoxOSxcInByb2Nlc3MvYnJvd3Nlci5qc1wiOjEzLHN0cmluZ19kZWNvZGVyOjE4fV0sMTY6W2Z1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIpe3RoaXMuYWZ0ZXJUcmFuc2Zvcm09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gZChiLGEsYyl9LHRoaXMubmVlZFRyYW5zZm9ybT0hMSx0aGlzLnRyYW5zZm9ybWluZz0hMSx0aGlzLndyaXRlY2I9bnVsbCx0aGlzLndyaXRlY2h1bms9bnVsbH1mdW5jdGlvbiBkKGEsYixjKXt2YXIgZD1hLl90cmFuc2Zvcm1TdGF0ZTtkLnRyYW5zZm9ybWluZz0hMTt2YXIgZT1kLndyaXRlY2I7aWYoIWUpcmV0dXJuIGEuZW1pdChcImVycm9yXCIsbmV3IEVycm9yKFwibm8gd3JpdGVjYiBpbiBUcmFuc2Zvcm0gY2xhc3NcIikpO2Qud3JpdGVjaHVuaz1udWxsLGQud3JpdGVjYj1udWxsLG51bGwhPT1jJiZ2b2lkIDAhPT1jJiZhLnB1c2goYyksZSYmZShiKTt2YXIgZj1hLl9yZWFkYWJsZVN0YXRlO2YucmVhZGluZz0hMSwoZi5uZWVkUmVhZGFibGV8fGYubGVuZ3RoPGYuaGlnaFdhdGVyTWFyaykmJmEuX3JlYWQoZi5oaWdoV2F0ZXJNYXJrKX1mdW5jdGlvbiBlKGEpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGUpKXJldHVybiBuZXcgZShhKTtnLmNhbGwodGhpcyxhKTt2YXIgYj0odGhpcy5fdHJhbnNmb3JtU3RhdGU9bmV3IGMoYSx0aGlzKSx0aGlzKTt0aGlzLl9yZWFkYWJsZVN0YXRlLm5lZWRSZWFkYWJsZT0hMCx0aGlzLl9yZWFkYWJsZVN0YXRlLnN5bmM9ITEsdGhpcy5vbmNlKFwiZmluaXNoXCIsZnVuY3Rpb24oKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLl9mbHVzaD90aGlzLl9mbHVzaChmdW5jdGlvbihhKXtmKGIsYSl9KTpmKGIpfSl9ZnVuY3Rpb24gZihhLGIpe2lmKGIpcmV0dXJuIGEuZW1pdChcImVycm9yXCIsYik7dmFyIGM9YS5fd3JpdGFibGVTdGF0ZSxkPShhLl9yZWFkYWJsZVN0YXRlLGEuX3RyYW5zZm9ybVN0YXRlKTtpZihjLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJjYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gd3MubGVuZ3RoICE9IDBcIik7aWYoZC50cmFuc2Zvcm1pbmcpdGhyb3cgbmV3IEVycm9yKFwiY2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHN0aWxsIHRyYW5zZm9ybWluZ1wiKTtyZXR1cm4gYS5wdXNoKG51bGwpfWIuZXhwb3J0cz1lO3ZhciBnPWEoXCIuL2R1cGxleC5qc1wiKSxoPWEoXCJpbmhlcml0c1wiKTtoKGUsZyksZS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLl90cmFuc2Zvcm1TdGF0ZS5uZWVkVHJhbnNmb3JtPSExLGcucHJvdG90eXBlLnB1c2guY2FsbCh0aGlzLGEsYil9LGUucHJvdG90eXBlLl90cmFuc2Zvcm09ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJub3QgaW1wbGVtZW50ZWRcIil9LGUucHJvdG90eXBlLl93cml0ZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5fdHJhbnNmb3JtU3RhdGU7aWYoZC53cml0ZWNiPWMsZC53cml0ZWNodW5rPWEsZC53cml0ZWVuY29kaW5nPWIsIWQudHJhbnNmb3JtaW5nKXt2YXIgZT10aGlzLl9yZWFkYWJsZVN0YXRlOyhkLm5lZWRUcmFuc2Zvcm18fGUubmVlZFJlYWRhYmxlfHxlLmxlbmd0aDxlLmhpZ2hXYXRlck1hcmspJiZ0aGlzLl9yZWFkKGUuaGlnaFdhdGVyTWFyayl9fSxlLnByb3RvdHlwZS5fcmVhZD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuX3RyYW5zZm9ybVN0YXRlO2Eud3JpdGVjaHVuayYmYS53cml0ZWNiJiYhYS50cmFuc2Zvcm1pbmc/KGEudHJhbnNmb3JtaW5nPSEwLHRoaXMuX3RyYW5zZm9ybShhLndyaXRlY2h1bmssYS53cml0ZWVuY29kaW5nLGEuYWZ0ZXJUcmFuc2Zvcm0pKTphLm5lZWRUcmFuc2Zvcm09ITB9fSx7XCIuL2R1cGxleC5qc1wiOjExLGluaGVyaXRzOjE5fV0sMTc6W2Z1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIsYyl7dGhpcy5jaHVuaz1hLHRoaXMuZW5jb2Rpbmc9Yix0aGlzLmNhbGxiYWNrPWN9ZnVuY3Rpb24gZChhLGIpe2E9YXx8e307dmFyIGM9YS5oaWdoV2F0ZXJNYXJrO3RoaXMuaGlnaFdhdGVyTWFyaz1jfHwwPT09Yz9jOjE2Mzg0LHRoaXMub2JqZWN0TW9kZT0hIWEub2JqZWN0TW9kZSx0aGlzLmhpZ2hXYXRlck1hcms9fn50aGlzLmhpZ2hXYXRlck1hcmssdGhpcy5uZWVkRHJhaW49ITEsdGhpcy5lbmRpbmc9ITEsdGhpcy5lbmRlZD0hMSx0aGlzLmZpbmlzaGVkPSExO3ZhciBkPWEuZGVjb2RlU3RyaW5ncz09PSExO3RoaXMuZGVjb2RlU3RyaW5ncz0hZCx0aGlzLmRlZmF1bHRFbmNvZGluZz1hLmRlZmF1bHRFbmNvZGluZ3x8XCJ1dGY4XCIsdGhpcy5sZW5ndGg9MCx0aGlzLndyaXRpbmc9ITEsdGhpcy5zeW5jPSEwLHRoaXMuYnVmZmVyUHJvY2Vzc2luZz0hMSx0aGlzLm9ud3JpdGU9ZnVuY3Rpb24oYSl7bShiLGEpfSx0aGlzLndyaXRlY2I9bnVsbCx0aGlzLndyaXRlbGVuPTAsdGhpcy5idWZmZXI9W119ZnVuY3Rpb24gZShhKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGV8fHRoaXMgaW5zdGFuY2VvZiB3LkR1cGxleD8odGhpcy5fd3JpdGFibGVTdGF0ZT1uZXcgZChhLHRoaXMpLHRoaXMud3JpdGFibGU9ITAsdm9pZCB3LmNhbGwodGhpcykpOm5ldyBlKGEpfWZ1bmN0aW9uIGYoYSxiLGMpe3ZhciBkPW5ldyBFcnJvcihcIndyaXRlIGFmdGVyIGVuZFwiKTthLmVtaXQoXCJlcnJvclwiLGQpLHgoZnVuY3Rpb24oKXtjKGQpfSl9ZnVuY3Rpb24gZyhhLGIsYyxkKXt2YXIgZT0hMDtpZigheS5pc0J1ZmZlcihjKSYmXCJzdHJpbmdcIiE9dHlwZW9mIGMmJm51bGwhPT1jJiZ2b2lkIDAhPT1jJiYhYi5vYmplY3RNb2RlKXt2YXIgZj1uZXcgVHlwZUVycm9yKFwiSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVua1wiKTthLmVtaXQoXCJlcnJvclwiLGYpLHgoZnVuY3Rpb24oKXtkKGYpfSksZT0hMX1yZXR1cm4gZX1mdW5jdGlvbiBoKGEsYixjKXtyZXR1cm4gYS5vYmplY3RNb2RlfHxhLmRlY29kZVN0cmluZ3M9PT0hMXx8XCJzdHJpbmdcIiE9dHlwZW9mIGJ8fChiPW5ldyB5KGIsYykpLGJ9ZnVuY3Rpb24gaShhLGIsZCxlLGYpe2Q9aChiLGQsZSk7dmFyIGc9Yi5vYmplY3RNb2RlPzE6ZC5sZW5ndGg7Yi5sZW5ndGgrPWc7dmFyIGk9Yi5sZW5ndGg8Yi5oaWdoV2F0ZXJNYXJrO3JldHVybiBiLm5lZWREcmFpbj0haSxiLndyaXRpbmc/Yi5idWZmZXIucHVzaChuZXcgYyhkLGUsZikpOmooYSxiLGcsZCxlLGYpLGl9ZnVuY3Rpb24gaihhLGIsYyxkLGUsZil7Yi53cml0ZWxlbj1jLGIud3JpdGVjYj1mLGIud3JpdGluZz0hMCxiLnN5bmM9ITAsYS5fd3JpdGUoZCxlLGIub253cml0ZSksYi5zeW5jPSExfWZ1bmN0aW9uIGsoYSxiLGMsZCxlKXtjP3goZnVuY3Rpb24oKXtlKGQpfSk6ZShkKSxhLmVtaXQoXCJlcnJvclwiLGQpfWZ1bmN0aW9uIGwoYSl7YS53cml0aW5nPSExLGEud3JpdGVjYj1udWxsLGEubGVuZ3RoLT1hLndyaXRlbGVuLGEud3JpdGVsZW49MH1mdW5jdGlvbiBtKGEsYil7dmFyIGM9YS5fd3JpdGFibGVTdGF0ZSxkPWMuc3luYyxlPWMud3JpdGVjYjtpZihsKGMpLGIpayhhLGMsZCxiLGUpO2Vsc2V7dmFyIGY9cShhLGMpO2Z8fGMuYnVmZmVyUHJvY2Vzc2luZ3x8IWMuYnVmZmVyLmxlbmd0aHx8cChhLGMpLGQ/eChmdW5jdGlvbigpe24oYSxjLGYsZSl9KTpuKGEsYyxmLGUpfX1mdW5jdGlvbiBuKGEsYixjLGQpe2N8fG8oYSxiKSxkKCksYyYmcihhLGIpfWZ1bmN0aW9uIG8oYSxiKXswPT09Yi5sZW5ndGgmJmIubmVlZERyYWluJiYoYi5uZWVkRHJhaW49ITEsYS5lbWl0KFwiZHJhaW5cIikpfWZ1bmN0aW9uIHAoYSxiKXtiLmJ1ZmZlclByb2Nlc3Npbmc9ITA7Zm9yKHZhciBjPTA7YzxiLmJ1ZmZlci5sZW5ndGg7YysrKXt2YXIgZD1iLmJ1ZmZlcltjXSxlPWQuY2h1bmssZj1kLmVuY29kaW5nLGc9ZC5jYWxsYmFjayxoPWIub2JqZWN0TW9kZT8xOmUubGVuZ3RoO2lmKGooYSxiLGgsZSxmLGcpLGIud3JpdGluZyl7YysrO2JyZWFrfX1iLmJ1ZmZlclByb2Nlc3Npbmc9ITEsYzxiLmJ1ZmZlci5sZW5ndGg/Yi5idWZmZXI9Yi5idWZmZXIuc2xpY2UoYyk6Yi5idWZmZXIubGVuZ3RoPTB9ZnVuY3Rpb24gcShhLGIpe3JldHVybiBiLmVuZGluZyYmMD09PWIubGVuZ3RoJiYhYi5maW5pc2hlZCYmIWIud3JpdGluZ31mdW5jdGlvbiByKGEsYil7dmFyIGM9cShhLGIpO3JldHVybiBjJiYoYi5maW5pc2hlZD0hMCxhLmVtaXQoXCJmaW5pc2hcIikpLGN9ZnVuY3Rpb24gcyhhLGIsYyl7Yi5lbmRpbmc9ITAscihhLGIpLGMmJihiLmZpbmlzaGVkP3goYyk6YS5vbmNlKFwiZmluaXNoXCIsYykpLGIuZW5kZWQ9ITB9Yi5leHBvcnRzPWUsZS5Xcml0YWJsZVN0YXRlPWQ7dmFyIHQ9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFVpbnQ4QXJyYXk/ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBVaW50OEFycmF5fTpmdW5jdGlvbihhKXtyZXR1cm4gYSYmYS5jb25zdHJ1Y3RvciYmXCJVaW50OEFycmF5XCI9PT1hLmNvbnN0cnVjdG9yLm5hbWV9LHU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEFycmF5QnVmZmVyP2Z1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXJ9OmZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLmNvbnN0cnVjdG9yJiZcIkFycmF5QnVmZmVyXCI9PT1hLmNvbnN0cnVjdG9yLm5hbWV9LHY9YShcImluaGVyaXRzXCIpLHc9YShcIi4vaW5kZXguanNcIikseD1hKFwicHJvY2Vzcy9icm93c2VyLmpzXCIpLm5leHRUaWNrLHk9YShcImJ1ZmZlclwiKS5CdWZmZXI7dihlLHcpLGUucHJvdG90eXBlLnBpcGU9ZnVuY3Rpb24oKXt0aGlzLmVtaXQoXCJlcnJvclwiLG5ldyBFcnJvcihcIkNhbm5vdCBwaXBlLiBOb3QgcmVhZGFibGUuXCIpKX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuX3dyaXRhYmxlU3RhdGUsZT0hMTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBiJiYoYz1iLGI9bnVsbCksIXkuaXNCdWZmZXIoYSkmJnQoYSkmJihhPW5ldyB5KGEpKSx1KGEpJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgVWludDhBcnJheSYmKGE9bmV3IHkobmV3IFVpbnQ4QXJyYXkoYSkpKSx5LmlzQnVmZmVyKGEpP2I9XCJidWZmZXJcIjpifHwoYj1kLmRlZmF1bHRFbmNvZGluZyksXCJmdW5jdGlvblwiIT10eXBlb2YgYyYmKGM9ZnVuY3Rpb24oKXt9KSxkLmVuZGVkP2YodGhpcyxkLGMpOmcodGhpcyxkLGEsYykmJihlPWkodGhpcyxkLGEsYixjKSksZX0sZS5wcm90b3R5cGUuX3dyaXRlPWZ1bmN0aW9uKGEsYixjKXtjKG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKSl9LGUucHJvdG90eXBlLmVuZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5fd3JpdGFibGVTdGF0ZTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBhPyhjPWEsYT1udWxsLGI9bnVsbCk6XCJmdW5jdGlvblwiPT10eXBlb2YgYiYmKGM9YixiPW51bGwpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBhJiZudWxsIT09YSYmdGhpcy53cml0ZShhLGIpLGQuZW5kaW5nfHxkLmZpbmlzaGVkfHxzKHRoaXMsZCxjKX19LHtcIi4vaW5kZXguanNcIjoxMixidWZmZXI6Nixpbmhlcml0czoxOSxcInByb2Nlc3MvYnJvd3Nlci5qc1wiOjEzfV0sMTg6W2Z1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe2lmKGEmJiFoLmlzRW5jb2RpbmcoYSkpdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrYSl9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYS50b1N0cmluZyh0aGlzLmVuY29kaW5nKX1mdW5jdGlvbiBmKGEpe3ZhciBiPXRoaXMuY2hhclJlY2VpdmVkPWEubGVuZ3RoJTI7cmV0dXJuIHRoaXMuY2hhckxlbmd0aD1iPzI6MCxifWZ1bmN0aW9uIGcoYSl7dmFyIGI9dGhpcy5jaGFyUmVjZWl2ZWQ9YS5sZW5ndGglMztyZXR1cm4gdGhpcy5jaGFyTGVuZ3RoPWI/MzowLGJ9dmFyIGg9YShcImJ1ZmZlclwiKS5CdWZmZXIsaT1jLlN0cmluZ0RlY29kZXI9ZnVuY3Rpb24oYSl7c3dpdGNoKHRoaXMuZW5jb2Rpbmc9KGF8fFwidXRmOFwiKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1stX10vLFwiXCIpLGQoYSksdGhpcy5lbmNvZGluZyl7Y2FzZVwidXRmOFwiOnRoaXMuc3Vycm9nYXRlU2l6ZT0zO2JyZWFrO2Nhc2VcInVjczJcIjpjYXNlXCJ1dGYxNmxlXCI6dGhpcy5zdXJyb2dhdGVTaXplPTIsdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcj1mO2JyZWFrO2Nhc2VcImJhc2U2NFwiOnRoaXMuc3Vycm9nYXRlU2l6ZT0zLHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXI9ZzticmVhaztkZWZhdWx0OnJldHVybiB2b2lkKHRoaXMud3JpdGU9ZSl9dGhpcy5jaGFyQnVmZmVyPW5ldyBoKDYpLHRoaXMuY2hhclJlY2VpdmVkPTAsdGhpcy5jaGFyTGVuZ3RoPTB9O2kucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cIlwiLGM9MDt0aGlzLmNoYXJMZW5ndGg7KXt2YXIgZD1hLmxlbmd0aD49dGhpcy5jaGFyTGVuZ3RoLXRoaXMuY2hhclJlY2VpdmVkP3RoaXMuY2hhckxlbmd0aC10aGlzLmNoYXJSZWNlaXZlZDphLmxlbmd0aDtpZihhLmNvcHkodGhpcy5jaGFyQnVmZmVyLHRoaXMuY2hhclJlY2VpdmVkLGMsZCksdGhpcy5jaGFyUmVjZWl2ZWQrPWQtYyxjPWQsdGhpcy5jaGFyUmVjZWl2ZWQ8dGhpcy5jaGFyTGVuZ3RoKXJldHVyblwiXCI7Yj10aGlzLmNoYXJCdWZmZXIuc2xpY2UoMCx0aGlzLmNoYXJMZW5ndGgpLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO3ZhciBlPWIuY2hhckNvZGVBdChiLmxlbmd0aC0xKTtpZighKGU+PTU1Mjk2JiY1NjMxOT49ZSkpe2lmKHRoaXMuY2hhclJlY2VpdmVkPXRoaXMuY2hhckxlbmd0aD0wLGQ9PWEubGVuZ3RoKXJldHVybiBiO2E9YS5zbGljZShkLGEubGVuZ3RoKTticmVha310aGlzLmNoYXJMZW5ndGgrPXRoaXMuc3Vycm9nYXRlU2l6ZSxiPVwiXCJ9dmFyIGY9dGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcihhKSxnPWEubGVuZ3RoO3RoaXMuY2hhckxlbmd0aCYmKGEuY29weSh0aGlzLmNoYXJCdWZmZXIsMCxhLmxlbmd0aC1mLGcpLHRoaXMuY2hhclJlY2VpdmVkPWYsZy09ZiksYis9YS50b1N0cmluZyh0aGlzLmVuY29kaW5nLDAsZyk7dmFyIGc9Yi5sZW5ndGgtMSxlPWIuY2hhckNvZGVBdChnKTtpZihlPj01NTI5NiYmNTYzMTk+PWUpe3ZhciBoPXRoaXMuc3Vycm9nYXRlU2l6ZTtyZXR1cm4gdGhpcy5jaGFyTGVuZ3RoKz1oLHRoaXMuY2hhclJlY2VpdmVkKz1oLHRoaXMuY2hhckJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlcixoLDAsaCksdGhpcy5jaGFyQnVmZmVyLndyaXRlKGIuY2hhckF0KGIubGVuZ3RoLTEpLHRoaXMuZW5jb2RpbmcpLGIuc3Vic3RyaW5nKDAsZyl9cmV0dXJuIGJ9LGkucHJvdG90eXBlLmRldGVjdEluY29tcGxldGVDaGFyPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aD49Mz8zOmEubGVuZ3RoO2I+MDtiLS0pe3ZhciBjPWFbYS5sZW5ndGgtYl07aWYoMT09YiYmYz4+NT09Nil7dGhpcy5jaGFyTGVuZ3RoPTI7YnJlYWt9aWYoMj49YiYmYz4+ND09MTQpe3RoaXMuY2hhckxlbmd0aD0zO2JyZWFrfWlmKDM+PWImJmM+PjM9PTMwKXt0aGlzLmNoYXJMZW5ndGg9NDticmVha319cmV0dXJuIGJ9LGkucHJvdG90eXBlLmVuZD1mdW5jdGlvbihhKXt2YXIgYj1cIlwiO2lmKGEmJmEubGVuZ3RoJiYoYj10aGlzLndyaXRlKGEpKSx0aGlzLmNoYXJSZWNlaXZlZCl7dmFyIGM9dGhpcy5jaGFyUmVjZWl2ZWQsZD10aGlzLmNoYXJCdWZmZXIsZT10aGlzLmVuY29kaW5nO2IrPWQuc2xpY2UoMCxjKS50b1N0cmluZyhlKX1yZXR1cm4gYn19LHtidWZmZXI6Nn1dLDE5OltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGEsYil7YS5zdXBlcl89YixhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGIucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6YSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KX06ZnVuY3Rpb24oYSxiKXthLnN1cGVyXz1iO3ZhciBjPWZ1bmN0aW9uKCl7fTtjLnByb3RvdHlwZT1iLnByb3RvdHlwZSxhLnByb3RvdHlwZT1uZXcgYyxhLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hfX0se31dLDIwOltmdW5jdGlvbihhLGIsYyl7KGZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxkPWEuXyxlPXt9LGY9QXJyYXkucHJvdG90eXBlLGc9T2JqZWN0LnByb3RvdHlwZSxoPUZ1bmN0aW9uLnByb3RvdHlwZSxpPWYucHVzaCxqPWYuc2xpY2Usaz1mLmNvbmNhdCxsPWcudG9TdHJpbmcsbT1nLmhhc093blByb3BlcnR5LG49Zi5mb3JFYWNoLG89Zi5tYXAscD1mLnJlZHVjZSxxPWYucmVkdWNlUmlnaHQscj1mLmZpbHRlcixzPWYuZXZlcnksdD1mLnNvbWUsdT1mLmluZGV4T2Ysdj1mLmxhc3RJbmRleE9mLHc9QXJyYXkuaXNBcnJheSx4PU9iamVjdC5rZXlzLHk9aC5iaW5kLHo9ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiB6P2E6dGhpcyBpbnN0YW5jZW9mIHo/dm9pZCh0aGlzLl93cmFwcGVkPWEpOm5ldyB6KGEpfTtcInVuZGVmaW5lZFwiIT10eXBlb2YgYz8oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGImJmIuZXhwb3J0cyYmKGM9Yi5leHBvcnRzPXopLGMuXz16KTphLl89eix6LlZFUlNJT049XCIxLjYuMFwiO3ZhciBBPXouZWFjaD16LmZvckVhY2g9ZnVuY3Rpb24oYSxiLGMpe2lmKG51bGw9PWEpcmV0dXJuIGE7aWYobiYmYS5mb3JFYWNoPT09bilhLmZvckVhY2goYixjKTtlbHNlIGlmKGEubGVuZ3RoPT09K2EubGVuZ3RoKXtmb3IodmFyIGQ9MCxmPWEubGVuZ3RoO2Y+ZDtkKyspaWYoYi5jYWxsKGMsYVtkXSxkLGEpPT09ZSlyZXR1cm59ZWxzZSBmb3IodmFyIGc9ei5rZXlzKGEpLGQ9MCxmPWcubGVuZ3RoO2Y+ZDtkKyspaWYoYi5jYWxsKGMsYVtnW2RdXSxnW2RdLGEpPT09ZSlyZXR1cm47cmV0dXJuIGF9O3oubWFwPXouY29sbGVjdD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9W107cmV0dXJuIG51bGw9PWE/ZDpvJiZhLm1hcD09PW8/YS5tYXAoYixjKTooQShhLGZ1bmN0aW9uKGEsZSxmKXtkLnB1c2goYi5jYWxsKGMsYSxlLGYpKX0pLGQpfTt2YXIgQj1cIlJlZHVjZSBvZiBlbXB0eSBhcnJheSB3aXRoIG5vIGluaXRpYWwgdmFsdWVcIjt6LnJlZHVjZT16LmZvbGRsPXouaW5qZWN0PWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MjtpZihudWxsPT1hJiYoYT1bXSkscCYmYS5yZWR1Y2U9PT1wKXJldHVybiBkJiYoYj16LmJpbmQoYixkKSksZT9hLnJlZHVjZShiLGMpOmEucmVkdWNlKGIpO2lmKEEoYSxmdW5jdGlvbihhLGYsZyl7ZT9jPWIuY2FsbChkLGMsYSxmLGcpOihjPWEsZT0hMCl9KSwhZSl0aHJvdyBuZXcgVHlwZUVycm9yKEIpO3JldHVybiBjfSx6LnJlZHVjZVJpZ2h0PXouZm9sZHI9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4yO2lmKG51bGw9PWEmJihhPVtdKSxxJiZhLnJlZHVjZVJpZ2h0PT09cSlyZXR1cm4gZCYmKGI9ei5iaW5kKGIsZCkpLGU/YS5yZWR1Y2VSaWdodChiLGMpOmEucmVkdWNlUmlnaHQoYik7dmFyIGY9YS5sZW5ndGg7aWYoZiE9PStmKXt2YXIgZz16LmtleXMoYSk7Zj1nLmxlbmd0aH1pZihBKGEsZnVuY3Rpb24oaCxpLGope2k9Zz9nWy0tZl06LS1mLGU/Yz1iLmNhbGwoZCxjLGFbaV0saSxqKTooYz1hW2ldLGU9ITApfSksIWUpdGhyb3cgbmV3IFR5cGVFcnJvcihCKTtyZXR1cm4gY30sei5maW5kPXouZGV0ZWN0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gQyhhLGZ1bmN0aW9uKGEsZSxmKXtyZXR1cm4gYi5jYWxsKGMsYSxlLGYpPyhkPWEsITApOnZvaWQgMH0pLGR9LHouZmlsdGVyPXouc2VsZWN0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXTtyZXR1cm4gbnVsbD09YT9kOnImJmEuZmlsdGVyPT09cj9hLmZpbHRlcihiLGMpOihBKGEsZnVuY3Rpb24oYSxlLGYpe2IuY2FsbChjLGEsZSxmKSYmZC5wdXNoKGEpfSksZCl9LHoucmVqZWN0PWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gei5maWx0ZXIoYSxmdW5jdGlvbihhLGQsZSl7cmV0dXJuIWIuY2FsbChjLGEsZCxlKX0sYyl9LHouZXZlcnk9ei5hbGw9ZnVuY3Rpb24oYSxiLGMpe2J8fChiPXouaWRlbnRpdHkpO3ZhciBkPSEwO3JldHVybiBudWxsPT1hP2Q6cyYmYS5ldmVyeT09PXM/YS5ldmVyeShiLGMpOihBKGEsZnVuY3Rpb24oYSxmLGcpe3JldHVybihkPWQmJmIuY2FsbChjLGEsZixnKSk/dm9pZCAwOmV9KSwhIWQpfTt2YXIgQz16LnNvbWU9ei5hbnk9ZnVuY3Rpb24oYSxiLGMpe2J8fChiPXouaWRlbnRpdHkpO3ZhciBkPSExO3JldHVybiBudWxsPT1hP2Q6dCYmYS5zb21lPT09dD9hLnNvbWUoYixjKTooQShhLGZ1bmN0aW9uKGEsZixnKXtyZXR1cm4gZHx8KGQ9Yi5jYWxsKGMsYSxmLGcpKT9lOnZvaWQgMH0pLCEhZCl9O3ouY29udGFpbnM9ei5pbmNsdWRlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGw9PWE/ITE6dSYmYS5pbmRleE9mPT09dT8tMSE9YS5pbmRleE9mKGIpOkMoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9KX0sei5pbnZva2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz1qLmNhbGwoYXJndW1lbnRzLDIpLGQ9ei5pc0Z1bmN0aW9uKGIpO3JldHVybiB6Lm1hcChhLGZ1bmN0aW9uKGEpe3JldHVybihkP2I6YVtiXSkuYXBwbHkoYSxjKX0pfSx6LnBsdWNrPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHoubWFwKGEsei5wcm9wZXJ0eShiKSl9LHoud2hlcmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gei5maWx0ZXIoYSx6Lm1hdGNoZXMoYikpfSx6LmZpbmRXaGVyZT1mdW5jdGlvbihhLGIpe3JldHVybiB6LmZpbmQoYSx6Lm1hdGNoZXMoYikpfSx6Lm1heD1mdW5jdGlvbihhLGIsYyl7aWYoIWImJnouaXNBcnJheShhKSYmYVswXT09PSthWzBdJiZhLmxlbmd0aDw2NTUzNSlyZXR1cm4gTWF0aC5tYXguYXBwbHkoTWF0aCxhKTt2YXIgZD0tMS8wLGU9LTEvMDtyZXR1cm4gQShhLGZ1bmN0aW9uKGEsZixnKXt2YXIgaD1iP2IuY2FsbChjLGEsZixnKTphO2g+ZSYmKGQ9YSxlPWgpfSksZH0sei5taW49ZnVuY3Rpb24oYSxiLGMpe2lmKCFiJiZ6LmlzQXJyYXkoYSkmJmFbMF09PT0rYVswXSYmYS5sZW5ndGg8NjU1MzUpcmV0dXJuIE1hdGgubWluLmFwcGx5KE1hdGgsYSk7dmFyIGQ9MS8wLGU9MS8wO3JldHVybiBBKGEsZnVuY3Rpb24oYSxmLGcpe3ZhciBoPWI/Yi5jYWxsKGMsYSxmLGcpOmE7ZT5oJiYoZD1hLGU9aCl9KSxkfSx6LnNodWZmbGU9ZnVuY3Rpb24oYSl7dmFyIGIsYz0wLGQ9W107cmV0dXJuIEEoYSxmdW5jdGlvbihhKXtiPXoucmFuZG9tKGMrKyksZFtjLTFdPWRbYl0sZFtiXT1hfSksZH0sei5zYW1wbGU9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1ifHxjPyhhLmxlbmd0aCE9PSthLmxlbmd0aCYmKGE9ei52YWx1ZXMoYSkpLGFbei5yYW5kb20oYS5sZW5ndGgtMSldKTp6LnNodWZmbGUoYSkuc2xpY2UoMCxNYXRoLm1heCgwLGIpKX07dmFyIEQ9ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/ei5pZGVudGl0eTp6LmlzRnVuY3Rpb24oYSk/YTp6LnByb3BlcnR5KGEpfTt6LnNvcnRCeT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGI9RChiKSx6LnBsdWNrKHoubWFwKGEsZnVuY3Rpb24oYSxkLGUpe3JldHVybnt2YWx1ZTphLGluZGV4OmQsY3JpdGVyaWE6Yi5jYWxsKGMsYSxkLGUpfX0pLnNvcnQoZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmNyaXRlcmlhLGQ9Yi5jcml0ZXJpYTtpZihjIT09ZCl7aWYoYz5kfHx2b2lkIDA9PT1jKXJldHVybiAxO2lmKGQ+Y3x8dm9pZCAwPT09ZClyZXR1cm4tMX1yZXR1cm4gYS5pbmRleC1iLmluZGV4fSksXCJ2YWx1ZVwiKX07dmFyIEU9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXt2YXIgZT17fTtyZXR1cm4gYz1EKGMpLEEoYixmdW5jdGlvbihmLGcpe3ZhciBoPWMuY2FsbChkLGYsZyxiKTthKGUsaCxmKX0pLGV9fTt6Lmdyb3VwQnk9RShmdW5jdGlvbihhLGIsYyl7ei5oYXMoYSxiKT9hW2JdLnB1c2goYyk6YVtiXT1bY119KSx6LmluZGV4Qnk9RShmdW5jdGlvbihhLGIsYyl7YVtiXT1jfSksei5jb3VudEJ5PUUoZnVuY3Rpb24oYSxiKXt6LmhhcyhhLGIpP2FbYl0rKzphW2JdPTF9KSx6LnNvcnRlZEluZGV4PWZ1bmN0aW9uKGEsYixjLGQpe2M9RChjKTtmb3IodmFyIGU9Yy5jYWxsKGQsYiksZj0wLGc9YS5sZW5ndGg7Zz5mOyl7dmFyIGg9ZitnPj4+MTtjLmNhbGwoZCxhW2hdKTxlP2Y9aCsxOmc9aH1yZXR1cm4gZn0sei50b0FycmF5PWZ1bmN0aW9uKGEpe3JldHVybiBhP3ouaXNBcnJheShhKT9qLmNhbGwoYSk6YS5sZW5ndGg9PT0rYS5sZW5ndGg/ei5tYXAoYSx6LmlkZW50aXR5KTp6LnZhbHVlcyhhKTpbXX0sei5zaXplPWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hPzA6YS5sZW5ndGg9PT0rYS5sZW5ndGg/YS5sZW5ndGg6ei5rZXlzKGEpLmxlbmd0aH0sei5maXJzdD16LmhlYWQ9ei50YWtlPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbnVsbD09YT92b2lkIDA6bnVsbD09Ynx8Yz9hWzBdOjA+Yj9bXTpqLmNhbGwoYSwwLGIpfSx6LmluaXRpYWw9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwoYSwwLGEubGVuZ3RoLShudWxsPT1ifHxjPzE6YikpfSx6Lmxhc3Q9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1hP3ZvaWQgMDpudWxsPT1ifHxjP2FbYS5sZW5ndGgtMV06ai5jYWxsKGEsTWF0aC5tYXgoYS5sZW5ndGgtYiwwKSl9LHoucmVzdD16LnRhaWw9ei5kcm9wPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gai5jYWxsKGEsbnVsbD09Ynx8Yz8xOmIpfSx6LmNvbXBhY3Q9ZnVuY3Rpb24oYSl7cmV0dXJuIHouZmlsdGVyKGEsei5pZGVudGl0eSl9O3ZhciBGPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYiYmei5ldmVyeShhLHouaXNBcnJheSk/ay5hcHBseShjLGEpOihBKGEsZnVuY3Rpb24oYSl7ei5pc0FycmF5KGEpfHx6LmlzQXJndW1lbnRzKGEpP2I/aS5hcHBseShjLGEpOkYoYSxiLGMpOmMucHVzaChhKX0pLGMpfTt6LmZsYXR0ZW49ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRihhLGIsW10pfSx6LndpdGhvdXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHouZGlmZmVyZW5jZShhLGouY2FsbChhcmd1bWVudHMsMSkpfSx6LnBhcnRpdGlvbj1mdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9W107cmV0dXJuIEEoYSxmdW5jdGlvbihhKXsoYihhKT9jOmQpLnB1c2goYSl9KSxbYyxkXX0sei51bmlxPXoudW5pcXVlPWZ1bmN0aW9uKGEsYixjLGQpe3ouaXNGdW5jdGlvbihiKSYmKGQ9YyxjPWIsYj0hMSk7dmFyIGU9Yz96Lm1hcChhLGMsZCk6YSxmPVtdLGc9W107cmV0dXJuIEEoZSxmdW5jdGlvbihjLGQpeyhiP2QmJmdbZy5sZW5ndGgtMV09PT1jOnouY29udGFpbnMoZyxjKSl8fChnLnB1c2goYyksZi5wdXNoKGFbZF0pKX0pLGZ9LHoudW5pb249ZnVuY3Rpb24oKXtyZXR1cm4gei51bmlxKHouZmxhdHRlbihhcmd1bWVudHMsITApKX0sei5pbnRlcnNlY3Rpb249ZnVuY3Rpb24oYSl7dmFyIGI9ai5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gei5maWx0ZXIoei51bmlxKGEpLGZ1bmN0aW9uKGEpe3JldHVybiB6LmV2ZXJ5KGIsZnVuY3Rpb24oYil7cmV0dXJuIHouY29udGFpbnMoYixhKX0pfSl9LHouZGlmZmVyZW5jZT1mdW5jdGlvbihhKXt2YXIgYj1rLmFwcGx5KGYsai5jYWxsKGFyZ3VtZW50cywxKSk7cmV0dXJuIHouZmlsdGVyKGEsZnVuY3Rpb24oYSl7cmV0dXJuIXouY29udGFpbnMoYixhKX0pfSx6LnppcD1mdW5jdGlvbigpe2Zvcih2YXIgYT16Lm1heCh6LnBsdWNrKGFyZ3VtZW50cyxcImxlbmd0aFwiKS5jb25jYXQoMCkpLGI9bmV3IEFycmF5KGEpLGM9MDthPmM7YysrKWJbY109ei5wbHVjayhhcmd1bWVudHMsXCJcIitjKTtyZXR1cm4gYn0sei5vYmplY3Q9ZnVuY3Rpb24oYSxiKXtpZihudWxsPT1hKXJldHVybnt9O2Zvcih2YXIgYz17fSxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWI/Y1thW2RdXT1iW2RdOmNbYVtkXVswXV09YVtkXVsxXTtyZXR1cm4gY30sei5pbmRleE9mPWZ1bmN0aW9uKGEsYixjKXtpZihudWxsPT1hKXJldHVybi0xO3ZhciBkPTAsZT1hLmxlbmd0aDtpZihjKXtpZihcIm51bWJlclwiIT10eXBlb2YgYylyZXR1cm4gZD16LnNvcnRlZEluZGV4KGEsYiksYVtkXT09PWI/ZDotMTtkPTA+Yz9NYXRoLm1heCgwLGUrYyk6Y31pZih1JiZhLmluZGV4T2Y9PT11KXJldHVybiBhLmluZGV4T2YoYixjKTtmb3IoO2U+ZDtkKyspaWYoYVtkXT09PWIpcmV0dXJuIGQ7cmV0dXJuLTF9LHoubGFzdEluZGV4T2Y9ZnVuY3Rpb24oYSxiLGMpe2lmKG51bGw9PWEpcmV0dXJuLTE7dmFyIGQ9bnVsbCE9YztpZih2JiZhLmxhc3RJbmRleE9mPT09dilyZXR1cm4gZD9hLmxhc3RJbmRleE9mKGIsYyk6YS5sYXN0SW5kZXhPZihiKTtmb3IodmFyIGU9ZD9jOmEubGVuZ3RoO2UtLTspaWYoYVtlXT09PWIpcmV0dXJuIGU7cmV0dXJuLTF9LHoucmFuZ2U9ZnVuY3Rpb24oYSxiLGMpe2FyZ3VtZW50cy5sZW5ndGg8PTEmJihiPWF8fDAsYT0wKSxjPWFyZ3VtZW50c1syXXx8MTtmb3IodmFyIGQ9TWF0aC5tYXgoTWF0aC5jZWlsKChiLWEpL2MpLDApLGU9MCxmPW5ldyBBcnJheShkKTtkPmU7KWZbZSsrXT1hLGErPWM7cmV0dXJuIGZ9O3ZhciBHPWZ1bmN0aW9uKCl7fTt6LmJpbmQ9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2lmKHkmJmEuYmluZD09PXkpcmV0dXJuIHkuYXBwbHkoYSxqLmNhbGwoYXJndW1lbnRzLDEpKTtpZighei5pc0Z1bmN0aW9uKGEpKXRocm93IG5ldyBUeXBlRXJyb3I7cmV0dXJuIGM9ai5jYWxsKGFyZ3VtZW50cywyKSxkPWZ1bmN0aW9uKCl7aWYoISh0aGlzIGluc3RhbmNlb2YgZCkpcmV0dXJuIGEuYXBwbHkoYixjLmNvbmNhdChqLmNhbGwoYXJndW1lbnRzKSkpO0cucHJvdG90eXBlPWEucHJvdG90eXBlO3ZhciBlPW5ldyBHO0cucHJvdG90eXBlPW51bGw7dmFyIGY9YS5hcHBseShlLGMuY29uY2F0KGouY2FsbChhcmd1bWVudHMpKSk7cmV0dXJuIE9iamVjdChmKT09PWY/ZjplfX0sei5wYXJ0aWFsPWZ1bmN0aW9uKGEpe3ZhciBiPWouY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciBjPTAsZD1iLnNsaWNlKCksZT0wLGY9ZC5sZW5ndGg7Zj5lO2UrKylkW2VdPT09eiYmKGRbZV09YXJndW1lbnRzW2MrK10pO2Zvcig7Yzxhcmd1bWVudHMubGVuZ3RoOylkLnB1c2goYXJndW1lbnRzW2MrK10pO3JldHVybiBhLmFwcGx5KHRoaXMsZCl9fSx6LmJpbmRBbGw9ZnVuY3Rpb24oYSl7dmFyIGI9ai5jYWxsKGFyZ3VtZW50cywxKTtpZigwPT09Yi5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lc1wiKTtyZXR1cm4gQShiLGZ1bmN0aW9uKGIpe2FbYl09ei5iaW5kKGFbYl0sYSl9KSxhfSx6Lm1lbW9pemU9ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtyZXR1cm4gYnx8KGI9ei5pZGVudGl0eSksZnVuY3Rpb24oKXt2YXIgZD1iLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gei5oYXMoYyxkKT9jW2RdOmNbZF09YS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSx6LmRlbGF5PWZ1bmN0aW9uKGEsYil7dmFyIGM9ai5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KG51bGwsYyl9LGIpfSx6LmRlZmVyPWZ1bmN0aW9uKGEpe3JldHVybiB6LmRlbGF5LmFwcGx5KHosW2EsMV0uY29uY2F0KGouY2FsbChhcmd1bWVudHMsMSkpKX0sei50aHJvdHRsZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGc9bnVsbCxoPTA7Y3x8KGM9e30pO3ZhciBpPWZ1bmN0aW9uKCl7aD1jLmxlYWRpbmc9PT0hMT8wOnoubm93KCksZz1udWxsLGY9YS5hcHBseShkLGUpLGQ9ZT1udWxsfTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaj16Lm5vdygpO2h8fGMubGVhZGluZyE9PSExfHwoaD1qKTt2YXIgaz1iLShqLWgpO3JldHVybiBkPXRoaXMsZT1hcmd1bWVudHMsMD49az8oY2xlYXJUaW1lb3V0KGcpLGc9bnVsbCxoPWosZj1hLmFwcGx5KGQsZSksZD1lPW51bGwpOmd8fGMudHJhaWxpbmc9PT0hMXx8KGc9c2V0VGltZW91dChpLGspKSxmfX0sei5kZWJvdW5jZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpPWZ1bmN0aW9uKCl7dmFyIGo9ei5ub3coKS1nO2I+aj9kPXNldFRpbWVvdXQoaSxiLWopOihkPW51bGwsY3x8KGg9YS5hcHBseShmLGUpLGY9ZT1udWxsKSl9O3JldHVybiBmdW5jdGlvbigpe2Y9dGhpcyxlPWFyZ3VtZW50cyxnPXoubm93KCk7dmFyIGo9YyYmIWQ7cmV0dXJuIGR8fChkPXNldFRpbWVvdXQoaSxiKSksaiYmKGg9YS5hcHBseShmLGUpLGY9ZT1udWxsKSxofX0sei5vbmNlPWZ1bmN0aW9uKGEpe3ZhciBiLGM9ITE7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGM/YjooYz0hMCxiPWEuYXBwbHkodGhpcyxhcmd1bWVudHMpLGE9bnVsbCxiKX19LHoud3JhcD1mdW5jdGlvbihhLGIpe3JldHVybiB6LnBhcnRpYWwoYixhKX0sei5jb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgYj1hcmd1bWVudHMsYz1hLmxlbmd0aC0xO2M+PTA7Yy0tKWI9W2FbY10uYXBwbHkodGhpcyxiKV07cmV0dXJuIGJbMF19fSx6LmFmdGVyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuLS1hPDE/Yi5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dm9pZCAwfX0sei5rZXlzPWZ1bmN0aW9uKGEpe2lmKCF6LmlzT2JqZWN0KGEpKXJldHVybltdO2lmKHgpcmV0dXJuIHgoYSk7dmFyIGI9W107Zm9yKHZhciBjIGluIGEpei5oYXMoYSxjKSYmYi5wdXNoKGMpO3JldHVybiBifSx6LnZhbHVlcz1mdW5jdGlvbihhKXtmb3IodmFyIGI9ei5rZXlzKGEpLGM9Yi5sZW5ndGgsZD1uZXcgQXJyYXkoYyksZT0wO2M+ZTtlKyspZFtlXT1hW2JbZV1dO3JldHVybiBkfSx6LnBhaXJzPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj16LmtleXMoYSksYz1iLmxlbmd0aCxkPW5ldyBBcnJheShjKSxlPTA7Yz5lO2UrKylkW2VdPVtiW2VdLGFbYltlXV1dO3JldHVybiBkfSx6LmludmVydD1mdW5jdGlvbihhKXtmb3IodmFyIGI9e30sYz16LmtleXMoYSksZD0wLGU9Yy5sZW5ndGg7ZT5kO2QrKyliW2FbY1tkXV1dPWNbZF07cmV0dXJuIGJ9LHouZnVuY3Rpb25zPXoubWV0aG9kcz1mdW5jdGlvbihhKXt2YXIgYj1bXTtmb3IodmFyIGMgaW4gYSl6LmlzRnVuY3Rpb24oYVtjXSkmJmIucHVzaChjKTtyZXR1cm4gYi5zb3J0KCl9LHouZXh0ZW5kPWZ1bmN0aW9uKGEpe3JldHVybiBBKGouY2FsbChhcmd1bWVudHMsMSksZnVuY3Rpb24oYil7aWYoYilmb3IodmFyIGMgaW4gYilhW2NdPWJbY119KSxhfSx6LnBpY2s9ZnVuY3Rpb24oYSl7dmFyIGI9e30sYz1rLmFwcGx5KGYsai5jYWxsKGFyZ3VtZW50cywxKSk7cmV0dXJuIEEoYyxmdW5jdGlvbihjKXtjIGluIGEmJihiW2NdPWFbY10pfSksYn0sei5vbWl0PWZ1bmN0aW9uKGEpe3ZhciBiPXt9LGM9ay5hcHBseShmLGouY2FsbChhcmd1bWVudHMsMSkpO2Zvcih2YXIgZCBpbiBhKXouY29udGFpbnMoYyxkKXx8KGJbZF09YVtkXSk7cmV0dXJuIGJ9LHouZGVmYXVsdHM9ZnVuY3Rpb24oYSl7cmV0dXJuIEEoai5jYWxsKGFyZ3VtZW50cywxKSxmdW5jdGlvbihiKXtpZihiKWZvcih2YXIgYyBpbiBiKXZvaWQgMD09PWFbY10mJihhW2NdPWJbY10pfSksYX0sei5jbG9uZT1mdW5jdGlvbihhKXtyZXR1cm4gei5pc09iamVjdChhKT96LmlzQXJyYXkoYSk/YS5zbGljZSgpOnouZXh0ZW5kKHt9LGEpOmF9LHoudGFwPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGIoYSksYX07dmFyIEg9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYT09PWIpcmV0dXJuIDAhPT1hfHwxL2E9PTEvYjtpZihudWxsPT1hfHxudWxsPT1iKXJldHVybiBhPT09YjthIGluc3RhbmNlb2YgeiYmKGE9YS5fd3JhcHBlZCksYiBpbnN0YW5jZW9mIHomJihiPWIuX3dyYXBwZWQpO3ZhciBlPWwuY2FsbChhKTtpZihlIT1sLmNhbGwoYikpcmV0dXJuITE7c3dpdGNoKGUpe2Nhc2VcIltvYmplY3QgU3RyaW5nXVwiOnJldHVybiBhPT1TdHJpbmcoYik7Y2FzZVwiW29iamVjdCBOdW1iZXJdXCI6cmV0dXJuIGEhPSthP2IhPStiOjA9PWE/MS9hPT0xL2I6YT09K2I7Y2FzZVwiW29iamVjdCBEYXRlXVwiOmNhc2VcIltvYmplY3QgQm9vbGVhbl1cIjpyZXR1cm4rYT09K2I7Y2FzZVwiW29iamVjdCBSZWdFeHBdXCI6cmV0dXJuIGEuc291cmNlPT1iLnNvdXJjZSYmYS5nbG9iYWw9PWIuZ2xvYmFsJiZhLm11bHRpbGluZT09Yi5tdWx0aWxpbmUmJmEuaWdub3JlQ2FzZT09Yi5pZ25vcmVDYXNlfWlmKFwib2JqZWN0XCIhPXR5cGVvZiBhfHxcIm9iamVjdFwiIT10eXBlb2YgYilyZXR1cm4hMTtmb3IodmFyIGY9Yy5sZW5ndGg7Zi0tOylpZihjW2ZdPT1hKXJldHVybiBkW2ZdPT1iO3ZhciBnPWEuY29uc3RydWN0b3IsaD1iLmNvbnN0cnVjdG9yO2lmKGchPT1oJiYhKHouaXNGdW5jdGlvbihnKSYmZyBpbnN0YW5jZW9mIGcmJnouaXNGdW5jdGlvbihoKSYmaCBpbnN0YW5jZW9mIGgpJiZcImNvbnN0cnVjdG9yXCJpbiBhJiZcImNvbnN0cnVjdG9yXCJpbiBiKXJldHVybiExO2MucHVzaChhKSxkLnB1c2goYik7dmFyIGk9MCxqPSEwO2lmKFwiW29iamVjdCBBcnJheV1cIj09ZSl7aWYoaT1hLmxlbmd0aCxqPWk9PWIubGVuZ3RoKWZvcig7aS0tJiYoaj1IKGFbaV0sYltpXSxjLGQpKTspO31lbHNle2Zvcih2YXIgayBpbiBhKWlmKHouaGFzKGEsaykmJihpKyssIShqPXouaGFzKGIsaykmJkgoYVtrXSxiW2tdLGMsZCkpKSlicmVhaztpZihqKXtmb3IoayBpbiBiKWlmKHouaGFzKGIsaykmJiFpLS0pYnJlYWs7aj0haX19cmV0dXJuIGMucG9wKCksZC5wb3AoKSxqfTt6LmlzRXF1YWw9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSChhLGIsW10sW10pfSx6LmlzRW1wdHk9ZnVuY3Rpb24oYSl7aWYobnVsbD09YSlyZXR1cm4hMDtpZih6LmlzQXJyYXkoYSl8fHouaXNTdHJpbmcoYSkpcmV0dXJuIDA9PT1hLmxlbmd0aDtmb3IodmFyIGIgaW4gYSlpZih6LmhhcyhhLGIpKXJldHVybiExO3JldHVybiEwfSx6LmlzRWxlbWVudD1mdW5jdGlvbihhKXtyZXR1cm4hKCFhfHwxIT09YS5ub2RlVHlwZSl9LHouaXNBcnJheT13fHxmdW5jdGlvbihhKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PWwuY2FsbChhKX0sei5pc09iamVjdD1mdW5jdGlvbihhKXtyZXR1cm4gYT09PU9iamVjdChhKX0sQShbXCJBcmd1bWVudHNcIixcIkZ1bmN0aW9uXCIsXCJTdHJpbmdcIixcIk51bWJlclwiLFwiRGF0ZVwiLFwiUmVnRXhwXCJdLGZ1bmN0aW9uKGEpe3pbXCJpc1wiK2FdPWZ1bmN0aW9uKGIpe3JldHVybiBsLmNhbGwoYik9PVwiW29iamVjdCBcIithK1wiXVwifX0pLHouaXNBcmd1bWVudHMoYXJndW1lbnRzKXx8KHouaXNBcmd1bWVudHM9ZnVuY3Rpb24oYSl7cmV0dXJuISghYXx8IXouaGFzKGEsXCJjYWxsZWVcIikpfSksXCJmdW5jdGlvblwiIT10eXBlb2YvLi8mJih6LmlzRnVuY3Rpb249ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgYX0pLHouaXNGaW5pdGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGlzRmluaXRlKGEpJiYhaXNOYU4ocGFyc2VGbG9hdChhKSl9LHouaXNOYU49ZnVuY3Rpb24oYSl7cmV0dXJuIHouaXNOdW1iZXIoYSkmJmEhPSthfSx6LmlzQm9vbGVhbj1mdW5jdGlvbihhKXtyZXR1cm4gYT09PSEwfHxhPT09ITF8fFwiW29iamVjdCBCb29sZWFuXVwiPT1sLmNhbGwoYSl9LHouaXNOdWxsPWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT09YX0sei5pc1VuZGVmaW5lZD1mdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwPT09YX0sei5oYXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbS5jYWxsKGEsYil9LHoubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLl89ZCx0aGlzfSx6LmlkZW50aXR5PWZ1bmN0aW9uKGEpe3JldHVybiBhfSx6LmNvbnN0YW50PWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhfX0sei5wcm9wZXJ0eT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGJbYV19fSx6Lm1hdGNoZXM9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2lmKGI9PT1hKXJldHVybiEwO2Zvcih2YXIgYyBpbiBhKWlmKGFbY10hPT1iW2NdKXJldHVybiExO3JldHVybiEwfX0sei50aW1lcz1mdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPUFycmF5KE1hdGgubWF4KDAsYSkpLGU9MDthPmU7ZSsrKWRbZV09Yi5jYWxsKGMsZSk7cmV0dXJuIGR9LHoucmFuZG9tPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGw9PWImJihiPWEsYT0wKSxhK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooYi1hKzEpKX0sei5ub3c9RGF0ZS5ub3d8fGZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9O3ZhciBJPXtlc2NhcGU6e1wiJlwiOlwiJmFtcDtcIixcIjxcIjpcIiZsdDtcIixcIj5cIjpcIiZndDtcIiwnXCInOlwiJnF1b3Q7XCIsXCInXCI6XCImI3gyNztcIn19O0kudW5lc2NhcGU9ei5pbnZlcnQoSS5lc2NhcGUpO3ZhciBKPXtlc2NhcGU6bmV3IFJlZ0V4cChcIltcIit6LmtleXMoSS5lc2NhcGUpLmpvaW4oXCJcIikrXCJdXCIsXCJnXCIpLHVuZXNjYXBlOm5ldyBSZWdFeHAoXCIoXCIrei5rZXlzKEkudW5lc2NhcGUpLmpvaW4oXCJ8XCIpK1wiKVwiLFwiZ1wiKX07ei5lYWNoKFtcImVzY2FwZVwiLFwidW5lc2NhcGVcIl0sZnVuY3Rpb24oYSl7elthXT1mdW5jdGlvbihiKXtyZXR1cm4gbnVsbD09Yj9cIlwiOihcIlwiK2IpLnJlcGxhY2UoSlthXSxmdW5jdGlvbihiKXtyZXR1cm4gSVthXVtiXX0pfX0pLHoucmVzdWx0PWZ1bmN0aW9uKGEsYil7aWYobnVsbD09YSlyZXR1cm4gdm9pZCAwO3ZhciBjPWFbYl07cmV0dXJuIHouaXNGdW5jdGlvbihjKT9jLmNhbGwoYSk6Y30sei5taXhpbj1mdW5jdGlvbihhKXtBKHouZnVuY3Rpb25zKGEpLGZ1bmN0aW9uKGIpe3ZhciBjPXpbYl09YVtiXTt6LnByb3RvdHlwZVtiXT1mdW5jdGlvbigpe3ZhciBhPVt0aGlzLl93cmFwcGVkXTtyZXR1cm4gaS5hcHBseShhLGFyZ3VtZW50cyksTy5jYWxsKHRoaXMsYy5hcHBseSh6LGEpKX19KX07dmFyIEs9MDt6LnVuaXF1ZUlkPWZ1bmN0aW9uKGEpe3ZhciBiPSsrSytcIlwiO3JldHVybiBhP2ErYjpifSx6LnRlbXBsYXRlU2V0dGluZ3M9e2V2YWx1YXRlOi88JShbXFxzXFxTXSs/KSU+L2csaW50ZXJwb2xhdGU6LzwlPShbXFxzXFxTXSs/KSU+L2csZXNjYXBlOi88JS0oW1xcc1xcU10rPyklPi9nfTt2YXIgTD0vKC4pXi8sTT17XCInXCI6XCInXCIsXCJcXFxcXCI6XCJcXFxcXCIsXCJcXHJcIjpcInJcIixcIlxcblwiOlwiblwiLFwiXHRcIjpcInRcIixcIlxcdTIwMjhcIjpcInUyMDI4XCIsXCJcXHUyMDI5XCI6XCJ1MjAyOVwifSxOPS9cXFxcfCd8XFxyfFxcbnxcXHR8XFx1MjAyOHxcXHUyMDI5L2c7ei50ZW1wbGF0ZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ7Yz16LmRlZmF1bHRzKHt9LGMsei50ZW1wbGF0ZVNldHRpbmdzKTt2YXIgZT1uZXcgUmVnRXhwKFsoYy5lc2NhcGV8fEwpLnNvdXJjZSwoYy5pbnRlcnBvbGF0ZXx8TCkuc291cmNlLChjLmV2YWx1YXRlfHxMKS5zb3VyY2VdLmpvaW4oXCJ8XCIpK1wifCRcIixcImdcIiksZj0wLGc9XCJfX3ArPSdcIjthLnJlcGxhY2UoZSxmdW5jdGlvbihiLGMsZCxlLGgpe3JldHVybiBnKz1hLnNsaWNlKGYsaCkucmVwbGFjZShOLGZ1bmN0aW9uKGEpe3JldHVyblwiXFxcXFwiK01bYV19KSxjJiYoZys9XCInK1xcbigoX190PShcIitjK1wiKSk9PW51bGw/Jyc6Xy5lc2NhcGUoX190KSkrXFxuJ1wiKSxkJiYoZys9XCInK1xcbigoX190PShcIitkK1wiKSk9PW51bGw/Jyc6X190KStcXG4nXCIpLGUmJihnKz1cIic7XFxuXCIrZStcIlxcbl9fcCs9J1wiKSxmPWgrYi5sZW5ndGgsYn0pLGcrPVwiJztcXG5cIixjLnZhcmlhYmxlfHwoZz1cIndpdGgob2JqfHx7fSl7XFxuXCIrZytcIn1cXG5cIiksZz1cInZhciBfX3QsX19wPScnLF9faj1BcnJheS5wcm90b3R5cGUuam9pbixwcmludD1mdW5jdGlvbigpe19fcCs9X19qLmNhbGwoYXJndW1lbnRzLCcnKTt9O1xcblwiK2crXCJyZXR1cm4gX19wO1xcblwiO3RyeXtkPW5ldyBGdW5jdGlvbihjLnZhcmlhYmxlfHxcIm9ialwiLFwiX1wiLGcpfWNhdGNoKGgpe3Rocm93IGguc291cmNlPWcsaH1pZihiKXJldHVybiBkKGIseik7dmFyIGk9ZnVuY3Rpb24oYSl7cmV0dXJuIGQuY2FsbCh0aGlzLGEseil9O3JldHVybiBpLnNvdXJjZT1cImZ1bmN0aW9uKFwiKyhjLnZhcmlhYmxlfHxcIm9ialwiKStcIil7XFxuXCIrZytcIn1cIixpfSx6LmNoYWluPWZ1bmN0aW9uKGEpe3JldHVybiB6KGEpLmNoYWluKCl9O3ZhciBPPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9jaGFpbj96KGEpLmNoYWluKCk6YX07ei5taXhpbih6KSxBKFtcInBvcFwiLFwicHVzaFwiLFwicmV2ZXJzZVwiLFwic2hpZnRcIixcInNvcnRcIixcInNwbGljZVwiLFwidW5zaGlmdFwiXSxmdW5jdGlvbihhKXt2YXIgYj1mW2FdO3oucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5fd3JhcHBlZDtyZXR1cm4gYi5hcHBseShjLGFyZ3VtZW50cyksXCJzaGlmdFwiIT1hJiZcInNwbGljZVwiIT1hfHwwIT09Yy5sZW5ndGh8fGRlbGV0ZSBjWzBdLE8uY2FsbCh0aGlzLGMpfX0pLEEoW1wiY29uY2F0XCIsXCJqb2luXCIsXCJzbGljZVwiXSxmdW5jdGlvbihhKXt2YXIgYj1mW2FdO3oucHJvdG90eXBlW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIE8uY2FsbCh0aGlzLGIuYXBwbHkodGhpcy5fd3JhcHBlZCxhcmd1bWVudHMpKX19KSx6LmV4dGVuZCh6LnByb3RvdHlwZSx7Y2hhaW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hhaW49ITAsdGhpc30sdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd3JhcHBlZH19KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZShcInVuZGVyc2NvcmVcIixbXSxmdW5jdGlvbigpe3JldHVybiB6fSl9KS5jYWxsKHRoaXMpfSx7fV19LHt9LFsxXSk7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpXHJcbntcclxuXHJcbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+XHJcbiAgICB7XHJcblxyXG4gICAgICAgICQuZ2V0SlNPTihcIi4vbmVydWFsX25ldHdvcmsvbmV0d29yay5qc29uXCIsIGZ1bmN0aW9uIChqc29uKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVzb2x2ZShqc29uKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgcHJvbWlzZVxyXG4gICAgICAgIC50aGVuKFxyXG4gICAgICAgICAgICByZXNwb25zZSA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICAgICAgLnRoZW4oXHJcbiAgICAgICAgICAgIHJlc3BvbnNlID0+XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBydW5OZXR3b3JrKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgICAgICAudGhlbihcclxuICAgICAgICAgICAgcmVzdWx0TmV0d29yayA9PlxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHROZXR3b3JrKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHROZXR3b3JrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG5cclxuXHJcbn0pOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IERhbmlpbCBvbiAxMC4xMC4yMDE2LlxyXG4gKi9cclxuZnVuY3Rpb24gcnVuTmV0d29yayhuZXR3b3JrKVxyXG57XHJcbiAgICB2YXIgbWF4VmFsdWVPYmogPSBuZXR3b3JrLm1heFZhbHVlT2JqO1xyXG4gICAgdmFyIG5ldCA9IG5ldyBicmFpbi5OZXVyYWxOZXR3b3JrKCkuZnJvbUpTT04obmV0d29yayk7XHJcbiAgICBuZXQuZnJvbUpTT04obmV0d29yayk7XHJcblxyXG5cclxuICAgIHJldHVybiBnZXRSZXN1bHROZXR3b3JrKHt0aW1lOjd9LCBtYXhWYWx1ZU9iaiwgbmV0KTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFJlc3VsdE5ldHdvcmsoaW5wdXQsIG1heFZhbHVlT2JqLCBuZXQpXHJcbntcclxuICAgIC8vQkVHSU4gbm9ybWFsaXplIGlucHV0XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gaW5wdXQpIHtcclxuICAgICAgICBpbnB1dFtrZXldIC89IG1heFZhbHVlT2JqW2tleV07XHJcbiAgICB9XHJcbiAgICAvL0VORCBub3JtYWxpemUgaW5wdXRcclxuICAgIHZhciByZXN1bHROZXR3b3JrID0gbmV0LnJ1bihpbnB1dCk7XHJcbiAgICAvL0JFR0lOIG5vcm1hbGl6ZSBvdXRwdXRcclxuICAgIGZvciAoa2V5IGluIHJlc3VsdE5ldHdvcmspIHtcclxuICAgICAgICByZXN1bHROZXR3b3JrW2tleV0gKj0gbWF4VmFsdWVPYmpba2V5XTtcclxuICAgIH1cclxuICAgIC8vRU5EIG5vcm1hbGl6ZSBvdXRwdXRcclxuICAgIHJldHVybiByZXN1bHROZXR3b3JrO1xyXG5cclxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
